webpackJsonp([29],{1677:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={DataUtility:s(2083).a};t.controllerViews=a;t.meta={langBundle:"react-finance"}},1764:function(e,t,s){"use strict";var a=s(68),i=s.n(a),n=s(28),r=s.n(n);class o extends i.a{constructor(e){super(e),this.initialize()}initialize(){this.populated=!1,this.userPreference={classicPf:void 0,featureTours:{},premium:{},watchlist:{pfOrder:[],isDefaultOrder:!0,isVisible:{world_indices:!1,options:!1,bonds:!1}}}}loadPreferences(e){e&&(this.userPreference=r()({},this.userPreference,e),this.populated=!0,this.emitChange())}getVisible(){return this.userPreference.watchlist&&this.userPreference.watchlist.isVisible||{}}getPfOrder(){return this.userPreference.watchlist&&this.userPreference.watchlist.pfOrder||[]}getPreference(e){return e?this.userPreference[e]:this.userPreference}isEmpty(){return!this.populated}dehydrate(){return{userPreference:this.userPreference,populated:this.populated}}rehydrate(e){this.userPreference=e.userPreference,this.populated=e.populated}}o.storeName="UserPreferenceStore",o.handlers={USER_PREFERENCES_LOAD:"loadPreferences"},t.a=o},1772:function(e,t,s){"use strict";const a={DEFAULT:"default",NARROW:"narrow"};t.b=a;const i={[a.DEFAULT]:[{raw:"symbol"},{raw:"regularMarketPrice"},{raw:"regularMarketChange"},{raw:"regularMarketChangePercent"}],[a.NARROW]:[{raw:"symbol",type:"chartQuoteLink"},{raw:"regularMarketPrice",type:"priceWithChange"}]};t.f=i;const n={[a.DEFAULT]:{ui:{isEditable:!0,quoteStreaming:!0},col:{0:{className:"Whs(nw) Py(6px) Ta(start)"}}},[a.NARROW]:{ui:{isEditable:!0,quoteStreaming:!0},col:{0:{className:"Whs(nw) Py(6px) Va(m)! Ta(start)"}},row:{className:"Bgc($extraLightBlue):h BdB Bdbc($finLightGrayAlt) Bdbc($tableBorderBlue):h H(40px)"}}};t.g=n;const r={[a.DEFAULT]:Object.assign({},n[a.DEFAULT],{ui:{maxRows:5,quoteStreaming:!0}}),[a.NARROW]:Object.assign({},n[a.NARROW],{ui:{maxRows:5,quoteStreaming:!0}})};t.d=r;t.a=["regularMarketPrice","regularMarketChange","regularMarketChangePercent"];t.e=["symbol","shortName","longName","regularMarketPrice","regularMarketChange","regularMarketChangePercent"];t.c={recentQuotes:"recent",cryptocurrencies:"list",trending_tickers:"list",most_active:"list",gainers:"list",losers:"list",mutualfunds:"list",etfs:"list",currencies:"list",commodities:"list",signedOut:"signedOut",promoImage:"promoImage","ad-lrec":"ad-lrec","ad-srec":"ad-srec","ad-lrec2":"ad-lrec2",sidekickTv:"sidekickTv",options_highest_open_interest:"list",options_highest_implied_volatility:"list"}},1782:function(e,t,s){"use strict";var a=s(1),i=s.n(a),n=s(0),r=s.n(n),o=s(91),c=s.n(o),l=s(19),d=s(20);s.n(d);class p extends i.a.Component{constructor(e,t){super(e,t),this.onClose=this.onClose.bind(this),this.onSubmit=this.onSubmit.bind(this)}onClose(){this.context.executeAction(c.a.hide),"function"==typeof this.props.onClose&&this.props.onClose()}onSubmit(e){e.preventDefault(),"function"==typeof this.props.onSubmit&&(this.props.onSubmit(e),this.onClose())}render(){const{rapidSec:e,children:t,titleMessageId:s,subTitleMessage:a,submitMessageId:n,errorMessageId:r,submitI13nModel:o}=this.props;return i.a.createElement("section",{className:"Bxsh($boxAreaShadow) Bgc(white) P(25px) Pos(f) T(50%) Start(50%) Translate(-50%,-50%) Miw(400px) Miw(300px)--mobp","data-test":"fin-pfModal"},i.a.createElement("h2",{className:"Fz(17px) C(black) Mb(10px)"},i.a.createElement(l.FormattedMessage,{id:s})),a&&i.a.createElement("h3",{className:"Fz(m) Fw(500) C($c-fuji-grey-i) Mb(10px)"},a),r&&i.a.createElement("div",{className:"C($dataRed) Fw(500) Fz(s) Mb(5px)"},i.a.createElement(l.FormattedMessage,{id:r})),i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement("div",null,t),i.a.createElement("div",{className:"Bfc Mt(20px)"},i.a.createElement(d.I13nButton,{type:"submit",className:"Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(3px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px) O(n):f",i13nModel:Object.assign({},o,{sec:e,slk:"submit",itc:1,elm:"btn",elmt:"cl",rspns:"cl"})},i.a.createElement(l.FormattedMessage,{id:n})),i.a.createElement(d.I13nButton,{type:"button",className:"C($c-fuji-blue-1-b) Bd Bdc($c-fuji-blue-1-b) Bdc($actionBlueHover):h C($c-fuji-blue-1-b) C($actionBlueHover):h C($actionBlueHover):f Fw(500) Px(20px) Py(8px) Bdrs(3px) Fz(s) D(ib) Mstart(20px) Whs(nw) Miw(110px) O(n):f",i13nModel:{sec:e,slk:"cancel",itc:1,elm:"btn",elmt:"cl",rspns:"cl"},onClick:this.onClose},i.a.createElement(l.FormattedMessage,{id:"CANCEL"})))))}}p.displayName="PortfolioPopup",p.propTypes={rapidSec:r.a.string.isRequired,submitI13nModel:r.a.object,onSubmit:r.a.func.isRequired,onClose:r.a.func,titleMessageId:r.a.string.isRequired,subTitleMessage:r.a.string,submitMessageId:r.a.string.isRequired,errorMessageId:r.a.oneOfType([r.a.bool,r.a.string]),children:r.a.node},p.contextTypes={executeAction:r.a.func.isRequired},p.defaultProps={submitMessageId:"SUBMIT"},t.a=p},1789:function(e,t){if(void 0===s)var s={};s.delete={name:"delete",height:48,width:48,path:"M42.885 7.616h-9v-2c0-1.104-.896-2-2-2h-14c-1.104 0-2 .896-2 2v2h-9c-1.104 0-2 .896-2 2s.896 2 2 2h36c1.104 0 2-.896 2-2s-.897-2-2-2zM35.885 41.616h-22v-24h-4v26c0 1.104.896 2 2 2h26c1.104 0 2-.896 2-2v-26h-4v24z"},void 0!==e&&e.exports&&(e.exports=s.delete)},1805:function(e,t,s){"use strict";t.a=function(e,t){const{pfId:s,posIds:a}=t;if(!s)throw i.a.http.badRequest("deletePositions: missing `pfId`");if(!a)throw i.a.http.badRequest("deletePositions: missing `posIds`");const r=e.request.user.guid;if(!r)throw i.a.http.badRequest("deletePositions: Unable to fetch user guid");return Object(n.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:r,pfId:s},method:"update",body:{parameters:{userId:r,userIdType:"guid",pfId:s,fullResponse:!0},operations:a.map(e=>({operation:"position_delete",posId:e}))}}).then(()=>{e.dispatch("FIN_PF_LIST_DELETE_POSITIONS",{pfId:s,posIds:a}),e.executeAction(o.a.hide)}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:c.h}),t})};var a=s(26),i=s.n(a),n=s(88),r=s(91),o=s.n(r),c=s(246)},1807:function(e,t,s){"use strict";var a=s(1),i=s.n(a),n=s(0),r=s.n(n),o=s(1586),c=s(19),l=s(11),d=(s.n(l),s(1572)),p=s(1561),m=s(190),u=s(632),h=s.n(u),b=s(43),g=s(364),f=s.n(g);const E={BTN:"button",LINK:"link",NOMODAL:"nomodal"};class x extends i.a.PureComponent{constructor(e){super(e),this.rapidSec=e.rapidSec||Object(b.t)("AddSymbolBtn"),this.onAdd=this.onAdd.bind(this),this.setDropdownRef=this.setDropdownRef.bind(this)}setDropdownRef(e){e&&(this.listDropDown=e)}closeDropDown(){this.listDropDown&&this.listDropDown.closeMenu()}onAdd(e,t){Object(b.f)("add-symbol",this,{sec:this.props.rapidSec,subsec:this.props.subSec,slk:t,outcm:t+" added"}),this.context.executeAction(o.a,{symbols:t,pfId:this.props.pfId,silent:!1}),this.closeDropDown(),"function"==typeof this.props.onAdd&&this.props.onAdd(e,t)}renderDropdown({containerClass:e,inputClass:t="",resultClassName:s=""}){const{showTip:a,subSec:n,autoFocus:r}=this.props;let o,l=i.a.createElement(p.a,{inputClassNames:f.a.input+"Pend(30px) My(8px) W(100%) "+t,resultClassNames:"W(100%) T(38px) "+s,containerClassNames:"Bxz(bb) Z(2) "+e,submitButtonClassName:"D(n)!",searchIconClassNames:"Pos(a) Px(8px) T(15px) End(12px) Fz(m) H(15px) W(15px) Stk($c-fuji-blue-1-b)! Fill($c-fuji-blue-1-b)!",haveSubmitButton:!1,onEscape:this.onEscapeActive,onSubmit:this.onAdd,onSelect:this.onAdd,searchI13n:{subsec:n},placeholderKey:"AUTOCOMPLETE_PLACEHOLDER",showFooter:this.props.showFooter,resultsRowConfig:{type:"addSymbol"},autoToggleResults:!1,autoFocus:r});return a&&(o=i.a.createElement("div",{key:"tip",className:"Px(8px) C($c-fuji-grey-j) Pt(6px) Pb(10px)"},i.a.createElement("div",{className:"Mb(10px) Fw(500) Fz(14px)"},i.a.createElement(c.FormattedMessage,{id:"ENTER_SYMBOL_COMPANY"})),i.a.createElement("div",{className:"Mb(10px)"},i.a.createElement(c.FormattedMessage,{id:"LOOKUP_FOOTER_TIP"})),i.a.createElement("div",null,i.a.createElement(c.FormattedMessage,{id:"CASH_TIP"})))),[i.a.createElement(d.a,{key:"signin",signedInElement:l,wrapInDialog:!0}),o]}render(){const{menuClassName:e,arrowStyle:t,className:s,type:a}=this.props;let n,r,o,d;return a===E.NOMODAL?i.a.createElement("div",{className:"Pos(r) "+s},this.renderDropdown({inputClass:"Fz(m)",containerClass:"Px(8px)"})):(a===E.LINK?(n="add-sym-btn Td(n) Fz(s) D(ib) Bxz(bb) Py(7px) Px(0) C($c-fuji-blue-1-b) C($actionBlueHover):h Fw(500) ",r="H(13px) add-sym-btn:h_Fill($actionBlueHover)! add-sym-btn:h_Stk($actionBlueHover)! Mend(4px) Mt(-3px) Va(m)!",o="#0081f2",d="T(35px) "):(n="Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Pstart(10px) Pend(15px) Py(8px) Bdrs(3px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px)",r="Fill(white)! Stk(white)! Fw(b) Pend(6px) Mt(-3px) Va(m)!",o="#fff",d="Start(-45px) T(45px) "),i.a.createElement(m.a,{id:this.rapidSec,ref:this.setDropdownRef,content:this.renderDropdown({containerClass:"Py(0) Px(8px) W(300px) Maw(98%)",resultClassName:"Mx(-8px)"}),className:"M(0) D(ib) Bdrs(3px) Fz(s)",menuClassName:"Bd Bdrs(3px) Bdc($c-fuji-grey-c) Z(10) Bxsh($boxShadow) Bgc(white) W(300px) Ta(start) Cur(a) "+d+e,showClose:!1,showArrow:!0,arrowStyle:t},i.a.createElement("div",{className:n+s,"data-test":"add-symbol-btn"},i.a.createElement(l.Icon,{asset:h.a,height:13,color:o,className:r}),i.a.createElement(c.FormattedMessage,{id:"ADD_SYMBOL"}))))}}x.displayName="AddSymbolBtn",x.propTypes={showFooter:r.a.bool,type:r.a.oneOf(Object.keys(E).map(e=>E[e])),pfId:r.a.string,onAdd:r.a.func,className:r.a.string,menuClassName:r.a.string,arrowStyle:r.a.object,showTip:r.a.bool,subSec:r.a.string,autoFocus:r.a.bool,rapidSec:r.a.string},x.defaultProps={type:E.LINK,className:"",menuClassName:"End(0)",arrowStyle:{left:15},subSec:"",autoFocus:!1,showTip:!1},x.contextTypes={executeAction:r.a.func.isRequired},t.a=x},1833:function(e,t,s){"use strict";var a=s(39),i=s.n(a),n=s(1551),r=s(43),o=s(26),c=s.n(o),l=s(88),d=s(120),p=s.n(d);const m="tachyon.trending";function u(e,t,s){t=t||{};let{count:a,listIds:i}=t;a=a||30;const r=e.getStore(n.a).getPositions(i);if(!p()(r)&&r.count()>=a)return s&&s();Object(l.b)(e,{resource:m,params:Object.assign({},t,{region:e.session.dimensions.region||"US"})}).then(t=>{if(!t||!t.quotes)throw c.a.http.badGateway("Empty trending tickers data");t={primaryKey:i,trending_tickers:[{positions:function(e){return Array.isArray(e)?e.map(function(e,t){return{symbol:e.symbol,sortOrder:t}}):null}(t.quotes)}],views:[],quotes:{}},e.dispatch("YFIN_LIST_LOAD_SUCCESS",t),s&&s(null,t)}).catch(t=>{e.dispatch("YFIN_LISTS_LOAD_FAILURE",{error:t,listIds:[i]}),s&&s(t)})}var h=s(2),b=s.n(h);const g="tachyon.screenerPredefinedSaved";function f(e,t,s){t=t||{};let{count:a,listId:i,scrId:r}=t;a=a||5;const o=e.getStore(n.a).getPositions(i);if(o&&o.length>=a)return void(s&&s());const d=b()(e,["session","dimensions"],{});Object(l.b)(e,{resource:g,params:{formatted:!1,scrIds:r,count:a,lang:d.lang||"en-US",region:d.region||"US"}}).then(t=>{if(!t||!t.quotes)throw c.a.http.badGateway("Empty list "+i+" data");const a=function(e){return Array.isArray(e)?e.map((e,t)=>({symbol:e.symbol,sortOrder:t})):null}(t.quotes);let n={primaryKey:i,views:[],quotes:{}};n[i]=[{positions:a}],e.dispatch("YFIN_LIST_LOAD_SUCCESS",n),s&&s(null,n)}).catch(t=>{e.dispatch("YFIN_LIST_LOAD_FAILURE",{error:t,listIds:[i]}),s&&s(t)})}f.displayName="loadPredefinedList";var E=f;t.a=function(e,{count:t=30,listIds:s,silent:a,listConfig:o,enableLoading:c=!1},l){const d=e.getStore(n.a),p={},m=[];s&&(Array.isArray(s)||(s=[s]),(s=s.filter(e=>{const s=d.getPositions(e);return!s||s.length<t})).forEach(s=>{if(s===x)p[s]=r.c.bind(null,u,e,{count:t,listIds:s,noquote:!0});else if(o){const a=o.getIn([s,y]);a?p[s]=r.c.bind(null,E,e,{count:t,listId:s,scrId:a,noquote:!0}):m.push(s)}else m.push(s)}));p.loadLists=r.c.bind(null,S,e,{count:t,listIds:m,noquote:!0,silent:a,enableLoading:c}),i.a.parallel(p,(e,t)=>{let s=t.loadLists||[];Object.keys(t).forEach(e=>{"loadLists"!==e&&t[e]&&!t[e].err&&s.push(t[e])}),l&&l(e,s)})};const x="trending_tickers",y="predefinedScrId";function S(e,{count:t,listIds:s,noquote:a,enableLoading:i,silent:n},r){i&&e.dispatch("YFIN_LISTS_SET_LOADING",!0,s),e.service.read("YFinLists",{count:t,listIds:s,noquote:a},(t,a)=>{t||!Array.isArray(a)||0===a.length?e.dispatch("YFIN_LISTS_LOAD_FAILURE",{error:t,listIds:s}):n||e.dispatch("YFIN_LISTS_LOAD_SUCCESS",a),r&&r(t,a)})}},1861:function(e,t,s){"use strict";var a=s(1),i=s.n(a),n=s(0),r=s.n(n),o=s(1601),c=s(116),l=s.n(c),d=s(19),p=s(20),m=(s.n(p),s(1590)),u=s(626);class h extends i.a.PureComponent{constructor(){super(),this.onCancel=this.onCancel.bind(this),this.onSubmit=this.onSubmit.bind(this),this.setInputRef=this.setInputRef.bind(this),this.setCurrencyRef=this.setCurrencyRef.bind(this),this._requestPending=!1}setInputRef(e){e&&(this.inputNode=e,e.focus())}setCurrencyRef(e){e&&(this.currencySelect=e)}componentWillReceiveProps(e){const{meta:t,hasError:s,onCreate:a}=e;if(this._requestPending){const{lastCreatedList:e}=t;!s&&e&&e.pfName===this.inputNode.value&&(this.inputNode.value="","function"==typeof a&&a({pfName:e.pfName,pfId:e.id})),this._requestPending=!1}}onSubmit(e){e.preventDefault();const t=this.inputNode.value;if(t.trim()){const e=this.currencySelect&&this.currencySelect.getValue();this._requestPending=!0,this.context.executeAction(o.a,{silent:!1,pfName:t,baseCurrency:e})}}onCancel(e){"function"==typeof this.props.onCancel&&this.props.onCancel(e)}render(){const{className:e,showCurrency:t,currencies:s,hasError:a,rapidSec:n}=this.props,r=this.context.intl.formatMessage,o=t&&s&&s.map(e=>({data:e.symbol,content:e.longName+" ("+e.symbol+")"}));let c;a&&(c=i.a.createElement("div",{className:"C($c-fuji-red-2-b) Fw(500) Fz(s) Mb(5px)"},i.a.createElement(d.FormattedMessage,{id:"CREATE_PF_ERROR"})));const l=o&&t;return i.a.createElement("section",{className:e,"data-test":"fin-create-pfModal"},i.a.createElement("h2",{className:"Fz(17px) C(black) Mb(10px)"},i.a.createElement(d.FormattedMessage,{id:"CREATE_PORTFOLIO"})),c,i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement("div",null,i.a.createElement("input",{required:!0,className:"Fz(s) H(34px) Bdc($c-fuji-grey-c) Bdc($c-fuji-blue-1-b):f W(100%) Pstart(6px) Fw(500) "+(l?" Mb(20px)":""),placeholder:r({id:"ENTER_PORTFOLIO_NAME"}),autoFocus:!0,ref:this.setInputRef})),i.a.createElement("div",null,l?i.a.createElement(m.a,{name:"currency-select",className:"H(36px) D(b) W(100%)",iconClassName:"H(100%) W(8px) Va(m)! Mstart(8px)",options:o,selected:"USD",ref:this.setCurrencyRef}):null),i.a.createElement("div",{className:"Bfc Mt(20px)"},i.a.createElement(p.I13nButton,{type:"submit",className:"Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(3px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px) O(n):f",title:r({id:"SUBMIT"}),i13nModel:{sec:n,slk:"submit",itc:0,elm:"btn",elmt:"done",rspns:"nav"}},i.a.createElement(d.FormattedMessage,{id:"SUBMIT"})),i.a.createElement(p.I13nButton,{type:"button",className:"C($c-fuji-blue-1-b) Bd Bdc($c-fuji-blue-1-b) Bdc($actionBlueHover):h C($c-fuji-blue-1-b) C($actionBlueHover):h C($actionBlueHover):f Fw(500) Px(20px) Py(8px) Bdrs(3px) Fz(s) D(ib) Mstart(20px) Whs(nw) Miw(110px) O(n):f",title:r({id:"CANCEL"}),i13nModel:{sec:n,slk:"cancel",itc:1,elm:"btn",elmt:"cl",rspns:"cl"},onClick:this.onCancel},i.a.createElement(d.FormattedMessage,{id:"CANCEL"})))))}}h.displayName="CreatePortfolio",h.propTypes={className:r.a.string,rapidSec:r.a.string.isRequired,showCurrency:r.a.bool,meta:r.a.object,isLoading:r.a.bool,hasError:r.a.bool,currencies:r.a.array,onCreate:r.a.func,onCancel:r.a.func},h.contextTypes={executeAction:r.a.func.isRequired,getStore:r.a.func.isRequired,intl:r.a.object.isRequired},h.defaultProps={className:"Bxsh($boxAreaShadow) Bgc(white) P(25px) Pos(f) T(50%) Start(50%) Translate(-50%,-50%) Miw(400px) Miw(300px)--mobp",rapidSec:"fin-creat-pf",showCurrency:!0},t.a=l()(h,[u.a],(e,t)=>{const s=e.getStore(u.a);return{meta:s.getMeta(),isLoading:s.isLoading(),currencies:s.getCurrencies(),hasError:s.hasError("PORTFOLIO_CREATE_FAIL")}})},1862:function(e,t,s){"use strict";var a=s(149),i=s.n(a),n=s(90),r=s.n(n),o=s(1863),c=s.n(o);function l(e){return"string"==typeof(e=e||[])?e.toUpperCase().split(c.a.PRF.delimiter):e}function d(){return l(r.a.getSub("PRF","t",c.a)||"")}function p(e){var t=d(),s=l(e);return t.filter(function(e){return-1===s.indexOf(e)})}t.a={getTickersFromCookie:d,saveTickersToCookie:function(e){return e.splice(c.a.PRF.maxQuotes),r.a.setSub("PRF","t",e.join("+"),c.a),e},removeFromTickers:p,addToTickers:function(e,t){var s=i()(l(e)).filter(function(e){return t[e]});return s.concat(p(s))},reorderTickers:function(e,t,s){return s<0&&(s=0),e.splice(s,0,e.splice(t,1)[0]),e},formatAsRecentQuotes:function(e){return{positions:e.map(function(e,t){return{symbol:e,sortOrder:t,posId:t}})}}}},1863:function(e,t){e.exports={path:"/",domain:".finance.yahoo.com",maxAge:63113851.9872,PRF:{maxQuotes:15,delimiter:/\s*[,+]+\s*/g}}},1864:function(e,t,s){"use strict";var a=s(0),i=s.n(a),n=s(1),r=s.n(n),o=s(20);s.n(o);class c extends r.a.PureComponent{renderInStream(){const{width:e,height:t,url:s,image:a,imgClasses:i,delayedRender:n}=this.props,r=document.getElementById("slingstoneStream-0-Stream");if(n&&r&&a&&s){let n=r.querySelector("ul");const o=n&&n.querySelector("li.js-stream-content:nth-child(2)");if(o){let r=document.createElement("a");r.setAttribute("href",s),r.setAttribute("data-ylk","elm:in-prod-promo-img"),r.setAttribute("target","_blank"),r.innerHTML=`<img src="${a}" height="${t}" width="${e}" class="${i}" />`,n.insertBefore(r,o)}}}componentDidMount(){const{delayedRender:e}=this.props,t=document.getElementById("slingstoneStream-0-Stream");if(e)if(t)this.renderInStream();else{const e=this;setTimeout(function(){e.renderInStream()},3e3)}}render(){const{width:e,height:t,url:s,image:a,classNames:i,imgClasses:n,delayedRender:c}=this.props;if(!c&&a){const c=r.a.createElement("img",{src:a,height:t,width:e,className:n});return r.a.createElement("div",{className:i},s?r.a.createElement(o.I13nAnchor,{i13nModel:{slk:"in-prod-promo-img"},href:s,target:"_blank"},c):c)}return null}}c.displayName="PromoImage",c.propTypes={height:i.a.oneOfType([i.a.string,i.a.number]).isRequired,width:i.a.oneOfType([i.a.string,i.a.number]).isRequired,image:i.a.string.isRequired,url:i.a.string,classNames:i.a.string,imgClasses:i.a.string,delayedRender:i.a.bool},c.defaultProps={classNames:"Ta(c)",imgClasses:"Bgr(nr) Bgz(ct) My(20px) Mx(a)",delayedRender:!0},t.a=c},1865:function(e,t,s){"use strict";var a=s(26),i=s.n(a),n=s(30),r=s(1764),o=s(1893);function c(e,t,s){const a=e.getStore(r.a);a.loadPreferences(t);const n=a.getPreference();e.service.update("finance_user_preferences",{userPreferences:n},{},null,(t,a)=>{if(t||!a)return t=t||i.a.http.badGateway("Empty user pref response"),void s(t);e.dispatch("USER_PREFERENCES_LOAD",Object.assign({},a.userPreferences,{classicPf:a.classicPf})),s(null,a)})}function l(e,t,s){if(s=s||Function.prototype,!t)return void s(i.a.http.create(400,"Missing newState user preferences payload",{debug:[t]}));if(!Object(n.B)(e))return void s(i.a.http.unauthorized("User is not logged in"));e.getStore(r.a).isEmpty()?Object(o.a)(e,{},a=>{a?s(a):c(e,t,s)}):c(e,t,s)}l.displayName="updateUserPreference",t.a=l},1893:function(e,t,s){"use strict";var a=s(26),i=s.n(a),n=s(30);function r(e,t,s){Object(n.B)(e)?e.service.read("finance_user_preferences",{},(a,n)=>{if(a||!n)return a=a||i.a.http.badGateway("sherpa error"),e.dispatch("USER_PREFERENCES_LOAD_FAIL",a),void s(a);t.silent||e.dispatch("USER_PREFERENCES_LOAD",Object.assign({},n.userPreferences,{classicPf:n.classicPf})),s(null,n)}):s(i.a.http.unauthorized("User is not logged in"))}r.displayName="loadUserPreferences",t.a=r},1917:function(e,t,s){"use strict";var a=s(0),i=s.n(a),n=s(1),r=s.n(n),o=s(364),c=s.n(o),l=s(20),d=(s.n(l),s(30));const p=Function.prototype;class m extends r.a.PureComponent{constructor(e){super(e),this.onConfirm=this.onConfirm.bind(this),this.onCancel=this.onCancel.bind(this)}onConfirm(e){e.preventDefault(),this.props.onConfirm&&this.props.onConfirm(e)}onCancel(e){e.preventDefault(),this.props.onCancel&&this.props.onCancel(e)}render(){const e=Object(d.o)("ConfirmModal"),t={sec:e,_p:"0",slk:this.props.confirmText,elmt:"dn",rspns:"updct",outcm:"confirm"},s={sec:e,_p:"1",slk:this.props.cancelText,elmt:"cl",rspns:"cl",outcm:"cancel"};return r.a.createElement("div",{className:this.props.className},r.a.createElement("h4",null,this.props.title),r.a.createElement("p",{className:"Mt(5px)"},this.props.message),r.a.createElement("form",{onSubmit:this.onConfirm},this.props.children,r.a.createElement("div",{className:"Bfc My(20px)"},r.a.createElement(l.I13nButton,{type:"submit",className:c.a.btn_primary+c.a.btn_primary_large+"proceed Mend(10px)",autoFocus:!0,i13nModel:t},this.props.confirmText),r.a.createElement(l.I13nButton,{className:c.a.btn_secondary+c.a.btn_secondary_large+"cancel",onClick:this.onCancel,i13nModel:s},this.props.cancelText))))}}m.displayName="ConfirmModal",m.propTypes={onCancel:i.a.func,onConfirm:i.a.func,cancelText:i.a.string,confirmText:i.a.string,title:i.a.string,message:i.a.string,className:i.a.string,children:i.a.object},m.defaultProps={className:"dropbox modal Ta(c) Pt(15px)",onCancel:p,onConfirm:p},t.a=m},1941:function(e,t,s){"use strict";var a=s(1),i=s.n(a),n=s(0),r=s.n(n),o=s(26),c=s.n(o),l=s(88),d=s(91),p=s.n(d),m=s(246);function u(e,t){const{pfId:s,pfName:a}=t;if(!s)throw c.a.http.badRequest("renamePortfolio: missing `pfId`");if(!a)throw c.a.http.badRequest("renamePortfolio: missing `pfName`");const i=e.request.user.guid;if(!i)throw c.a.http.badRequest("renamePortfolio: Unable to fetch user guid");return Object(l.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:i,pfId:s},method:"update",body:{parameters:{userId:i,userIdType:"guid",pfId:s,fullResponse:!0},operations:[{operation:"portfolio_update",pfName:a}]}}).then(t=>{if(!t)throw c.a.http.internalServerError("renamePortfolio: No list received");delete t.positions,e.dispatch("FIN_PF_LIST_UPDATE",{pfId:s,list:t}),e.executeAction(p.a.hide)}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:m.u}),t})}var h=s(1782),b=s(116),g=s.n(b),f=s(626),E=s(19);class x extends i.a.Component{constructor(){super(),this.onSubmit=this.onSubmit.bind(this),this.setInputRef=this.setInputRef.bind(this)}setInputRef(e){e&&(this.inputRef=e,e.focus())}onSubmit(){this.context.executeAction(u,{pfId:this.props.pfId,pfName:this.inputRef.value})}render(){const{hasError:e,pfName:t}=this.props,s=this.context.intl.formatMessage;return i.a.createElement(h.a,{rapidSec:"fin-rename-pf",onSubmit:this.onSubmit,titleMessageId:"RENAME_PORTFOLIO",errorMessageId:e&&"RENAME_PORTFOLIO_ERROR",submitMessageId:"SAVE"},i.a.createElement("p",{className:"M(0) Mb(10px) P(0) Fz(s)"},i.a.createElement(E.FormattedMessage,{id:"RENAME_MODAL_MESSAGE",values:{pfName:t}})),i.a.createElement("input",{required:!0,className:"Fz(s) H(34px) Bdc($c-fuji-grey-c) Bdc($c-fuji-blue-1-b):f W(100%) Pstart(6px) Fw(500)",placeholder:s({id:"ENTER_PORTFOLIO_NAME"}),defaultValue:t,ref:this.setInputRef}))}}x.displayName="RenamePortfolioPopup",x.propTypes={pfId:r.a.string,pfName:r.a.string,hasError:r.a.bool},x.defaultProps={pfName:""},x.contextTypes={executeAction:r.a.func.isRequired,intl:r.a.object.isRequired};t.a=g()(x,[f.a],(e,t)=>{return{hasError:e.getStore(f.a).hasError(m.u)}})},1942:function(e,t,s){"use strict";var a=s(1),i=s.n(a),n=s(0),r=s.n(n),o=s(26),c=s.n(o),l=s(88),d=s(91),p=s.n(d),m=s(93),u=s.n(m),h=s(246);function b(e,t){const{pfId:s}=t;if(!s)throw c.a.http.badRequest("deletePortfolio: missing `pfId`");const a=e.request.user.guid;if(!a)throw c.a.http.badRequest("deletePortfolio: Unable to fetch user guid");return Object(l.b)(e,{resource:"tachyon.portfolioDelete",params:{userId:a,pfId:s},method:"delete"}).then(()=>{e.executeAction(p.a.hide),e.executeAction(u.a,{url:"/portfolios"})}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:h.g}),t})}var g=s(1782),f=s(116),E=s.n(f),x=s(626),y=s(19);class S extends i.a.PureComponent{constructor(){super(),this.onSubmit=this.onSubmit.bind(this),this.state={errorMessage:null}}onSubmit(e){this.context.executeAction(b,{pfId:this.props.pfId})}render(){const{hasError:e,pfName:t}=this.props;return i.a.createElement(g.a,{rapidSec:"fin-delete-pf",onSubmit:this.onSubmit,titleMessageId:"DELETE_PORTFOLIO_TITLE",errorMessageId:e&&"DELETE_PORTFOLIO_ERROR",submitMessageId:"CONFIRM",submitI13nModel:{slk:"submit",itc:0,elm:"btn",elmt:"done",rspns:"nav"}},i.a.createElement("p",{className:"M(0) Mb(10px) P(0) Fz(s)"},i.a.createElement(y.FormattedMessage,{id:"CONFIRM_DELETE_MSG",values:{pfName:t}})))}}S.displayName="DeletePortfolioPopup",S.propTypes={pfId:r.a.string,pfName:r.a.string,hasError:r.a.bool},S.defaultProps={pfName:""},S.contextTypes={executeAction:r.a.func.isRequired};t.a=E()(S,[x.a],(e,t)=>{return{hasError:e.getStore(x.a).hasError(h.g)}})},2004:function(e,t,s){"use strict";var a=s(1593),i=s(1568),n=s(655),r=s(26),o=s.n(r),c=s(43),l=function(e,t,s){if(t=t||{},!Object(c.H)(e))return s(o.a.http.unauthorized("User is not logged in"));e.service.read("finance_user_preferences",{},{},function(a,i){if(a||!i)return a=a||o.a.http.badGateway("sherpa error"),e.dispatch("USER_PREFERENCES_LOAD_FAIL",a),s(a);t.silent||e.dispatch("USER_PREFERENCES_LOAD",Object.assign({},i.userPreferences,{classicPf:i.classicPf})),s(a,i)})},d=s(192),p=s.n(d),m=s(1772),u=s(2),h=s.n(u),b=s(39),g=s.n(b),f=s(79),E=s.n(f),x=s(246);t.a=function(e,t,s){t||(t={});const n={portfolios:c.c.bind(null,i.a,e,{realTime:!1,setLoading:!1,silent:!1}),recentQuotes:c.c.bind(null,a.a,e,{}),userPreferences:c.c.bind(null,l,e,{}),initialQuotes:["portfolios","recentQuotes",(t,s)=>{s.fields=m.e,y("Fetching fields",s.fields),Object(c.c)(S,e,s,t)}]};t.componentProps&&t.componentProps.sidekickTvModEnabled&&(n.loadSidekick=c.c.bind(null,p.a,e,{name:"sidekickTv-0-Channels",components:[t.componentProps.sidekickTvConfig],parentComponent:{bundleName:"DataUtility",name:"DataUtility"}}));g.a.auto(n,t=>{t&&e.logger.error(t),s()})};const y=E()("FinApp:initInitialDataUtil");function S(e,t,s){const a=!h()(t,["recentQuotes","err"])&&t.recentQuotes,i=t.portfolios&&t.portfolios.portfolios,r={};if(a&&a.positions)for(let e=0;e<a.positions.length;e++)r[a.positions[e].symbol]=!0;if(i&&i.length)for(let e=0;e<i.length;e++)if(i[e].positions)for(let t=0;t<i[e].positions.length;t++)r[i[e].positions[t].symbol]=!0;const o=Object.keys(r);o.length?(e.dispatch("QUOTEDATA_LOADING",o),o.sort(),Object(n.a)(e,{symbols:o,finalFields:t.fields},(t,n)=>{i&&n&&e.dispatch("FIN_PF_LIST_LOAD",Object(x.Z)(null,{portfolios:i,quotes:n})),a&&a.positions&&n&&e.dispatch("RECENT_QUOTES_LOAD_QUOTE_DATA",n),s(t,n)})):s()}},2083:function(e,t,s){"use strict";var a=s(1),i=s.n(a),n=s(0),r=s.n(n),o=s(2004),c=s(1833),l=s(655),d=s(636),p=s(2),m=s.n(p),u=s(30),h=s(43),b=s(39),g=s.n(b);const f=5;function E(e,t,s){t.symbols.sort(),Object(l.a)(e,{symbols:t.symbols,finalFields:t.fields},(a,i)=>{!a&&i&&e.dispatch("YFIN_LIST_QUOTE_DATA_SUCCESS",{listId:t.listId,quoteData:i}),s(a,i)})}function x(e,t,s){const a=e.getStore(d.a),i=Object(u.B)(e);let n;n=i?a.getConfig("app",["base","marketdata","orderedLists"]).toArray():a.getConfig("app",["base","marketdata","defaultLists"]).toArray();const r=a.getConfig("app",["base","marketdata","lists"]);g.a.waterfall([t=>{g.a.parallel(n.map(t=>h.c.bind(null,c.a,e,{listIds:t,enableLoading:!1,listConfig:r,count:f})),t)},(s,a)=>{g.a.parallel(s.map(s=>{if(s.length<1)return Function.prototype;const a=m()(s[0],[s[0].primaryKey,0,"positions"],[]),i=[];if(a.length<1)return Function.prototype;for(let e=0;e<f;e++)a[e]&&a[e].symbol&&i.push(a[e].symbol);return h.c.bind(null,E,e,{symbols:i,fields:t.fields,listId:s[0].primaryKey})}),a)}],t=>{t&&e.logger.error(t),s()})}x.displayName="initDataUtil.client";var y=x,S=s(19),I=s(78),C=s.n(I),N=s(91),w=s(1917),P=s(20),M=s(11),T=s(67),O=s.n(T);class v extends i.a.Component{constructor(){super(),this.onDeleteRow=this.onDeleteRow.bind(this),this.onDeleteConfirm=this.onDeleteConfirm.bind(this),this.onModalClose=this.onModalClose.bind(this)}onDeleteRow(e){e.stopPropagation();const t=this.context.intl.formatMessage;this.context.executeAction(N.show,{component:w.a,closeable:!0,componentProps:{title:t({id:"CONFIRM_DELETE"}),message:t({id:"CONFIRM_DELETE_TICKER"},{symbol:this.props.symbol}),confirmText:t({id:"CONFIRM_YES"}),cancelText:t({id:"CONFIRM_NO"}),errorMessage:t({id:"RENAME_MODAL_ERROR_MESSAGE"}),onConfirm:this.onDeleteConfirm,onCancel:this.onModalClose}})}onDeleteConfirm(e){const{posId:t,symbol:s,onDelete:a}=this.props;Object(u.b)(this,{sec:"confirm-remove",slk:"confirm",elmt:"dn",rspns:"rmct",outcm:"delete"}),"function"==typeof a&&a(e,{posId:t,symbol:s}),this.onModalClose(!0)}onModalClose(e){e||Object(u.b)(this,{sec:"confirm-remove",slk:"cancel",elmt:"cl",rspns:"cl",outcm:"cancel"}),this.context.executeAction(N.hide)}render(){const{rapidSec:e,symbol:t,className:s}=this.props;return i.a.createElement(P.I13nButton,{className:s,title:this.context.intl.formatMessage({id:"DELETE_TICKER_INFO"}),i13nModel:{sec:e,slk:t,elmt:"rm",rspns:"op",outcm:"delete"},onClick:this.onDeleteRow,"data-test":"remove-pos"},i.a.createElement(M.Icon,{asset:O.a,className:"Va(m)! Mt(-5px)",height:16}))}}v.displayName="RemoveSymbol",v.propTypes={className:r.a.string,rapidSec:r.a.string,symbol:r.a.string.isRequired,posId:r.a.oneOfType([r.a.string.isRequired,r.a.number.isRequired]),onDelete:r.a.func},v.contextTypes={intl:r.a.object.isRequired,executeAction:r.a.func.isRequired},v.defaultProps={className:"",rapidSec:""};var R=v,L=s(1541),F=s(89),B=s.n(F),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e};const k=5,A="Whs(nw) Ta(end) Pstart(10px) Py(6px)",D="Bgc($extraLightBlue):h BdB Bdbc($finLightGrayAlt) Bdbc($tableBorderBlue):h H(44px)",j="$$CASH",U={quoteStreaming:!0,isEditable:!1,showDashes:!0},$={symbol:"TD_SYMBOL",regularMarketPrice:"LAST_PRICE",regularMarketChange:"TD_CHANGE",regularMarketChangePercent:"TD_PERCENT_CHANGE"},q={regularMarketPrice:"change",regularMarketChange:"colorChange",regularMarketPercentChange:"colorChange",regularMarketChangePercent:"colorChange",symbol:"quoteLink"},H="-";class z extends i.a.Component{constructor(e){super(e),this.rapidSec=e.rapidSec||"mini-data-table"}getCellContent({fieldId:e,rowData:t,columnType:s}){const{quoteStreaming:a,showDashes:n}=this.props.config.ui,r=t[e]||{},o=("object"==typeof r?r.raw:r)||0,c=("object"==typeof r?r.fmt:r)||"";let l=s||q[e];const d=t.underlyingSymbol||t.symbol||t.ticker||"";switch(l){case"chartQuoteLink":case"quoteLink":{const e=B.a.decode(t.longName||t.shortName||"");if(e||t.quoteType){const t=Object(u.e)("chartQuoteLink"===l?"chart":"quote",{symbol:d,comscoreEnabled:!0});return[i.a.createElement(C.a,{key:"quote",href:t,title:e,followLink:!1,className:"Fw(b) Ell D(b)",i13nModel:{itc:0,elm:"qte",elmt:"link",subsec:this.props.subSec,sec:this.rapidSec}},d),"quoteLink"===l?i.a.createElement("p",{key:d,title:e,className:"Fz(xs) Pt(2px) M(0) C($c-fuji-grey-j) Pos(a) Fw(400)! Ell Maw(220px)"},e):null]}return i.a.createElement("div",{title:e,className:"Fw(500) D(ib) Ell"},d)}case"priceWithChange":{const{regularMarketPrice:e,regularMarketChange:s,regularMarketChangePercent:n,priceHint:r}=t;if(e&&!isNaN(e.raw)&&e.fmt)return[i.a.createElement(L.a,{key:"price",className:"Fw(500)",symbol:d,field:"regularMarketPrice",value:e.raw,textColor:!1,config:{priceHint:r},streamingEnabled:a},c),i.a.createElement("p",{key:"change"},s&&n?[i.a.createElement(L.a,{key:"change",className:"IbBox Fz(xs) Mend(5px)",symbol:d,field:"regularMarketChange",value:s.raw,textColor:!0,config:{priceHint:r},streamingEnabled:a},s.fmt),i.a.createElement(L.a,{key:"changepercent",className:"IbBox Fz(xs)",symbol:d,field:"regularMarketChangePercent",value:n.raw,textColor:!0,cconfig:{priceHint:r},streamingEnabled:a},n.fmt)]:H)];break}case"change":case"colorChange":if(c&&!isNaN(o))return i.a.createElement(L.a,{className:"Fw(500)",symbol:d,field:e,value:o,textColor:"colorChange"===l,config:{priceHint:t.priceHint},streamingEnabled:a},c)}return c||(n?H:i.a.createElement(S.FormattedMessage,{id:"NA"}))}renderHeader(){const{columns:e}=this.props,t=this.props.config.col||{},s=t.className||A,a=e.length;let n=0;const r=[];for(;n<a;n++){const a=e[n];let o=s;t[n]&&(o=t[n].headerClassName||t[n].className||o);let c={style:{},className:o+" Fz(xs) Va(m) Py(5px) Fw(400) "};0===n&&(c.className+=" Ta(start) Pend(10px)");let l=a.fmt;l||(l=void 0===$[a.raw]?"SCREENER_FIELD_"+a.raw:$[a.raw]),r[n]=i.a.createElement("th",_({key:a.raw},c),""===l?l:i.a.createElement(S.FormattedMessage,{id:l}))}return i.a.createElement("tr",{className:"C($c-fuji-grey-j) BdB Bxz(bb) Bdc($c-fuji-grey-c)"},r)}renderRows(){const{columns:e,rowId:t,config:s,isLoading:a,rapidSec:n,rows:r}=this.props,o=s.col||{},c=o.className||A,l=s.row||{},d=s.ui&&s.ui.isEditable,p=[];let m,u=0;const h=e.length,b=a?k:void 0!==s.ui.maxRows?Math.min(s.ui.maxRows,r.length):r.length,g=l.className||D;for(;u<b;u++){const s=r[u]||{},b=a?"":s[t],f=[];if(s.symbol===j)continue;for(m=0;m<h;m++){const t=e[m].raw;let r=o[m]&&o[m].className||c;const l=e[m].type||o[m]&&o[m].type,p=m===h-1;0===m&&(r+=" Start(0) Pend(10px)"),f[m]=i.a.createElement("td",{key:t+m,className:"Va(t) Fz(14px) "+r},a?i.a.createElement("div",{className:"gray-placeholder W(100%) H(30px) My(6px)"}):this.getCellContent({fieldId:t,rowData:s,columnType:l,rowIndex:u}),p&&d?i.a.createElement(R,{className:"Pos(a) Mt(15px) End(-2px) Py(2px) Px(8px) V(h) dt-row:h_V(v)",symbol:s.symbol,onDelete:this.props.onDeleteRow,posId:s.posId,rapidSec:n}):null)}const E=l[u]&&l[u].className||"";p[u]=i.a.createElement("tr",{key:b+u,className:`dt-row ${g} ${E}`},f)}return p}render(){const{config:e}=this.props;return e.ui=Object.assign({},U,e.ui),i.a.createElement("table",{className:"W(100%) Pos(r) Tbl(f) "+this.props.className},i.a.createElement("thead",null,this.renderHeader()),i.a.createElement("tbody",null,this.renderRows()))}}z.displayName="MiniDataTable",z.propTypes={className:r.a.string,rows:r.a.array.isRequired,columns:r.a.array.isRequired,rowId:r.a.string,isLoading:r.a.bool,rapidSec:r.a.string,subSec:r.a.string,onDeleteRow:r.a.func,config:r.a.object,id:r.a.string},z.defaultProps={columns:[],subSec:"",className:"Bdcl(c) BdB Bdc($c-fuji-grey-c)",config:{},isLoading:!1,rows:[],rowId:"symbol",id:"mini-data-table"};var W=z,V=s(1807),Q=s(1772),Y=s(631),G=s.n(Y);const K=({showHeader:e,href:t,type:s,listId:a,title:n,className:r,rapidSec:o,showAddButton:c})=>{if(!e)return null;let l,d;if(t&&n){let e,r="Wow(bw) Us(n) D(ib)";s!==Q.b.NARROW?(e=i.a.createElement(M.Icon,{asset:G.a,height:16,className:"Px(2px) Pt(3px)"}),c&&(r+=" Mt(5px) ",d=i.a.createElement("div",{className:"Fl(end) Fw(500)"},i.a.createElement(V.a,{pfId:a,type:"link",menuClassName:"W(250px)! End(0)",containerClassNames:"Va(m) Fl(end) Cl(start)",arrowStyle:{left:80},rapidSec:o,subSec:"symbol-"+a,autoFocus:!0})))):r="D(b) Ell Maw(150px)",l=i.a.createElement(C.a,{href:t,title:n,className:"Va(m) Fw(b) Fz(m) C(black) "+r,followLink:0!==t.indexOf("/"),i13nModel:Object(h.v)("link",{sec:o,subsec:a}),"data-test":"list-name"},B.a.decode(n||""),e)}return i.a.createElement("header",{className:r},l,d)};K.displayName="DataUtilitySectionHeader",K.propTypes={className:r.a.string,type:r.a.string,showAddButton:r.a.bool,isLoading:r.a.bool,listId:r.a.string,rapidSec:r.a.string,title:r.a.string,showHeader:r.a.bool,href:r.a.string},K.defaultProps={className:"My(5px)",showAddButton:!1,showHeader:!1};var Z=K,J=s(116),X=s.n(J),ee=s(1551),te=s(630),se=s(191),ae=s.n(se);class ie extends i.a.Component{componentDidMount(){this.refreshStreaming(this.props.positions)}componentWillReceiveProps(e){this.refreshStreaming(e.positions)}componentWillUnmount(){this._symbols&&this.context.getStore(te.a).unsubscribe(this._symbols,Q.a)}refreshStreaming(e){if(e&&e.length>0){const t=e.map(e=>e.symbol);this._symbols&&ae()(this._symbols,t)||(this._symbols=t,this.context.getStore(te.a).subscribe(t,Q.a))}}render(){const{className:e,listId:t,showHeader:s,rapidSec:a,name:n,type:r,positions:o,listHref:c,isLoading:l,hasError:d}=this.props;if(d)return null;const p=(n||"").toLowerCase().replace(/ /g,"_");return i.a.createElement("section",{className:e,"data-yaft-module":`tdv2-applet-${p}`},i.a.createElement(Z,{rapidSec:a,showHeader:s,type:r,href:c||Object(u.e)("watchlist",{pfId:t}),listId:t,title:n?this.context.intl.formatMessage({id:n}):""}),i.a.createElement(W,{rapidSec:a,subSec:t,rowId:"symbol",columns:Q.f[r],rows:o,isLoading:l,config:Q.d[r],id:t+"-du-section"}))}}ie.displayName="DataUtilityListSection",ie.propTypes={className:r.a.string,listId:r.a.string,showHeader:r.a.bool,isLoading:r.a.bool,hasError:r.a.bool,type:r.a.string,rapidSec:r.a.string,name:r.a.string,positions:r.a.array,listHref:r.a.string},ie.contextTypes={intl:r.a.object.isRequired,getStore:r.a.func.isRequired},ie.defaultProps={listId:"",className:"Mb(20px)",positions:[],rapidSec:"",type:Q.b.DEFAULT,showHeader:!0};var ne=X()(ie,[ee.a],(e,t)=>{const s=e.getStore(ee.a).getList(t.listId)||{loading:!0,name:t.listId?t.listId.toUpperCase()+"_TITLE":"YF_TITLE"},a=e.getStore(d.a).getConfig("app",["base","marketdata","lists"]);return{isLoading:s.loading,name:a.getIn([t.listId,"name"],s.name),listHref:a.getIn([t.listId,"uri"]),hasError:!!s.error,positions:s.positions}}),re=s(26),oe=s.n(re),ce=s(1862);function le(e,t,s){if(!t.symbol){var a=oe.a.http.badRequest("no `symbol` was provided for removeRecentQuote");return e.dispatch("RECENT_QUOTES_ERROR",a),s(a)}e.dispatch("RECENT_QUOTES_LOAD",{recentquotes:ce.a.formatAsRecentQuotes(ce.a.saveTickersToCookie(ce.a.removeFromTickers(t.symbol)))}),s()}var de=s(1555);class pe extends i.a.Component{constructor(e){super(e);const t=e.config&&e.config.recentQuotes&&e.config.recentQuotes.visibleTickerCount;this.state={isExpanded:isNaN(t)},this.onRemoveSymbol=this.onRemoveSymbol.bind(this),this.onToggleShowMore=this.onToggleShowMore.bind(this)}componentDidMount(){this.refreshStreaming(this.props.positions)}componentWillReceiveProps(e){this.refreshStreaming(e.positions)}componentWillUnmount(){this._symbols&&this.context.getStore(te.a).unsubscribe(this._symbols,Q.a)}refreshStreaming(e){if(e&&e.length>0){const t=e.map(e=>e.symbol);this._symbols&&ae()(this._symbols,t)||(this._symbols=t,this.context.getStore(te.a).subscribe(t,Q.a))}}onRemoveSymbol(e,{symbol:t}){this.context.executeAction(le,{symbol:t})}onToggleShowMore(){this.setState({isExpanded:!this.state.isExpanded})}render(){const{className:e,listId:t,showHeader:s,rapidSec:a,type:n,positions:r,hasError:o,config:c}=this.props,{isExpanded:l}=this.state;if(o)return null;let d;if(r&&r.length){let e=Object.assign({},Q.g[n]);const s=c.recentQuotes&&c.recentQuotes.visibleTickerCount;e.ui.isEditable=Object(u.B)(this.context)&&n!==Q.b.NARROW,isNaN(s)||l||(e=Object.assign({},e,{ui:Object.assign({},e.ui,{maxRows:s})})),d=[i.a.createElement(W,{key:"table",rapidSec:a,subSec:t,rowId:"symbol",columns:Q.f[n],rows:r,onDeleteRow:this.onRemoveSymbol,config:e,id:t+"-du-section"}),c.enableShowMore&&r.length>s?i.a.createElement(P.I13nButton,{key:"exp-btn",className:"P(0) Mx(0) Mb(0) D(ib) C($c-fuji-blue-1-b) C($actionBlueHover):h Fz(s) Fw(500) Mt(5px)",onClick:this.onToggleShowMore,i13nModel:{sec:a,subsec:t,slk:"show-more",itc:1,elm:"btn",elmt:"ct",outcm:l?"clps":"xpnd"}},i.a.createElement(S.FormattedMessage,{id:l?"SHOW_LESS":"SHOW_ALL"})):null]}else d=i.a.createElement("div",{className:"Bdrs(2px) Bdc($c-fuji-grey-c) Bds(s) Bdw(1px) P(20px)"},i.a.createElement("span",{className:"Fz(s) Mb(6px) D(b) Ta(c)"},i.a.createElement(S.FormattedMessage,{id:"MSG_EMPTY_LIST"})));return i.a.createElement("section",{className:e,"data-yaft-module":"tdv2-applet-recently_viewed"},i.a.createElement(Z,{rapidSec:a,showHeader:s,type:n,href:Object(u.e)("watchlist",{pfId:t}),listId:t,title:this.context.intl.formatMessage({id:"RQ_TITLE"})}),d)}}pe.displayName="DataUtilityRecentSection",pe.propTypes={className:r.a.string,config:r.a.object,listId:r.a.string,showHeader:r.a.bool,type:r.a.string,rapidSec:r.a.string,hasError:r.a.bool,positions:r.a.array,quotes:r.a.object},pe.contextTypes={intl:r.a.object.isRequired,session:r.a.object.isRequired,getStore:r.a.func.isRequired,executeAction:r.a.func.isRequired},pe.defaultProps={listId:"recentQuotes",className:"Mb(20px)",positions:[],config:{},rapidSec:"",type:Q.b.DEFAULT,showHeader:!0};var me=X()(pe,[de.a],(e,t)=>{const s=e.getStore(de.a),a=s.getPositions()||[],i=s.getError();return{positions:a,hasError:i&&i.length>0}}),ue=s(1805),he=s(626),be=s(246);class ge extends i.a.PureComponent{constructor(e){super(e);const t=e.config&&e.config.portfolio&&e.config.portfolio.visibleTickerCount;this.state={isExpanded:isNaN(t)},this.onDeletePosition=this.onDeletePosition.bind(this),this.onToggleShowMore=this.onToggleShowMore.bind(this)}componentDidMount(){this.refreshStreaming(this.props.portfolio&&this.props.portfolio.positions)}componentWillReceiveProps(e){const t=e.portfolio&&e.portfolio.positions;this.refreshStreaming(t)}componentWillUnmount(){this._symbols&&this.context.getStore(te.a).unsubscribe(this._symbols,Q.a)}refreshStreaming(e){if(e&&e.length>0){const t=e.map(e=>e.symbol);this._symbols&&ae()(this._symbols,t)||(this._symbols=t,this.context.getStore(te.a).subscribe(t,Q.a))}}onDeletePosition(e,{posId:t}){this.context.executeAction(ue.a,{pfId:this.props.listId,posIds:[t]})}onToggleShowMore(){this.setState({isExpanded:!this.state.isExpanded})}render(){const{className:e,rapidSec:t,showHeader:s,type:a,listId:n,isLoading:r,hasError:o,config:c={},portfolio:l}=this.props,{isExpanded:d}=this.state;if(o)return null;const p=l.following,m=p||!!l.linkedAccount||a===Q.b.NARROW,{positions:h,pfName:b}=l;let g;if(r||h&&0!==h.length){let e=Object.assign({},Q.g[a]);const s=c.portfolio&&c.portfolio.visibleTickerCount;e.ui.isEditable=!m,isNaN(s)||d||(e=Object.assign({},e,{ui:Object.assign({},e.ui,{maxRows:s})})),g=[i.a.createElement(W,{key:"table",rapidSec:t,subSec:"portfolio",rowId:"symbol",columns:Q.f[a],rows:h,isLoading:r,onDeleteRow:this.onDeletePosition,config:e,id:n+"-du-section"}),c.enableShowMore&&h.length>s?i.a.createElement(P.I13nButton,{key:"exp-btn",className:"P(0) Mx(0) Mb(0) D(ib) C($c-fuji-blue-1-b) C($actionBlueHover):h Fz(s) Fw(500) Mt(5px)",onClick:this.onToggleShowMore,i13nModel:{sec:t,subsec:"portfolio",slk:"show-more",itc:1,elm:"btn",elmt:"ct",outcm:d?"clps":"xpnd"}},i.a.createElement(S.FormattedMessage,{id:d?"SHOW_LESS":"SHOW_ALL"})):null]}else{let e;m||(e=i.a.createElement("div",{className:"Ta(c) M(a) Fw(500)"},i.a.createElement(V.a,{pfId:n,type:"button",menuClassName:"W(250px)! End(0)",rapidSec:t,arrowStyle:{left:40},subSec:"symbol-"+n,autoFocus:!0}))),g=i.a.createElement("div",{className:"Bdrs(2px) Bdc($c-fuji-grey-c) Bds(s) Bdw(1px) P(20px)"},i.a.createElement("span",{className:"Fz(s) Mb(6px) D(b) Ta(c)"},i.a.createElement(S.FormattedMessage,{id:"MSG_EMPTY_LIST"})),e)}const f=(b||"").toLowerCase().replace(/ /g,"_");return i.a.createElement("section",{className:e,"data-test":`du-section-${f}`,"data-yaft-module":`tdv2-applet-${f}`},i.a.createElement(Z,{rapidSec:t,showAddButton:!m,showHeader:s,type:a,href:p?l.portfolioMeta&&l.portfolioMeta.shareUrl:Object(u.e)("portfolio",{pfId:n}),listId:n,title:b}),g)}}ge.displayName="DataUtilityPortfolioSection",ge.propTypes={className:r.a.string,listId:r.a.string,config:r.a.object,showHeader:r.a.bool,type:r.a.string,hasError:r.a.bool,rapidSec:r.a.string,isLoading:r.a.bool,portfolio:r.a.object},ge.contextTypes={intl:r.a.object.isRequired,executeAction:r.a.func.isRequired,getStore:r.a.func.isRequired},ge.defaultProps={listId:"",portfolio:{},config:{},className:"Mb(20px)",rapidSec:"",type:Q.b.DEFAULT,showHeader:!0};var fe=X()(ge,[he.a],(e,t)=>{const s=e.getStore(he.a);return{portfolio:s.getLists(t.listId)||{},isLoading:s.isLoading(),hasError:s.hasError(be.q)}}),Ee=s(1572);const xe=(e,t)=>{let s=Object(h.I)(t)?"WATCHLIST_SIGNIN_AGAIN":"WATCHLIST_SIGNIN";return i.a.createElement("section",{className:e.className,"data-yaft-module":"tdv2-applet-signed_out_notice"},i.a.createElement("span",{className:"Fw(b) Fz(m) C(black) D(b) Mb(10px)"},i.a.createElement(S.FormattedMessage,{id:"MY_WATCHLIST"})),i.a.createElement("div",{className:"Bdrs(2px) Bdc($c-fuji-grey-c) Bds(s) Bdw(1px) P(20px)"},i.a.createElement("div",{className:"Fz(s) Ta(c) Mb(10px)"},i.a.createElement(S.FormattedMessage,{id:s})),i.a.createElement(Ee.a,{classNameWithoutContainer:"Ta(c)"})))};xe.propTypes={className:r.a.string,listId:r.a.string},xe.defaultProps={className:"",listId:""},xe.displayName="DataUtilitySignedOutSection";var ye=xe,Se=s(635),Ie=s.n(Se),Ce=s(1864),Ne=s(1865),we=s(1764);function Pe(e,t,s){if(!t.pfId){const a=oe.a.http.badRequest("Missing pfId",{debug:[t]});return e.dispatch("USER_PREFERENCES_LOAD_FAIL",a),void s(a)}const a=e.getStore(we.a).getVisible(),i=a[t.pfId]||void 0===a[t.pfId];Object(Ne.a)(e,{watchlist:{isVisible:{[t.pfId]:!i}}},s)}Pe.displayName="toggleVisibleWatchlist";var Me=Pe;function Te(e,t,s){if(!Array.isArray(t.order))return void s(oe.a.http.badRequest("Missing `order`",{debug:[t]}));const a=e.getStore(we.a).getPreference("watchlist");Object(Ne.a)(e,{watchlist:Object.assign({},a,{pfOrder:t.order})},s)}Te.displayName="reorderList";var Oe=Te,ve=s(190),Re=s(365),Le=s(1861),Fe=s(1941),Be=s(1942),_e=s(1570),ke=s(1789),Ae=s.n(ke),De=s(1589),je=s.n(De),Ue=s(632),$e=s.n(Ue);const qe=({href:e,rapidSec:t,name:s,isUserSignedIn:a})=>i.a.createElement(C.a,{href:e,title:s,i13nModel:{sec:t,slk:s,itc:0,elm:"itm",elmt:"mu"},className:"C(black) C(inh):h Td(n):h menuitem:h_C($c-fuji-blue-1-b) D(ib) Va(m) Bxz(bb) H(40px)  "+(a?"Cur(g) Pt(12px)":"Pt(0px) W(100%)")},i.a.createElement("div",{className:"Mstart(10px) Mend(5px) D(ib) Ell "+(a?"W(160px)":"Pt(11px)")},s));qe.propTypes={isUserSignedIn:r.a.bool,href:r.a.string,name:r.a.string,rapidSec:r.a.string},qe.defaultProps={isUserSignedIn:!1},qe.displayName="DUItemHandle";const He=Object(_e.sortableHandle)(qe);He.propTypes={href:r.a.string,name:r.a.string,rapidSec:r.a.string},He.defaultProps={isUserSignedIn:!1},He.displayName="sortableDUItemHandle";const ze=Object(_e.sortableElement)(({name:e,listId:t,href:s,rapidSec:a,selected:n,isEditable:r,isUserSignedIn:o,isDeletable:c,onToggle:l,onSetting:d,onDelete:p,className:m})=>{return i.a.createElement("li",{className:m},o?i.a.createElement(Re.a,{value:t,checked:n,onChange:function({checked:e},s){"function"==typeof l&&l(s,{listId:t,checked:e})},onClick:e=>e.stopPropagation(),className:"Pos(r) Mstart(10px) H(40px) Lh(40px) Va(m) Cur(p) D(ib)"}):null,o?i.a.createElement(He,{name:e,href:s,isUserSignedIn:o,rapidSec:a}):i.a.createElement(qe,{isUserSignedIn:o,name:e,href:s,rapidSec:a}),r?i.a.createElement("div",{className:"Pos(a) End(0) D(n) menuitem:h_D(ib) Lh(40px) H(40px)"},i.a.createElement(P.I13nButton,{className:"Op(0.33) C(black) Op(1):h C($c-fuji-blue-1-b):h Py(8px) Pstart(0px) Va(m) Pend(10px) Bd(0)",title:"",onClick:function(s){"function"==typeof d&&d(s,{listId:t,name:e})},i13nModel:{sec:a,slk:"rename",itc:1,c10:e,elm:"itm",elmt:"set",rspns:"updct",outcm:"rename "+e}},i.a.createElement(M.Icon,{asset:je.a,width:18,height:18,color:"#0081f2",className:"Fill($c-fuji-blue-1-b)!:h Stk($c-fuji-blue-1-b)!h"})),c?i.a.createElement(P.I13nButton,{className:"Op(0.33) C(black) Op(1):h C($c-fuji-blue-1-b):h Py(8px) Pstart(0px) Pend(10px) Va(m) Bd(0)",title:"",onClick:function(s){"function"==typeof p&&p(s,{listId:t,name:e})},i13nModel:{sec:a,slk:"Delete",c10:e,elm:"itm",elmt:"rm",rspns:"rmct",outcm:"delete "+e}},i.a.createElement(M.Icon,{asset:Ae.a,width:18,height:18,color:"#0081f2",className:"Fill($c-fuji-blue-1-b)!:h Stk($c-fuji-blue-1-b)!h"})):null):null)});ze.propTypes={name:r.a.string,listId:r.a.string,href:r.a.string,rapidSec:r.a.string,selected:r.a.bool,isDeletable:r.a.bool,isUserSignedIn:r.a.bool,isEditable:r.a.bool,onToggle:r.a.func,onSetting:r.a.func,onDelete:r.a.func,className:r.a.string},ze.defaultProps={className:"",selected:!1,isEditable:!1,isUserSignedIn:!1,isDeletable:!1},ze.displayName="sortableDUCustomizeItem";const We=Object(_e.sortableContainer)(({order:e,visibleLists:t,onToggle:s,onSetting:a,isUserSignedIn:n,onDelete:r,rapidSec:o})=>i.a.createElement("ul",{className:"List(n)"},e.map((e,c)=>e?i.a.createElement(ze,{key:e.listId+c,index:c,rapidSec:o,name:e.title,selected:!1!==t[e.listId],href:e.href,onToggle:s,onDelete:r,onSetting:a,isUserSignedIn:n,isEditable:n&&e.isEditable,isDeletable:n&&e.isDeletable,listId:e.listId,className:"Z(52) Bfc BdT Bdc($c-fuji-grey-c) Bgc(white) Ov(h) H(40px) Va(m) Bxz(bb) C($c-fuji-blue-1-b) Bgc($extraLightBlue):h Ov(h) menuitem"}):null)));We.propTypes={rapidSec:r.a.string,visibleLists:r.a.object,onToggle:r.a.func,onSetting:r.a.func,isUserSignedIn:r.a.bool,onDelete:r.a.func,order:r.a.array},We.displayName="sortableDUCustomizeList";class Ve extends i.a.Component{constructor(e,t){super(e,t),this.onCreatePortfolio=this.onCreatePortfolio.bind(this),this.closeLightBox=this.closeLightBox.bind(this),this.onSortEnd=this.onSortEnd.bind(this),this.onToggle=this.onToggle.bind(this),this.onDelete=this.onDelete.bind(this),this.onSetting=this.onSetting.bind(this),this.state={order:e.order}}onCreatePortfolio(){this.context.executeAction(N.show,{wrapperClass:"Bgc($modalBackground) Ovy(a)",component:Le.a,componentProps:{onCancel:this.closeLightBox}})}onToggle(e,{listId:t,checked:s}){Object(h.e)(this,{sec:this.props.rapidSec,slk:"list-itm-tggl",elm:"inpt",elmt:"fltr",itc:1,outcm:s?"slctd":"unslctd"}),this.context.executeAction(Me,{pfId:t})}onDelete(e,{listId:t,name:s}){this.context.executeAction(N.show,{wrapperClass:"Bgc($modalBackground) Ovy(a)",component:Be.a,componentProps:{pfId:t,pfName:s}})}onSetting(e,{listId:t,name:s}){this.context.executeAction(N.show,{wrapperClass:"Bgc($modalBackground) Ovy(a)",component:Fe.a,componentProps:{pfId:t,pfName:s}})}onSortEnd({oldIndex:e,newIndex:t}){Object(h.e)(this,{sec:this.props.rapidSec,slk:"list-itm-sort",itc:1,outcm:"list-reorder",pp:{etrg:"drag"}});const s=Object(_e.arrayMove)(this.state.order,e,t);this.setState({order:s});const a=[];for(let e=0;e<s.length;e++)s[e]&&a.push(s[e].listId);this.context.executeAction(Oe,{order:a})}closeLightBox(){this.context.executeAction(N.hide)}componentWillReceiveProps(e){ae()(e.order,this.state.order)||this.setState({order:e.order})}renderCustomizeMenu(){const{className:e,showNewListForm:t,rapidSec:s,visibleLists:a,isUserSignedIn:n}=this.props;let r,o;return t&&(o=i.a.createElement(P.I13nButton,{className:"Fz(s) Fw(500) Bd(0) Bgc($c-fuji-blue-1-b) C(white) Bgc($actionBlueHover):h Pstart(10px) Pend(15px) Pt(9px) Pb(7px) Bdrs(3px) Miw(110px) Bd(0)",i13nModel:{sec:s,subsec:"new-list-form",slk:"create-new-list",elm:"btn",elmt:"mu",outcm:"show-pf-form",itc:1},onClick:this.onCreatePortfolio},i.a.createElement(M.Icon,{className:"Va(m)! Cur(a)! Mend(4px) Mb(2px) H(16px) W(16px) Fill(white)! Stk(white)!",asset:$e.a,height:16}),i.a.createElement(S.FormattedMessage,{id:"CREATE_PORTFOLIO"})),r=i.a.createElement("div",{className:"M(10px) Ta(c)"},i.a.createElement(Ee.a,{signedInElement:o}))),i.a.createElement("div",{className:e,"data-test":"quotelistmenu"},r,i.a.createElement(We,{pressDelay:100,order:this.state.order,visibleLists:a,onSortEnd:this.onSortEnd,onToggle:this.onToggle,onDelete:this.onDelete,onSetting:this.onSetting,isUserSignedIn:n,useDragHandle:!0,helperClass:"List(n) Bxsh($boxAreaShadow) Bd Bdc($c-fuji-blue-1-b)! Cur(gr)!",rapidSec:s}))}render(){const{isUserSignedIn:e,rapidSec:t}=this.props;return i.a.createElement(ve.a,{id:t,content:this.renderCustomizeMenu(e),className:"M(0) O(n):f IbBox Bdrs(3px) C($c-fuji-grey-j) Fz(s) Fl(end)",menuClassName:"Z(10) C($c-fuji-grey-j) Bxsh($boxShadow) Bd Bdc($finLightGray) Bdrs(2px) End(0px) T(25px) Bgc(white)  W(260px) Ta(start) Cur(a) O(n):f",showClose:!1,showArrow:!0,arrowStyle:{left:83}},i.a.createElement("div",{className:"Fz(s) Mstart(10px) Fw(500) Cur(p) C($c-fuji-blue-1-b) O(n)","data-test":"data-util-edit"},i.a.createElement(S.FormattedMessage,{id:"CUSTOMIZE"}),i.a.createElement(M.Icon,{className:"H(16px) W(16px) Va(m)! Fill($c-fuji-blue-1-b)! Stk($c-fuji-blue-1-b) Cur(a)! Mstart(5px) Mb(2px)",asset:je.a,height:16})))}}Ve.displayName="DataUtilityCustomize",Ve.propTypes={rapidSec:r.a.string,className:r.a.string,order:r.a.array,isUserSignedIn:r.a.bool,visibleLists:r.a.object,showNewListForm:r.a.bool},Ve.defaultProps={rapidSec:"",className:"",isUserSignedIn:!1,visibleLists:{},showNewListForm:!1},Ve.contextTypes={session:r.a.object.isRequired,intl:r.a.object.isRequired,executeAction:r.a.func.isRequired};var Qe=Ve,Ye=s(1582),Ge=s.n(Ye);const Ke=Object(_e.sortableElement)(({name:e})=>i.a.createElement("li",{className:"Z(52) Bfc BdT Bdtc($c-fuji-grey-c) Bgc(white) Ov(h) Bxz(bb) Ov(h) Mb(5px) Bxsh($boxAreaShadow) Bdrs(3px) Cur(g) C(black) H(40px)",title:e},i.a.createElement("div",{className:"Px(5px) Fw(b) Va(m) Pt(12px) Ell Bxz(bb)"},i.a.createElement("span",{className:"Mend(5px)"},i.a.createElement(M.Icon,{asset:Ge.a,height:15})),e)));Ke.propTypes={name:r.a.string},Ke.defaultProps={},Ke.displayName="sortableDUCustomizeItem";const Ze=Object(_e.sortableContainer)(({order:e,visibleLists:t,rapidSec:s})=>i.a.createElement("ul",{className:"List(n)"},e.map((e,a)=>e&&!1!==t[e.listId]?i.a.createElement(Ke,{key:e.listId+a,index:a,rapidSec:s,name:e.title,listId:e.listId}):null)));Ze.propTypes={rapidSec:r.a.string,visibleLists:r.a.object,order:r.a.array},Ze.displayName="sortableDUCustomizeList";class Je extends i.a.Component{constructor(e,t){super(e,t),this.onCreatePortfolio=this.onCreatePortfolio.bind(this),this.closeLightBox=this.closeLightBox.bind(this),this.onSortEnd=this.onSortEnd.bind(this),this.onToggle=this.onToggle.bind(this),this.state={order:e.order}}componentDidMount(){const e=document.body.querySelector("#YDC-Col1 + div");e&&(e.style.zIndex=1)}componentWillUnmount(){const e=document.body.querySelector("#YDC-Col1 + div");e&&(e.style.zIndex="auto")}onCreatePortfolio(){this.context.executeAction(N.show,{wrapperClass:"Bgc($modalBackground) Ovy(a)",component:Le.a,componentProps:{onCancel:this.closeLightBox}})}onToggle(e,{listId:t,checked:s,index:a}){Object(h.e)(this,{sec:this.props.rapidSec,slk:"list-itm-tggl",_p:a,elm:"inpt",elmt:"fltr",itc:1,outcm:s?"slctd":"unslctd"}),this.context.executeAction(Me,{pfId:t})}onSortEnd({oldIndex:e,newIndex:t}){Object(h.e)(this,{sec:this.props.rapidSec,slk:"list-itm-sort",_p:t,itc:1,outcm:"list-reordered",pp:{etrg:"drag"}});const s=Object(_e.arrayMove)(this.state.order,e,t);this.setState({order:s});const a=[];for(let e=0;e<s.length;e++)s[e]&&a.push(s[e].listId);this.context.executeAction(Oe,{order:a})}closeLightBox(){this.context.executeAction(N.hide)}componentWillReceiveProps(e){ae()(e.order,this.state.order)||this.setState({order:e.order})}renderCustomizeMenu(){const{showNewListForm:e,rapidSec:t,visibleLists:s,isUserSignedIn:a}=this.props,{order:n}=this.state;let r,o,c;if(e&&(o=i.a.createElement(P.I13nButton,{className:"Fz(s) Fw(500) Bd(0) Bgc($c-fuji-blue-1-b) C(white) Bgc($actionBlueHover):h Pstart(10px) Pend(15px) Pt(9px) Pb(7px) Bdrs(3px) Miw(110px) Bd(0)",i13nModel:{sec:t,subsec:"new-list-form",slk:"create-new-list",elm:"btn",elmt:"mu",outcm:"show-pf-form",itc:1},onClick:this.onCreatePortfolio},i.a.createElement(M.Icon,{className:"Va(m)! Cur(a)! Mend(4px) Mb(2px) H(16px) W(16px) Fill(white)! Stk(white)!",asset:$e.a,height:16}),i.a.createElement(S.FormattedMessage,{id:"CREATE_PORTFOLIO"})),r=i.a.createElement("div",{key:"signin",className:"M(10px) Ta(c)"},i.a.createElement(Ee.a,{signedInElement:o}))),a){const e=[],a=[];n.forEach((t,n)=>{if(!t)return null;const{listId:r,title:o}=t;("portfolio"===t.type?a:e).push(i.a.createElement("li",{key:t.listId+n,className:"Fl(start) D(b) Mb(12px) W(50%) Whs(nw) Bxz(bb) Pend(10px)"},i.a.createElement(Re.a,{value:r,index:n,checked:!1!==s[t.listId],onChange:({checked:e,index:t},s)=>{this.onToggle(s,{checked:e,listId:r,index:t})},onClick:e=>e.stopPropagation(),className:"Pos(r) Ta(c) Va(m) Pend(10px)"},i.a.createElement("div",{className:"Pstart(6px) D(ib) Ell Va(m) Bxz(bb) Pend(10px)",title:o},o))))}),c=[i.a.createElement("div",{key:"select-lists",className:"IbBox W(65%)"},i.a.createElement("h3",{className:"Bxz(bb) H(40px) Pt(15px) Px(15px) Pb(5px) M(0) Fz(m) Ell"},i.a.createElement(S.FormattedMessage,{id:"SELECT_LISTS"})),i.a.createElement("div",{className:"Ovy(a) Ovx(h) Px(15px) H(410px)"},i.a.createElement("h5",{className:"Fz(s) Mb(10px)"},i.a.createElement(S.FormattedMessage,{id:"WATCHLISTS"})),i.a.createElement("ul",{className:"List(n)"},e),i.a.createElement("h5",{className:"Fz(s) My(10px)"},i.a.createElement(S.FormattedMessage,{id:"MY_PORTFOLIO_NAV_TITLE"})),i.a.createElement("ul",{className:"List(n)"},a))),i.a.createElement("div",{key:"selected-lists",className:"IbBox Bgc($panelBackground) W(35%)"},i.a.createElement("h3",{className:"H(35px) Bxz(bb) Fz(m) Px(15px) Pt(10px) Pb(5px) Ell"},i.a.createElement(S.FormattedMessage,{id:"SELECTED_LISTS"})),i.a.createElement("div",{className:"Ovy(a) Ovx(h) Px(15px) H(360px)"},i.a.createElement(Ze,{helperClass:"List(n) Bxsh($boxAreaShadow) Bd Bdc($c-fuji-blue-1-b)! Cur(gr)!",order:this.state.order,visibleLists:s,onSortEnd:this.onSortEnd,rapidSec:t})),i.a.createElement("div",{className:"M(a) Ta(c)"},r))]}else c=[r,i.a.createElement("ul",{key:"list",className:"List(n)"},n.map((e,s)=>e?i.a.createElement("li",{key:e.listId+s,className:"Bfc BdT Bdc($c-fuji-grey-c) Bgc(white) Ov(h) H(40px) Va(m) Bxz(bb) C($c-fuji-blue-1-b) Bgc($extraLightBlue):h Ov(h) menuitem"},i.a.createElement(C.a,{href:e.href,title:e.title,i13nModel:{sec:t,slk:e.title,itc:0,elm:"itm",elmt:"mu"},className:"C(black) C(inh):h Td(n):h menuitem:h_C($c-fuji-blue-1-b) D(ib) Va(m) Bxz(bb) Pt(0px) W(100%) H(40px)"},i.a.createElement("div",{className:"Mstart(10px) Mend(5px) D(ib) Ell Pt(11px)"},e.title))):null))];return i.a.createElement("div",{className:"C(black) "+(a?"H(450px)":""),"data-test":"quotelistmenu"},c)}render(){const{isUserSignedIn:e,rapidSec:t}=this.props;return i.a.createElement(ve.a,{id:t,content:this.renderCustomizeMenu(e),className:"M(0) O(n):f IbBox Bdrs(3px) C($c-fuji-grey-j) Fz(s) Fl(end)",menuClassName:"Z(10) C($c-fuji-grey-j) Bxsh($boxShadow) Bd Bdc($finLightGray) Bdrs(2px) End(0px) T(25px) Bgc(white) Ta(start) Cur(a) O(n):f "+(e?"W(700px) H(450px)":"W(260px)"),showClose:!1,showArrow:!0,arrowStyle:{left:92}},i.a.createElement("div",{className:"Fz(s) Mstart(10px) Fw(500) Cur(p) C($c-fuji-blue-1-b) O(n)","data-test":"data-util-edit"},i.a.createElement(S.FormattedMessage,{id:"CUSTOMIZE"}),i.a.createElement(M.Icon,{className:"H(16px) W(16px) Va(m)! Fill($c-fuji-blue-1-b)! Stk($c-fuji-blue-1-b) Cur(a)! Mstart(5px) Mb(2px)",asset:je.a,height:16})))}}Je.displayName="DataUtilityCustomize",Je.propTypes={rapidSec:r.a.string,order:r.a.array,isUserSignedIn:r.a.bool,visibleLists:r.a.object,showNewListForm:r.a.bool},Je.defaultProps={rapidSec:"",isUserSignedIn:!1,visibleLists:{},showNewListForm:!1},Je.contextTypes={session:r.a.object.isRequired,intl:r.a.object.isRequired,executeAction:r.a.func.isRequired};var Xe=Je,et=s(1580),tt=s.n(et),st=s(12),at=s.n(st),it=s(200),nt=s(149),rt=s.n(nt),ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e};const ct="sidekickTv-0-Channels";class lt extends i.a.Component{constructor(){super(),this.rapidSec=Object(h.t)("DataUtility")}componentDidMount(){this.context.executeAction(y,{enableLoading:!0,fields:Q.e})}getCustomizedListOrder({isUserSignedIn:e,visibleLists:t}){const s=this.getListOrder(e),a=this.context.getStore(d.a).getConfig("app",["base","marketdata","lists"]),i=this.context.getStore(he.a),n=this.context.intl.formatMessage;let r=0,o=0;const c=s.map(s=>{!1!==t[s]&&r++,o++;const c=Q.c[s]||"portfolio";switch(c){case"recent":return{type:c,title:n({id:"RQ_TITLE"}),listId:s,isEditable:e,href:Object(u.e)("watchlist",{pfId:s})};case"list":return{type:c,title:n({id:a.getIn([s,"name"],s.toUpperCase()+"_TITLE")}),listId:s,href:a.getIn([s,"uri"],Object(u.e)("watchlist",{pfId:s}))};case"signedOut":return r--,o--,null;default:{const t=i.getLists(s);if(!t)return r--,o--,null;const a=!t.linkedAccount&&!t.following&&e;return{type:c,isEditable:a,isDeletable:a&&!t.defaultPf,title:t.pfName,listId:s,href:Object(u.e)("portfolio",{pfId:s})}}}});return Object(h.f)("datautility-count",this.context,{sec:this.rapidSec,subsec:o,slk:r,outcm:"datautility-list-count"}),c}insertAdSections(e){let t=[{pos:1,type:"ad-srec"},{pos:2,type:"ad-lrec"},{pos:6,type:"ad-lrec2"}];this.props.sportsPromoConfig&&(t=[{pos:1,type:"ad-srec"},{pos:2,type:"ad-lrec"},{pos:3,type:"promoImage"},{pos:7,type:"ad-lrec2"}]),t.forEach(t=>{e.splice(t.pos,0,t.type)})}injectSidekickTv(e){let t=-1;for(let s=0;s<e.length;s++)if("ad-lrec"===e[s]){t=s;break}const s=-1!==t?t+1:1;e.splice(s,0,"sidekickTv")}getListOrder(e){const{listIds:t,userListIds:s,type:a}=this.props;let i;return e?i=s:(i=t,a!==Q.b.NARROW&&i.splice(1,0,"signedOut")),i}renderSections(e){const{visibleLists:t,componentConfig:s,type:a}=this.props;let n=this.getListOrder(e);return this.props.withAds&&this.insertAdSections(n),this.props.sidekickTvModEnabled&&this.injectSidekickTv(n),rt()(n).map((n,r)=>{if(e&&!1===t[n])return null;switch(Q.c[n]||"portfolio"){case"recent":return i.a.createElement(me,{key:n,config:s,listId:n,type:a,showHeader:!0,rapidSec:this.rapidSec});case"list":return i.a.createElement(ne,{key:n,listId:n,type:a,showHeader:!0,rapidSec:this.rapidSec});case"signedOut":return i.a.createElement(ye,{key:n+r,listId:n,type:a,showHeader:!0,rapidSec:this.rapidSec});case"promoImage":return i.a.createElement(Ce.a,ot({key:"sportspromo-datautil"},this.props.sportsPromoConfig));case"ad-srec":return i.a.createElement(Ie.a,{key:"SCREC",pos:"SCREC",style:{marginBottom:20,marginTop:20}});case"ad-lrec":return[i.a.createElement(Ie.a,{key:"LREC",pos:"LREC",style:{marginBottom:20,marginTop:20}}),i.a.createElement(Ie.a,{key:"MON",pos:"MON",style:{marginBottom:20,marginTop:20}})];case"ad-lrec2":return i.a.createElement(Ie.a,{key:"LREC2",pos:"LREC2",style:{marginBottom:20,marginTop:20}});case"sidekickTv":{const e=this.context.getStore(at.a).getComposite(ct),t=e&&e.components;return t&&t.length>0?i.a.createElement(tt.a,{key:"sidekickTv",components:t}):null}default:return i.a.createElement(fe,{key:n,config:s,listId:n,type:a,showHeader:!0,rapidSec:this.rapidSec})}})}render(){const{visibleLists:e,componentConfig:t,type:s}=this.props,a=Object(h.H)(this.context);let n;if(s!==Q.b.NARROW){const s=t&&t.useNewCustomize;n=i.a.createElement("header",{className:"Pos(r)"},i.a.createElement("div",{className:"Fz(14px) Fw(b) Lh(1) IbBox Ell Maw(210px)",id:"data-util-header"},i.a.createElement(S.FormattedMessage,{id:"DATA_UTILITY_PF_TITLE"})),s?i.a.createElement(Xe,{isUserSignedIn:a,order:this.getCustomizedListOrder({isUserSignedIn:a,visibleLists:e}),visibleLists:e,rapidSec:this.rapidSec,showNewListForm:!0}):i.a.createElement(Qe,{isUserSignedIn:a,order:this.getCustomizedListOrder({isUserSignedIn:a,visibleLists:e}),visibleLists:e,rapidSec:this.rapidSec,showNewListForm:!0}))}return i.a.createElement("section",{className:this.props.className},n,i.a.createElement("div",{id:"data-util-col",className:"data-util-content Bxz(bb)"},this.renderSections(a)))}}lt.displayName="DataUtility",lt.initializeAction=o.a,lt.componentConfig={name:"componentDataUtility"},lt.propTypes={className:r.a.string,type:r.a.string,listConfig:r.a.object,visibleLists:r.a.object,componentConfig:r.a.object,listIds:r.a.array,withAds:r.a.bool,sidekickTvModEnabled:r.a.bool,sportsPromoConfig:r.a.object,userListIds:r.a.array},lt.defaultProps={className:"",type:Q.b.DEFAULT,listIds:[],withAds:!0,sidekickTvModEnabled:!1,sportsPromoConfig:null,visibleLists:{}},lt.contextTypes={executeAction:r.a.func.isRequired,intl:r.a.object.isRequired,getStore:r.a.func.isRequired,session:r.a.object.isRequired};t.a=X()(lt,[we.a],(e,t)=>{const s=e.getStore(we.a),a=e.getStore(d.a),i=s.getVisible(),n=s.getPfOrder(),r=e.getStore(he.a).getPfOrder(),o=[it.c].concat(a.getConfig("app",["base","marketdata","orderedLists"]).toJS()),c=a.getConfig("app",["base","marketdata","defaultLists"]).toJS();let l;return{userListIds:l=n&&n.length>0?function(e,t,s){const a=[],i={},n={};for(let e=0;e<t.length;e++)n[t[e]]=1;for(let e=0;e<s.length;e++)i[s[e]]=1;let r=0,o=0;for(let t=0;t<e.length;t++){const s=e[t];Q.c[s]?1===i[s]&&(a[o]=s,i[s]=2,o++):1===n[s]&&(a[o]=s,n[s]=2,r=o,o++)}for(let e=0;e<t.length;e++)1===n[t[e]]&&(a.splice(r,0,t[e]),n[t[e]]=2,r++);for(let e=0;e<s.length;e++)1===i[s[e]]&&a.push(s[e]);return a}(n,r,o):r.concat(o),visibleLists:i,listIds:c}})}});