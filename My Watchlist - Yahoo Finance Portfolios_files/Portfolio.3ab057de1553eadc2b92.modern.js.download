webpackJsonp([7],{1667:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(626);function l(e,t,a){e.getStore(o.a).getLists()?a&&a():(e.dispatch("SET_FIN_PF_LIST_LOADING",{loading:!0}),a&&a())}l.displayName="initPortfolios.server";var c=l,m=a(1568),d=a(1600),p=a(26),u=a.n(p),h=a(88),f=a(30);function g(e,t,a){t=t||{};const s=Object(f.B)(e),r=e.request.user.guid,n=Object.assign({},t,{userId:r,userIdType:"guid"});if(t.pfIds)if(e.getStore(d.a).getRecommendationsByPortfolio(t.pfIds).toJS().symbols)a&&a();else if(s)if(r)Object(h.b)(e,{resource:"tachyon.recommendationsByPortfolio",params:n}).then(t=>{if(!t)throw u.a.http.badGateway("Empty response from server");e.dispatch("RECOMMENDATIONS_BY_PORTFOLIO_SUCCESS",{recommendations:t.recommendations}),a&&a(null,t)}).catch(t=>{e.dispatch("SET_RECOMMENDATIONS_FAIL",{event:"EVENT_PF_RECOMMENDATIONS_FAIL",error:t}),a&&a(t)});else{const e=u.a.http.unauthorized("loadRecommendationsByPortfolio: Unable to fetch user guid");a&&a(e)}else a&&a();else{const e=u.a.http.unauthorized("loadRecommendationsByPortfolio: No pfIds provided");a&&a(e)}}var b=a(2081),x=a(246);const E={ALL:"all",SECTOR:"sector"},y={[E.ALL]:{resource:"tachyon.portfolioPositionAllocation",key:E.ALL},[E.SECTOR]:{resource:"tachyon.portfolioSectorAllocation",key:E.SECTOR}};function N(e,t,a){const{pfId:s,type:r=E.ALL,range:n="ytd",start:i,end:l,forceLoad:c=!1}=t;if(!s)return void(a&&a(u.a.http.badRequest("loadAllocation: Missing `pfId`")));const m=e.request.user.guid;if(!m)return void(a&&a(u.a.http.badRequest("loadAllocation: Unable to fetch user guid")));const d=y[r]||y[E.ALL];let p=i,f=l;if(!p||!f){const e=Object(x.T)(n);p=e.start,f=e.end}const g=e.getStore(o.a).getLists(s);if(g&&g.allocation&&!c){const o=g.allocation[r];if(o&&((!i||!l)&&o.range===n||o.start===p&&o.end===f)){const n={type:r};return e.dispatch("FIN_PF_LIST_PARTIAL_UPDATE",{pfId:s,key:"allocation",value:n,silent:t.silent}),void(a&&a())}}Object(h.b)(e,{resource:d.resource,params:{userId:m,pfId:s,start:Object(x.U)(new Date(p)),end:Object(x.U)(new Date(f))}}).then(i=>{if(!i)throw u.a.http.internalServerError("loadAllocation: No data received");const o={type:r,[d.key]:Object.assign({},i,{range:n,start:p,end:f})};e.dispatch("FIN_PF_LIST_PARTIAL_UPDATE",{pfId:s,key:"allocation",value:o,silent:t.silent}),a&&a(null,i)}).catch(t=>{e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.m}),a&&a(t)})}N.displayName="loadAllocation";var C=N;function P(e,t,a){const{pfId:s,start:r,end:n}=t;if(!s)return void(a&&a(u.a.http.badRequest("loadRiskProfile: Missing `pfId`")));const i=e.request.user.guid;i?Object(h.b)(e,{resource:"tachyon.portfolioRiskMetrics",params:{userId:i,pfId:s,start:r,end:n}}).then(r=>{r?e.dispatch("FIN_PF_LIST_PARTIAL_UPDATE",{pfId:s,key:"risk",value:r,silent:t.silent}):e.dispatch("FIN_PF_LIST_PARTIAL_UPDATE",{pfId:s,key:"risk",value:{isEmpty:!0},silent:t.silent}),a&&a(null,r)}).catch(t=>{e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.s}),a&&a(t)}):a&&a(u.a.http.badRequest("loadRiskProfile: Unable to fetch user guid"))}P.displayName="loadRiskProfile";var w=P;function S(e,t,a){const{pfId:s}=t;if(!s)return void(a&&a(u.a.http.badRequest("loadCharacteristics: Missing `pfId`")));const r=e.request.user.guid;r?Object(h.b)(e,{resource:"tachyon.portfolioCharacteristics",params:{userId:r,pfId:s}}).then(r=>{if(!r)throw u.a.http.internalServerError("loadCharacteristics: No data received");e.dispatch("FIN_PF_LIST_PARTIAL_UPDATE",{pfId:s,key:"characteristics",value:r,silent:t.silent}),a&&a(null,r)}).catch(t=>{e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.o}),a&&a(t)}):a&&a(u.a.http.badRequest("loadCharacteristics: Unable to fetch user guid"))}S.displayName="loadCharacteristics";var I=S,M=a(2002),k=a(1920);function v(e,t,a){const{modules:s,symbols:r,fields:n}=t||{};if(!r||0===r.length)return void(a&&a(u.a.http.badRequest("loadPremiumPortal: Missing `symbols`")));const i={symbols:r.join(",")};n&&n.length>0&&(i.quotefields=n.join(",")),s&&s.length>0&&(i.modules=s.join(",")),Object(h.b)(e,{resource:"tachyon.premiumPortal",params:i}).then(s=>{if(!s)throw u.a.http.badGateway("Empty data received from server");e.dispatch("PORTAL_LOAD_DATA",{clear:t.clear,silent:t.silent,data:s}),a&&a(null,s)}).catch(t=>{e.dispatch("SET_PORTAL_STORE_ERROR",{event:"PORTAL_LOAD_DATA_FAIL",error:t}),a&&a(t)})}v.displayName="loadPremiumPortal";var T=v,F=a(671),R=a(1544),D=a(117),B=a.n(D),_=a(43),O=a(89),A=a.n(O),L=a(39),j=a.n(L);const $="^GSPC";function V(e,t,s){Object(h.a)(e,{resource:"tachyon.currencies",params:{}}).then(t=>{if(!(t&&t.length>0))throw new Error("No currency");t.sort((e,t)=>e.longName.localeCompare(t.longName)),e.dispatch("FIN_CURRENCIES_LOAD",{currencies:t}),s&&s(null,t)}).catch(()=>{a.e(130).then(a.bind(null,2502)).then(t=>{e.dispatch("FIN_CURRENCIES_LOAD",{currencies:t}),s&&s(null,t)})})}function H(e,t,a){const{symbols:s,viewId:r="v1"}=t;if("string"!=typeof s)return void(a&&a(new Error("loadMultiQuoteView: missing or misconfigured `symbols`")));let n=x.K;const i=e.getStore(F.a).getViews(r);i&&(n=i.columns||x.K),n=n.reduce((e,t)=>x.H[t]?e.concat(x.H[t]):(e.push(t),e),["longName","priceHint"]),Object(h.a)(e,{resource:"tachyon.quote",params:{symbols:s,fields:n.join(",")}}).then(t=>{Array.isArray(t)||(t=[t]),e.dispatch("SET_FIN_PF_LIST_LOADING",{loading:!1}),e.dispatch("FIN_PF_LIST_LOAD_MULTI_QUOTE",{quotes:t}),a&&a(null,t)}).catch(e=>{a&&a(e)})}function z(e,t,a){const s=e.getStore(R.a).getSymbols();T(e,{symbols:s,modules:["metrics"]},a)}function q(e,t,a){const{pfId:s,viewId:r,isHighValueUser:n=!1,enablePremium:i=!1}=t,l={};if(s){if(t.loadRecommendations&&(l.loadRecommendations=_.c.bind(this,g,e,{pfIds:s})),l.portfolios=_.c.bind(this,m.a,e,{pfId:s,viewId:r,setLoading:!!t.setLoading}),i&&n)switch(l.loadPfPremiumSummary=_.c.bind(this,b.a,e,{pfId:s}),l.loadPerformanceChart=_.c.bind(this,M.a,e,{pfId:s,range:"1y"}),l.loadQuotePerformanceChart=_.c.bind(this,M.a,e,{pfId:s,range:"1y",symbol:$}),r){case x.E:l.loadAllocation=_.c.bind(this,C,e,{pfId:s,forceLoad:!0});break;case x.O:l.loadRiskProfile=_.c.bind(this,w,e,{pfId:s});break;case x.N:case x.b:l.loadCharacteristics=_.c.bind(this,I,e,{pfId:s})}}else t.symbols?l.loadMultiQuoteView=_.c.bind(this,H,e,{viewId:r,symbols:t.symbols}):(l.portfolios=_.c.bind(this,m.a,e,{setLoading:!!t.setLoading}),n&&i&&(l.loadTopNTickers=_.c.bind(this,k.a,e,{}),l.loadPremiumPortal=["loadTopNTickers",_.c.bind(this,z,e,{})]));t.loadPortfolioNames&&(l.loadPortfolioNames=_.c.bind(this,m.a,e,{realTime:!1,setLoading:!1})),!1!==t.loadCurrencies&&(l.loadCurrencies=_.c.bind(this,V,e,{})),j.a.auto(l,t=>{if(t&&e.logger.error(t),document&&s){const t=e.getStore(o.a).getLists(s),a=e.getStore(B.a).getStrings();document.title=t&&t.pfName?A.a.decode(t.pfName)+" - "+a.META_TITLE_PORTFOLIO:a.META_TITLE_PORTFOLIO,document.description=a.META_DESC_PORTFOLIO}a&&a()})}q.displayName="initPortfolios.client";var W=q,U=a(91),G=a.n(U),Y=a(93),Q=a.n(Y),Z=a(116),K=a.n(Z),X=a(19),J=a(20),ee=a(189);function te(e,t={},a){let{action:s="reorder",silent:r=!1,pfOrder:n}=t;const i=e.request.user.guid;if(i)if(n)Object(h.b)(e,{resource:"tachyon.portfolioReorder",params:{action:s,userId:i},method:"update",body:{portfolioOrder:n.join(",")}}).then(t=>{if(!t)throw u.a.http.internalServerError("No data received for reoder pf");e.dispatch("FIN_PF_LIST_REORDER",{pfOrder:t.portfolioOrder,silent:r}),a&&a(null,t)}).catch(t=>{r||e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.v,ignoreLoading:!0}),a&&a(t)});else{const e=u.a.http.badRequest("reorderPortfolios: missing `pfOrder`");a(e)}else{const e=u.a.http.unauthorized("reorderPortfolios: Unable to fetch user guid");a(e)}}var ae=a(1805);function se(e,t){const{pfId:a,positions:s}=t;if(!a)throw u.a.http.badRequest("reorderPositions: missing `pfId`");if(!s)throw u.a.http.badRequest("reorderPositions: missing `posId`");const r=e.request.user.guid;if(!r)throw u.a.http.badRequest("reorderPositions: Unable to fetch user guid");return Object(h.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:r,pfId:a},method:"update",body:{parameters:{userId:r,userIdType:"guid",pfId:a,fullResponse:!0},operations:s.map(e=>({operation:"position_update",posId:e.posId,sortOrder:e.sortOrder}))}}).then(()=>{e.dispatch("FIN_PF_LIST_REORDER_POSITIONS",{pfId:a,positions:s})}).catch(e=>{throw e})}var re=a(1553),ne=a(1564),ie=a(745),oe=a(78),le=a.n(oe),ce=a(190),me=a(1861);function de(e,t,a){t=t||{};const{body:s}=t;if(!s||!s.portfolio){const s=u.a.http.badRequest("Missing payload for import:",{debug:[t]});return e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.l,ignoreLoading:!0}),void a(s)}Object(h.b)(e,{resource:"tachyon.portfolioImport",params:{},method:"create",body:s}).then(t=>{if(!t||!t.pfId)throw u.a.http.internalServerError("Unable to import portfolio");e.dispatch("FIN_PF_LIST_IMPORT",t),a(null,t)}).catch(t=>{e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.l,ignoreLoading:!0}),a(t)})}de.displayName="importPortfolio";var pe=de;class ue extends r.a.PureComponent{constructor(){super(),this.onCancel=this.onCancel.bind(this),this.onSubmit=this.onSubmit.bind(this),this.state={importFail:!1}}componentWillReceiveProps(e){const{meta:t,hasError:a,onImport:s}=e;if(this._requestPending){const{lastImportedList:e}=t;a||"function"==typeof s&&s({pfId:e}),this._requestPending=!1}}onSubmit(e){e.preventDefault();const t=e.target.ext_pf&&e.target.ext_pf.files[0];if(FileReader&&t){const e=new FileReader;e.onload=(()=>{this.setState({importFail:!1},()=>{this._requestPending=!0,this.context.executeAction(pe,{body:{portfolio:e.result}})})}),e.onerror=(e=>{this.setState({importFail:!0})}),e.readAsText(t)}}onCancel(e){"function"==typeof this.props.onCancel&&this.props.onCancel(e)}render(){const{className:e,hasError:t,rapidSec:a}=this.props,s=this.context.intl.formatMessage;let n;return(t||this.state.importFail)&&(n=r.a.createElement("div",{className:"C($c-fuji-red-2-b) Fw(500) Fz(s) Mb(10px)"},r.a.createElement(X.FormattedMessage,{id:"IMPORT_PF_ERROR"}))),r.a.createElement("section",{className:e,"data-test":"fin-create-pfModal"},r.a.createElement("h2",{className:"Fz(17px) C(black) Mb(10px)"},r.a.createElement(X.FormattedMessage,{id:"IMPORT_PORTFOLIO"})),r.a.createElement("p",{className:"M(0) Mb(20px)"},r.a.createElement(X.FormattedMessage,{id:"IMPORT_PORTFOLIO_MSG"})),n,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",null,r.a.createElement("input",{required:!0,type:"file",name:"ext_pf",accept:"text/csv",className:"Fz(s) H(34px) Bd(0) W(100%) Pstart(6px) Fw(500)",ref:this.setInputRef})),r.a.createElement("div",{className:"Bfc Mt(20px)"},r.a.createElement(J.I13nButton,{type:"submit",className:"Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(3px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px) O(n):f",title:s({id:"SUBMIT"}),i13nModel:{sec:a,slk:"submit",itc:0,elm:"btn",elmt:"done",rspns:"nav"}},r.a.createElement(X.FormattedMessage,{id:"SUBMIT"})),r.a.createElement(J.I13nButton,{type:"reset",className:"C($c-fuji-blue-1-b) Bd Bdc($c-fuji-blue-1-b) Bdc($actionBlueHover):h C($c-fuji-blue-1-b) C($actionBlueHover):h C($actionBlueHover):f Fw(500) Px(20px) Py(8px) Bdrs(3px) Fz(s) D(ib) Mstart(20px) Whs(nw) Miw(110px) O(n):f",title:s({id:"CANCEL"}),i13nModel:{sec:a,slk:"cancel",itc:1,elm:"btn",elmt:"cl",rspns:"cl"},onClick:this.onCancel},r.a.createElement(X.FormattedMessage,{id:"CANCEL"})))))}}ue.displayName="ImportPortfolio",ue.propTypes={className:i.a.string,rapidSec:i.a.string.isRequired,meta:i.a.object,hasError:i.a.bool,onImport:i.a.func,onCancel:i.a.func},ue.contextTypes={executeAction:i.a.func.isRequired,getStore:i.a.func.isRequired,intl:i.a.object.isRequired},ue.defaultProps={className:"Bxsh($boxAreaShadow) Bgc(white) P(25px) Pos(f) Start(45%) T(40%) P(25px) W(400px) Mstart(-200px) W(74%)--mobp Mstart(-45%)--mobp T(26%)--mobl",rapidSec:"fin-imp-pf",showCurrency:!0};var he=K()(ue,[o.a],(e,t)=>{const a=e.getStore(o.a);return{meta:a.getMeta(),hasError:a.hasError("PORTFOLIO_IMPORT_FAIL")}});function fe(e,t){const{pfId:a,baseCurrency:s,callback:r}=t;if(!a)throw u.a.http.badRequest("editCurrency: missing `pfId`");if(!s)throw u.a.http.badRequest("editCurrency: missing `baseCurrency`");const n=e.request.user.guid;if(!n)throw u.a.http.badRequest("editCurrency: Unable to fetch user guid");return Object(h.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:n,pfId:a},method:"update",body:{parameters:{userId:n,userIdType:"guid",pfId:a,fullResponse:!0},operations:[{operation:"portfolio_update",baseCurrency:s,cashCurrency:s}]}}).then(t=>{if(!t)throw u.a.http.internalServerError("No list received for edit currency");delete t.positions,e.dispatch("FIN_PF_LIST_UPDATE",{pfId:a,list:t}),e.executeAction(G.a.hide),"function"==typeof r&&r(s)}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.j}),"function"==typeof r&&r(s),t})}var ge=a(1782),be=a(1590);class xe extends r.a.Component{constructor(){super(),this.onSubmit=this.onSubmit.bind(this),this.setCurrencySelectRef=this.setCurrencySelectRef.bind(this)}setCurrencySelectRef(e){this.currencySelectRef=e}onSubmit(e){const t=this.currencySelectRef.getValue();this.context.executeAction(fe,{pfId:this.props.pfId,baseCurrency:t,callback:this.props.onSubmit})}render(){const{currencies:e,hasError:t,baseCurrency:a}=this.props,s=e&&e.map(e=>({data:e.symbol,content:e.longName+" ("+e.symbol+")"}));return r.a.createElement(ge.a,{rapidSec:"fin-edit-currency",onSubmit:this.onSubmit,titleMessageId:"EDIT_CURRENCY",errorMessageId:t&&"EDIT_CURRENCY_ERROR",submitMessageId:"SAVE"},s?r.a.createElement(be.a,{name:"currency-select",className:"H(36px) D(b) W(100%)",iconClassName:"H(100%) W(8px) Va(m)! Mstart(8px)",options:s,selected:a,ref:this.setCurrencySelectRef}):null)}}xe.displayName="EditCurrencyPopup",xe.propTypes={pfId:i.a.string,baseCurrency:i.a.string,currencies:i.a.array,hasError:i.a.bool,onSubmit:i.a.func},xe.defaultProps={baseCurrency:"USD"},xe.contextTypes={executeAction:i.a.func.isRequired,getStore:i.a.func.isRequired};var Ee=K()(xe,[o.a],(e,t)=>{const a=e.getStore(o.a);return{currencies:a.getCurrencies(),hasError:a.hasError(x.j)}}),ye=a(1941),Ne=a(1942),Ce=a(11),Pe=a(1807),we=a(1570),Se=a(1582),Ie=a.n(Se),Me=a(1789),ke=a.n(Me);const ve={REORDER_LISTS:"reorder-lists",ADD_SYMBOL:"add-symbol",EDIT_SYMBOL:"edit-symbol"},Te={[ve.REORDER_LISTS]:{title:"REORDER_LISTS",doneBtn:!0},[ve.ADD_SYMBOL]:{title:"ADD_SYMBOL"},[ve.EDIT_SYMBOL]:{title:"EDIT_SYMBOLS",doneBtn:!0}},Fe="pf-ep-mdl",Re=Object(we.SortableHandle)(()=>r.a.createElement(Ce.Icon,{asset:Ie.a,color:"#787d82",height:25}));Re.displayName="PortfolioMobileSortableListItemDragHandle";const De=Object(we.SortableElement)(({portfolio:e,position:t,onDelete:a})=>{let s;if(e){const t=e.positions&&e.positions.length||0;s=r.a.createElement("div",{className:"D(ib)"},r.a.createElement("div",{className:"Fw(500) Mb(5px) Ell Fz(m)"},A.a.decode(e.pfName||"")),r.a.createElement("div",{className:"C($c-fuji-grey-j) Fz(12px) Tt(l)"},t," ",r.a.createElement(X.FormattedMessage,{id:t>1?"TD_SYMBOLS":"TD_SYMBOL"})))}else t&&(s=[r.a.createElement("div",{key:"symbol",className:"IbBox"},r.a.createElement("div",{className:"Fz(m) Fw(500) Mb(5px)"},t.symbol),r.a.createElement("div",{className:"Fz(s) C($c-fuji-grey-j) Ell"},A.a.decode(t.longName||t.shortName||""))),r.a.createElement("div",{key:"delete",className:"IbBox Fl(end)"},r.a.createElement(J.I13nButton,{i13nModel:{sec:Fe,slk:"delete",elm:"icn",elmt:"ct",itc:1,outcm:"delete-pos"},className:"M(0) Fz(s) Cur(p) Fw(500) Px(5px) Py(10px) Bd(0)",onClick:function(e){"function"==typeof a&&a(e,t.posId)}},r.a.createElement(Ce.Icon,{className:"Fill($gray)! Stk($gray)! Va(m)!",asset:ke.a,height:18})))]);return r.a.createElement("div",{className:"Bgc(white) Mb(1px) Py(10px) Px(15px) Bxsh($boxAreaShadow) Whs(nw) Ov(h) Z(52)"},r.a.createElement("div",{className:"D(ib) Va(t) H(25px) W(25px) Mend(10px) Mt(5px)"},r.a.createElement(Re,null)),s)});De.displayName="PortfolioMobileSortableListItem",De.propTypes={portfolio:i.a.object,position:i.a.object,onDelete:i.a.func};const Be=Object(we.SortableContainer)(({sortOrder:e,portfolios:t,portfolio:a,deletedPos:s,onDelete:n})=>{let i;return e&&(t?i=e.map((e,a)=>{const s=t[e];return s?r.a.createElement(De,{key:e,index:a,portfolio:s}):null}):a&&(i=e.map((e,t)=>e&&!s[e.posId]?r.a.createElement(De,{key:e.posId,index:t,position:e,onDelete:n}):null))),r.a.createElement("div",null,i)});Be.displayName="PortfolioMobileSortableList",Be.propTypes={sortOrder:i.a.array.isRequired,portfolios:i.a.object,portfolio:i.a.object,onDelete:i.a.func};class _e extends r.a.Component{constructor(e){super(e),this.onDragEnd=this.onDragEnd.bind(this),this.onDone=this.onDone.bind(this),this.onAddSymbol=this.onAddSymbol.bind(this),this.onDeleteSymbol=this.onDeleteSymbol.bind(this);let t=[];if(e.pfOrder)t=e.pfOrder.slice(0);else if(e.pfId&&e.portfolios){const a=e.portfolios[e.pfId]&&e.portfolios[e.pfId].positions;a&&(t=a)}this.state={sortOrder:t,deletedPos:{}}}onDragEnd({oldIndex:e,newIndex:t}){this.setState({sortOrder:Object(we.arrayMove)(this.state.sortOrder,e,t)})}onDeleteSymbol(e,t){e.stopPropagation(),t&&this.setState({deletedPos:Object.assign({},this.state.deletedPos,{[t]:!0})})}onDone(e){this.closePopup();const{type:t}=this.props;switch(t){case ve.REORDER_LISTS:"function"==typeof this.props.onReorderLists&&this.props.onReorderLists(e,this.state.sortOrder);break;case ve.EDIT_SYMBOL:"function"==typeof this.props.onReorderSymbols&&this.props.onReorderSymbols(e,this.state.sortOrder),"function"==typeof this.props.onDeleteSymbol&&this.props.onDeleteSymbol(e,Object.keys(this.state.deletedPos))}}onAddSymbol(e,t){this.closePopup(),"function"==typeof this.props.onAddSymbol&&this.props.onAddSymbol(e,t)}closePopup(){"function"==typeof this.props.onCancel&&this.props.onCancel()}render(){const{type:e,pfId:t,portfolios:a}=this.props,s=Te[e]||{};let n;switch(e){case ve.REORDER_LISTS:n=r.a.createElement(Be,{pressDelay:200,sortOrder:this.state.sortOrder,portfolios:this.props.portfolios,onSortEnd:this.onDragEnd});break;case ve.ADD_SYMBOL:n=r.a.createElement(Pe.a,{type:"nomodal",rapidSec:"pf-add-symbol",className:"Px(7px) Mt(15px)",showTip:!0,pfId:t,autoFocus:!0,onAdd:this.onAddSymbol});break;case ve.EDIT_SYMBOL:a[t]&&(n=r.a.createElement(Be,{pressDelay:200,sortOrder:this.state.sortOrder,deletedPos:this.state.deletedPos,portfolio:a[t],onSortEnd:this.onDragEnd,onDelete:this.onDeleteSymbol}))}return r.a.createElement("div",{className:"W(100%) H(100%) Bgc(white)"},r.a.createElement("div",{className:"Lh(55px) C(white) Fz(17px) Px(15px) Bg(customGradientUH) Fw(400) Bxsh($boxAreaShadow)"},r.a.createElement(J.I13nButton,{i13nModel:{elm:"btn",elmt:"cl",sec:Fe,itc:0,slk:"cancel"},className:"D(ib) Va(m) W(1/3) Ta(start) C(white) Cur(p)",onClick:this.props.onCancel},r.a.createElement(X.FormattedMessage,{id:"CANCEL"})),r.a.createElement("h2",{className:"D(ib) Va(m) "+(s.doneBtn?"W(1/3) Ta(c)":" Ta(start) W(2/3)")},r.a.createElement(X.FormattedMessage,{id:s.title})),s.doneBtn&&r.a.createElement(J.I13nButton,{i13nModel:{elm:"btn",elmt:"dn",sec:Fe,itc:0,slk:"done"},className:"D(ib) Va(m) W(1/3) Ta(end) C(white) Cur(p)",onClick:this.onDone},r.a.createElement(X.FormattedMessage,{id:"DONE"}))),n)}}_e.displayName="PortfolioMobilePopup",_e.propTypes={pfOrder:i.a.array,portfolios:i.a.object,onCancel:i.a.func.isRequired,onAddSymbol:i.a.func,onDeleteSymbol:i.a.func,onReorderLists:i.a.func,onReorderSymbols:i.a.func,pfId:i.a.string,type:i.a.oneOf(Object.keys(ve).map(e=>ve[e]))},_e.defaultProps={type:ve.REORDER_LISTS};var Oe=_e,Ae=a(632),Le=a.n(Ae),je=a(2277),$e=a.n(je),Ve=a(2278),He=a.n(Ve),ze=a(1576),qe=a.n(ze),We=a(1589),Ue=a.n(We),Ge=a(689),Ye=a.n(Ge);const Qe="Bgc($modalBackground) Ovy(a)";class Ze extends r.a.PureComponent{constructor(){super(),this.setDropdownRef=this.setDropdownRef.bind(this),this.closeDropdown=this.closeDropdown.bind(this),this.closeLightBox=this.closeLightBox.bind(this),this.onCreatePortfolio=this.onCreatePortfolio.bind(this),this.onPrint=this.onPrint.bind(this),this.onImportPortfolio=this.onImportPortfolio.bind(this),this.onSuccessfulPortfolioImport=this.onSuccessfulPortfolioImport.bind(this),this.onEditCurrency=this.onEditCurrency.bind(this),this.onToggleStreaming=this.onToggleStreaming.bind(this),this.onToggleDense=this.onToggleDense.bind(this),this.onRenamePortfolio=this.onRenamePortfolio.bind(this),this.onDeletePortfolio=this.onDeletePortfolio.bind(this),this.onUnlinkPortfolio=this.onUnlinkPortfolio.bind(this),this.onOverflowActionChange=this.onOverflowActionChange.bind(this),this.onReorderLists=this.onReorderLists.bind(this),this.onDeletePosition=this.onDeletePosition.bind(this),this.onReorderSymbols=this.onReorderSymbols.bind(this)}setDropdownRef(e){e&&(this.dropdownRef=e)}closeDropdown(){this.dropdownRef&&this.dropdownRef.closeMenu()}closeLightBox(){this.context.executeAction(G.a.hide)}onCreatePortfolio(){this.context.executeAction(G.a.show,{wrapperClass:Qe,component:me.a,componentProps:{onCancel:this.closeLightBox}})}onPrint(){window.print()}onImportPortfolio(){this.context.executeAction(G.a.show,{wrapperClass:Qe,component:he,componentProps:{onCancel:this.closeLightBox,onImport:this.onSuccessfulPortfolioImport}})}onSuccessfulPortfolioImport({pfId:e}){this.closeLightBox(),"function"==typeof this.props.onSuccessfulPortfolioImport&&this.props.onSuccessfulPortfolioImport({pfId:e})}onEditCurrency(){this.context.executeAction(G.a.show,{wrapperClass:Qe,component:Ee,componentProps:{pfId:this.props.pfId,baseCurrency:this.props.pfMeta&&this.props.pfMeta.baseCurrency,onSubmit:this.props.onEditCurrency}}),this.closeDropdown()}onToggleStreaming(){this.props.toggleQuoteStreaming(),this.closeDropdown()}onToggleDense(){this.props.toggleTableDense(),this.closeDropdown()}onRenamePortfolio(){this.context.executeAction(re.a,{pageParams:{pd:"modal"}}),this.context.executeAction(G.a.show,{wrapperClass:Qe,component:ye.a,componentProps:{pfId:this.props.pfId,pfName:this.props.pfMeta&&this.props.pfMeta.pfName}})}onDeletePortfolio(){this.context.executeAction(G.a.show,{wrapperClass:Qe,component:Ne.a,componentProps:{pfId:this.props.pfId,pfName:this.props.pfMeta&&this.props.pfMeta.pfName}})}onUnlinkPortfolio(){this.closeDropdown(),this.context.executeAction(Q.a,{url:"/portfolios"})}onReorderLists(e,t){this.context.executeAction(G.a.hide),this.context.executeAction(te,{silent:!1,action:"reorder",pfOrder:t})}onReorderSymbols(e,t){this.context.executeAction(se,{pfId:this.props.pfId,positions:t})}onDeletePosition(e,t){t&&t.length>0&&this.context.executeAction(ae.a,{pfId:this.props.pfId,posIds:t})}onOverflowActionChange(e){let t;switch(e.currentTarget.value){case"reorderPortfolios":t={type:"reorder-lists",onCancel:this.closeLightBox,onReorderLists:this.onReorderLists,pfOrder:this.props.pfOrder,portfolios:this.props.portfolios};break;case"linkBroker":{const{useDummyBroker:e}=this.props.componentConfig||{};this.context.executeAction(re.a,{pageParams:{pd:"modal"}}),this.context.executeAction(G.a.show,{component:ie.a,componentProps:Object.assign({},{sec:this.props.rapidSec,state:"list-brokers",action:"buy",useDummyBroker:e,isMini:!1,currentUrl:this.props.currentUrl,onAccountLink:this.props.onAccountLink}),wrapperClass:"Bgc($modalBackground) Ovy(a)"});break}case"addSymbol":t={type:"add-symbol",pfId:this.props.pfId,onCancel:this.closeLightBox};break;case"editSymbols":t={type:"edit-symbol",onCancel:this.closeLightBox,portfolios:this.props.portfolios,pfId:this.props.pfId,onDeleteSymbol:this.onDeletePosition,onReorderSymbols:this.onReorderSymbols};break;case"renamePortfolio":this.onRenamePortfolio();break;case"editCurrency":this.onEditCurrency();break;case"createPortfolio":this.onCreatePortfolio();break;case"deletePortfolio":this.onDeletePortfolio()}t&&(this.context.executeAction(re.a,{pageParams:{pd:"modal"}}),this.context.executeAction(G.a.show,{component:Oe,componentProps:t,wrapperClass:"Pos(f) T(0) Start(0) End(0) B(0) W(100%) H(100%) Bgc(white)"})),e.currentTarget.selectedIndex=-1}renderOverflowMenu(){const{pfId:e,pfMeta:t,isDefaultPf:a}=this.props,s=this.context.intl.formatMessage,{enableTradeit:n,useDummyBroker:i}=this.props.componentConfig||{},o=!!t&&!!t.linkedAccount;let l,c=[];return e?(n&&(l=r.a.createElement(ne.a,{key:"linkacc",ref:this.setHiddenTradeitRef,className:"D(n)",rapidSec:this.props.rapidSec,type:"null",isMini:!1,onAccountLink:this.props.onAccountLink,currentUrl:this.props.currentUrl,useDummyBroker:i}),c.push(r.a.createElement("option",{key:"link",value:"linkBroker"},s({id:"LINK_BROKER"})))),o||(c=c.concat([r.a.createElement("option",{key:"add",value:"addSymbol"},s({id:"ADD_SYMBOL"})),r.a.createElement("option",{key:"edit",value:"editSymbols"},s({id:"EDIT_SYMBOLS"})),r.a.createElement("option",{key:"rename",value:"renamePortfolio"},s({id:"RENAME_PORTFOLIO"})),r.a.createElement("option",{key:"currency",value:"editCurrency"},s({id:"CURRENCY_VALUE"},{currency:t.baseCurrency}))])),c.push(r.a.createElement("option",{key:"create",value:"createPortfolio"},s({id:"CREATE_PORTFOLIO"}))),a||c.push(r.a.createElement("option",{key:"delete",value:"deletePortfolio"},s({id:"DELETE_PORTFOLIO"})))):c=[r.a.createElement("option",{key:"reorder",value:"reorderPortfolios"},s({id:"REORDER_LISTS"}))],r.a.createElement("label",{className:"D(ib) Pos(r)"},r.a.createElement(Ce.Icon,{className:"H(20px) W(20px) Va(m) Fill($gray)!",asset:Ye.a,height:20}),l,r.a.createElement("select",{className:"Pos(a) Opacity(0) Start(0) W(20px) H(20px)",onChange:this.onOverflowActionChange,defaultValue:"none"},r.a.createElement("option",{disabled:!0,value:"none"},s({id:"SELECT_AN_ACTION_BELOW"})),c))}renderSettingsDropdown(){const{isDefaultPf:e,pfMeta:t,pfId:a,rapidSec:s,currentUrl:n,componentConfig:i}=this.props,{enableTradeit:o,useDummyBroker:l}=i||{},c=!!t&&!!t.linkedAccount,m=`/portfolio/${a}/view/v2`;let d=[];const p=[r.a.createElement("li",{key:"togglestreaming"},r.a.createElement(J.I13nButton,{className:"Fz(s) W(100%) D(b) C(black) Fw(b) Px(20px) Py(15px) Ta(start) Maw(250px) Miw(210px) Bgc($c-fuji-blue-1-a):h C(white):h Ell",onClick:this.onToggleStreaming,i13nModel:{elm:"itm",elmt:"ct",sec:s,itc:1,slk:"tog-stream"}},r.a.createElement(X.FormattedMessage,{id:"STREAMING_QUOTES"}),": ",r.a.createElement(X.FormattedMessage,{id:this.props.isQuoteStreaming?"ON":"OFF"}))),r.a.createElement("li",{key:"toggledense"},r.a.createElement(J.I13nButton,{className:"Fz(s) W(100%) D(b) C(black) Fw(b) Px(20px) Py(15px) Ta(start) Maw(250px) Miw(210px) Bgc($c-fuji-blue-1-a):h C(white):h Ell",onClick:this.onToggleDense,i13nModel:{elm:"itm",elmt:"ct",sec:s,itc:1,slk:"tog-dens"}},r.a.createElement(X.FormattedMessage,{id:"COMPACT_TABLE_DENSITY"}),": ",r.a.createElement(X.FormattedMessage,{id:this.props.isTableDense?"ON":"OFF"})))];if(c&&o){const e=t.linkedAccount;d=[p,r.a.createElement("li",{key:"delete"},r.a.createElement(ne.a,{className:"",buttonClassName:"Fz(s) W(100%) C(black) Fw(b) Px(20px) Py(15px) Ta(start) Maw(250px) Miw(210px) Bgc($c-fuji-blue-1-a):h C(white):h Ell",rapidSec:s,type:"unlink",currentUrl:n,useDummyBroker:l,onCloseSession:this.onUnlinkPortfolio,currentStateData:{userId:e.userId,longName:e.brokerLongName}}))]}else d=[r.a.createElement("li",{key:"editcurrency"},r.a.createElement(J.I13nButton,{className:"Fz(s) W(100%) C(black) Fw(b) Px(20px) Py(15px) Ta(start) Maw(250px) Miw(210px) Bgc($c-fuji-blue-1-a):h C(white):h Ell",onClick:this.onEditCurrency,i13nModel:{elm:"itm",elmt:"ct",sec:s,itc:1,slk:"edit-curr"}},r.a.createElement(X.FormattedMessage,{id:"EDIT_CURRENCY"}))),r.a.createElement("li",{key:"addholdings"},r.a.createElement(le.a,{className:"Td(n)",href:m,i13nModel:{elm:"itm",elmt:"link",sec:s,itc:0,slk:"add-hold"}},r.a.createElement("div",{className:"C(black) Fw(b) Px(20px) Py(15px) Ta(start) Maw(250px) Miw(210px) Bgc($c-fuji-blue-1-a):h C(white):h Ell",onClick:this.closeDropdown},r.a.createElement(X.FormattedMessage,{id:"ADD_HOLDINGS"})))),p,r.a.createElement("li",{key:"rename"},r.a.createElement(J.I13nButton,{className:"Fz(s) W(100%) D(b) C(black) Fw(b) Px(20px) Py(15px) Ta(start) Maw(250px) Miw(210px) Bgc($c-fuji-blue-1-a):h C(white):h Ell",onClick:this.onRenamePortfolio,i13nModel:{elm:"itm",elmt:"ct",sec:s,itc:1,slk:"rename-pf"}},r.a.createElement(X.FormattedMessage,{id:"RENAME_PORTFOLIO"}))),r.a.createElement("li",{key:"delete"},!e&&r.a.createElement(J.I13nButton,{className:"Fz(s) W(100%) D(b) C(black) Fw(b) Px(20px) Py(15px) Ta(start) Maw(250px) Miw(210px) Bgc($c-fuji-blue-1-a):h C(white):h Ell",onClick:this.onDeletePortfolio,i13nModel:{elm:"itm",elmt:"ct",sec:s,itc:1,slk:"del-pf"}},r.a.createElement(X.FormattedMessage,{id:"DELETE_PORTFOLIO"})))];return r.a.createElement("ul",{className:"M(0) P(0) List(n)"},d)}render(){const{componentConfig:e,currentUrl:t,className:a,rapidSec:s,pfId:n,pfMeta:i,quotes:o,isSmartphone:l}=this.props,{enableTradeit:c,useDummyBroker:m}=e||{},d=!!i.linkedAccount,{userId:p}=i,u=n?`https://query1.finance.yahoo.com/v6/finance/portfolio/download?userId=${p}&pfId=${n}`:"";let h,f,g;if(c&&(f=r.a.createElement(ne.a,{key:"linkacc",className:"Va(m) D(ib) Mend(15px)",rapidSec:s,type:"link-broker",isMini:l,onAccountLink:this.props.onAccountLink,currentUrl:t,useDummyBroker:m}),d&&!l)){const{linkedAccount:e}=i;h=r.a.createElement(ne.a,{key:"vieworder",className:"Va(m) D(ib) Mend(15px)",rapidSec:s,type:"view-order",isMini:l,currentUrl:t,currentStateData:{token:e.userId,accountNumber:e.accountNumber,longName:e.brokerLongName,accountBaseCurrency:i.baseCurrency||"USD"},useDummyBroker:m})}if(l&&n||(g=r.a.createElement(J.I13nButton,{key:"createpf",className:"Fz(s) Fw(500) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Mend(15px)",i13nModel:{sec:s,slk:"create-pf",elm:"btn",elmt:"ct",itc:1},onClick:this.onCreatePortfolio},r.a.createElement(Ce.Icon,{className:"Va(m)! Cur(a)! Mend(4px) Mb(2px) H(16px) W(16px) "+(l?"Fill($gray)! Stk($gray)!":"Fill($c-fuji-blue-1-b)! Stk($c-fuji-blue-1-b)!"),asset:Le.a,height:16}),l?null:r.a.createElement(X.FormattedMessage,{id:"CREATE_PORTFOLIO"}))),l){let e;return n||(e=[g,f]),r.a.createElement("div",{className:a},e,this.renderOverflowMenu())}const b=[f,h,g,r.a.createElement(J.I13nButton,{key:"print",className:"Fz(s) Fw(500) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Mend(15px)",i13nModel:{sec:s,slk:"print",elm:"btn",elmt:"ct",itc:1},onClick:this.onPrint},r.a.createElement(Ce.Icon,{className:"H(16px) W(16px) Va(m)! Fill($c-fuji-blue-1-b)! Stk($c-fuji-blue-1-b) Cur(a)! Mend(4px) Mb(2px)",asset:$e.a,height:16}),r.a.createElement(X.FormattedMessage,{id:"PRINT"}))];return o||(b.push(r.a.createElement(J.I13nButton,{key:"import",className:"Fz(s) Fw(500) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Mend(15px)",i13nModel:{sec:s,slk:"import",elm:"btn",elmt:"ct",itc:1},onClick:this.onImportPortfolio},r.a.createElement(Ce.Icon,{className:"H(16px) W(16px) Va(m)! Fill($c-fuji-blue-1-b)! Stk($c-fuji-blue-1-b) Cur(a)! Mend(4px) Mb(2px)",asset:He.a,height:16}),r.a.createElement(X.FormattedMessage,{id:"IMPORT"}))),!d&&u&&b.push(r.a.createElement(J.I13nAnchor,{key:"export",className:"Fz(s) Fw(500) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h Td(n):h P(0) Mend(15px)",i13nModel:{sec:s,slk:"export",elm:"btn",elmt:"ct",itc:0},href:u,"data-test":"export-pf"},r.a.createElement(Ce.Icon,{className:"H(16px) W(16px) Va(m)! Fill($c-fuji-blue-1-b)! Stk($c-fuji-blue-1-b) Cur(a)! Mend(4px) Mb(2px)",asset:qe.a,height:16}),r.a.createElement(X.FormattedMessage,{id:"EXPORT"}))),n&&b.push(r.a.createElement(ce.a,{key:"settings",id:"pf-settings",className:"IbBox",ref:this.setDropdownRef,containerClassName:"Fz(s) Fw(500) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Pos(r) D(ib) O(n):f",content:this.renderSettingsDropdown(),menuClassName:"Z(6) Bxsh($boxShadow) Bd Bdc($c-fuji-grey-c) Bdrs(3px) Bgc(white) Maw(250px) Miw(150px) Ta(start) Cur(a) End(0px) Mt(10px)",showClose:!1,showArrow:!0,arrowStyle:{left:85}},r.a.createElement(Ce.Icon,{className:"H(16px) W(16px) Va(m)! Fill($c-fuji-blue-1-b)! Stk($c-fuji-blue-1-b) Cur(a)! Mend(4px) Mb(2px)",asset:Ue.a,height:16}),r.a.createElement(X.FormattedMessage,{id:"SETTINGS"})))),r.a.createElement("div",{className:a,"data-test":"pf-toolbar","data-yaft-module":"fin-portfolio-toolbar"},b)}}Ze.displayName="PortfolioToolbar",Ze.propTypes={className:i.a.string,rapidSec:i.a.string,componentConfig:i.a.object,currentUrl:i.a.string,isSmartphone:i.a.bool,pfId:i.a.string,pfPrefix:i.a.string,viewPrefix:i.a.string,viewId:i.a.string,pfMeta:i.a.object,portfolios:i.a.object,pfOrder:i.a.array,isQuoteStreaming:i.a.bool,toggleQuoteStreaming:i.a.func,onSuccessfulPortfolioImport:i.a.func,isTableDense:i.a.bool,toggleTableDense:i.a.func,onAccountLink:i.a.func,onEditCurrency:i.a.func,isDefaultPf:i.a.bool,quotes:i.a.string},Ze.defaultProps={className:"",rapidSec:"pf-toolbar",componentConfig:{},pfMeta:{},pfPrefix:"portfolio",viewPrefix:"view",viewId:"v1",isSmartphone:!1},Ze.contextTypes={intl:i.a.object.isRequired,executeAction:i.a.func.isRequired};var Ke=Ze,Xe=a(1541);const Je="-";class et extends r.a.PureComponent{render(){const{className:e,portfolios:t,pfOrder:a,pfPrefix:s,rapidSec:n}=this.props,{formatNumber:i}=this.context.intl;return r.a.createElement("ul",{className:e,"data-yaft-module":"fin-portfolio-list"},a.map(e=>{const a=t[e],o=a&&a.positions&&a.positions.length||0;if(a&&!a.following)return r.a.createElement("li",{key:e,className:"Bgc(white) Mb(1px) BdB Bdbc($finLightGrayAlt)"},r.a.createElement(le.a,{href:`/${s}/${e}/`,className:"D(b) Py(15px) Px(15px) Td(n)",i13nModel:{sec:n,slk:e,itc:0,elm:"itm",elmt:"link"}},r.a.createElement("div",{className:"Fw(500) Mb(5px) C(black) Ell"},r.a.createElement("span",{className:"Fz(m) C($c-fuji-blue-1-b) C($actionBlueHover):h"},A.a.decode(a.pfName)),r.a.createElement("span",{className:"Fz(14px) Fl(end)"},r.a.createElement(Xe.a,{value:a.dailyPercentGain||0,streamingEnabled:!1},a.dailyPercentGain&&a.dailyPercentGain.toFixed(2)+"%"||Je))),r.a.createElement("div",{className:"Fz(12px) Fw(500) C($c-fuji-grey-j)"},r.a.createElement("span",{className:"Tt(l)"},o," ",r.a.createElement(X.FormattedMessage,{id:o>1?"TD_SYMBOLS":"TD_SYMBOL"})),r.a.createElement("span",{className:"Fz(s) Fl(end)"},a.currentMarketValue?i(a.currentMarketValue,{currency:a.baseCurrency||"USD",style:"currency",currencyDisplay:"symbol",minimumFractionDigits:2}):""))))}))}}et.displayName="PortfolioList",et.propTypes={className:i.a.string,portfolios:i.a.object,pfOrder:i.a.array.isRequired,pfPrefix:i.a.string,rapidSec:i.a.string},et.contextTypes={intl:i.a.object.isRequired},et.defaultProps={className:"Bxsh($boxAreaShadow)",rapidSec:"",pfPrefix:"portfolio",viewPrefix:"view"};var tt=et,at=a(367),st=a.n(at),rt=a(249),nt=a.n(rt),it=a(92),ot=a.n(it),lt=a(191),ct=a.n(lt);const mt={valueUp:" C($dataGreen)",valueDown:" C($dataRed)",bgValueUp:" Pstart(10px) Py(2px) C(white) Bgc($bgGreen)",bgValueDown:" Pstart(10px) Py(2px) C(white) Bgc($c-fuji-red-2-b)",trendUp:" Bgc($lightGreen)",trendDown:" Bgc($lightRed)"};class dt extends r.a.Component{constructor(e,t){super(e,t),this.onStreamUpdate=this.onStreamUpdate.bind(this),this.timeout=null,this.pfStore=t.getStore(o.a),this.userId=t.getStore(ot.a).getGUID(),this.state={value:e.value,fmtValue:e.children,trend:0}}componentDidMount(){const{streamingEnabled:e,pfIds:t,field:a}=this.props;e&&a&&this.pfStore.subscribe({pfIds:t,userId:this.userId,callback:this.onStreamUpdate})}componentWillReceiveProps(e){const{streamingEnabled:t,pfIds:a,field:s}=this.props;let r,n=e.value,i=this.state.value;if(e.children!==this.state.fmtValue&&((r=r||{}).fmtValue=e.children),n&&n!==i){"string"==typeof i&&(i=parseFloat(i)),"string"==typeof n&&(n=parseFloat(n));const e=n-i;(r=r||{}).value=n,this.state.trend!==e&&(r.trend=e)}if(s){const s=e.streamingEnabled,r=!ct()(e.pfIds,a);t?s?r&&(this.pfStore.unsubscribe({pfIds:a,userId:this.userId,callback:this.onStreamUpdate}),this.pfStore.subscribe({pfIds:e.pfIds,userId:this.userId,callback:this.onStreamUpdate})):this.pfStore.unsubscribe({pfIds:a,userId:this.userId,callback:this.onStreamUpdate}):s&&this.pfStore.subscribe({pfIds:e.pfIds,userId:this.userId,callback:this.onStreamUpdate})}r&&this.setState(r,this.onFadeOut)}componentWillUnmount(){const{streamingEnabled:e,pfIds:t}=this.props;this.clearTimeout(),e&&this.pfStore.unsubscribe({pfIds:t,userId:this.userId,callback:this.onStreamUpdate})}onStreamUpdate(e){if(!e)return;const{field:t}=this.props;let a,s,r;a=e.portfolio?e.portfolio[t]:e[t];let n=this.state.value;"object"==typeof a?(r=a.raw,s=a.fmt):r=s=a,"string"==typeof n&&(n=parseFloat(n)),"string"==typeof r&&(r=parseFloat(r));const i=r-n;this.setState({value:r,fmtValue:s,trend:i},this.onFadeOut)}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onFadeOut(){this.state.trend&&(this.clearTimeout(),this.timeout=setTimeout(()=>{this.timeout=null,this.setState({trend:0})},300))}render(){let{className:e,textColor:t,bgColor:a,transform:s}=this.props,{value:n,fmtValue:i,trend:o}=this.state,l=i;return n&&0!==n&&("string"==typeof n&&(n=parseFloat(n)),n>0?t?(l=l?"+"+l:null,e+=mt.valueUp):a&&(l=l?"+"+l:null,e+=mt.bgValueUp):n<0&&(t?e+=mt.valueDown:a&&(e+=mt.bgValueDown)),o>0?e+=mt.trendUp:o<0&&(e+=mt.trendDown),"function"==typeof s&&(l=s({raw:n,fmt:i,trend:o}))),r.a.createElement("span",{className:"Trsdu(0.3s) "+e},void 0!==l?l:"-")}}dt.propTypes={className:i.a.string,textColor:i.a.bool,transform:i.a.func,streamingEnabled:i.a.bool,field:i.a.string.isRequired,value:i.a.oneOfType([i.a.number,i.a.string]),pfIds:i.a.array,children:i.a.oneOfType([i.a.string,i.a.node]),bgColor:i.a.bool},dt.defaultProps={className:"",textColor:!0,streamingEnabled:!1,bgColor:!1},dt.contextTypes={getStore:i.a.func.isRequired},dt.displayName="PfStreamingChange";var pt=dt;const ut=Object(we.SortableHandle)(()=>r.a.createElement("span",{className:"Cur(m) Pend(4px) Pb(2px)"},r.a.createElement(Ce.Icon,{className:"H(16px) W(16px) Va(m)! Fill($c-fuji-grey-j)! Stk($c-fuji-grey-j) Cur(m)!",asset:Ie.a,height:16}))),ht=({className:e,pfId:t,portfolio:a,rapidSec:s},n)=>{const{formatNumber:i}=n.intl;function o(e){let t=isNaN(e.raw)?0:e.raw;const a=n.intl.formatNumber(t,{minimumFractionDigits:2,maximumFractionDigits:2});return e.raw>0?"+"+a:a}function l(e){let t=isNaN(e.raw)?0:e.raw;const a=n.intl.formatNumber(t/100,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});return e.raw>0?"+"+a:a}const c=void 0===a.currentMarketValue?"-":i(a.currentMarketValue,{currency:a.baseCurrency||"USD",style:"currency",currencyDisplay:"symbol",minimumFractionDigits:2});return r.a.createElement("tr",{key:t,className:e},r.a.createElement("td",{className:"Ta(start) Pstart(10px) Pend(15px) Py(10px) Bxz(bb) W(40%)"},r.a.createElement("div",{className:"IbBox"},r.a.createElement(ut,null)),r.a.createElement("div",{className:"IbBox"},r.a.createElement(le.a,{href:Object(f.e)("portfolio",{pfId:t}),className:"Fz(14px) Fw(b) Td(n) C($c-fuji-blue-1-b) Whs(n)",i13nModel:{sec:s,itc:0,elm:"itm",elmt:"link"}},A.a.decode(a.pfName||"")),!!a.linkedAccount&&r.a.createElement("div",{className:"Fz(xs) Mt(2px) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"LINKED_ACCOUNT"})))),r.a.createElement("td",{className:"Fw(b) Fz(14px) Pstart(15px)"},a.positions&&a.positions.length||"-"),r.a.createElement("td",{className:"Fw(b) Fz(14px) Pstart(15px)"},c),r.a.createElement("td",{className:"Fw(b) Fz(14px) Pstart(15px) Ell",title:isNaN(a.dailyGain)?"-":a.dailyGain},r.a.createElement(pt,{pfIds:[t],value:a.dailyGain,field:"dailyGain",streamingEnabled:!0,transform:o},isNaN(a.dailyGain)?"-":a.dailyGain)),r.a.createElement("td",{className:"Fw(b) Fz(14px) Pstart(15px) Ell",title:isNaN(a.dailyPercentGain)?"-":a.dailyPercentGain},r.a.createElement(pt,{pfIds:[t],value:a.dailyPercentGain,field:"dailyPercentGain",streamingEnabled:!0,transform:l},isNaN(a.dailyPercentGain)?"-":a.dailyPercentGain)),r.a.createElement("td",{className:"Fw(b) Fz(14px) Pstart(15px) Ell",title:isNaN(a.totalGain)?"-":a.totalGain},r.a.createElement(pt,{pfIds:[t],value:a.totalGain,field:"totalGain",streamingEnabled:!0,transform:o},isNaN(a.totalGain)?"-":a.totalGain)),r.a.createElement("td",{className:"Fw(b) Fz(14px) Pstart(15px) Pend(10px) Ell",title:isNaN(a.totalPercentGain)?"-":a.totalPercentGain},r.a.createElement(pt,{pfIds:[t],value:a.totalPercentGain,field:"totalPercentGain",streamingEnabled:!0,transform:l},isNaN(a.totalPercentGain)?"-":a.totalPercentGain)))};ht.displayName="PortfoliosItem",ht.propTypes={className:i.a.string,pfId:i.a.string.isRequired,portfolio:i.a.object.isRequired,lang:i.a.string,rapidSec:i.a.string.isRequired},ht.defaultProps={lang:"en-US",className:"",rapidSec:""},ht.contextTypes={intl:i.a.object.isRequired};const ft=Object(we.SortableElement)(e=>r.a.createElement(ht,e));we.SortableElement.propTypes={className:i.a.string,pfId:i.a.string.isRequired,portfolio:i.a.object.isRequired,lang:i.a.string,rapidSec:i.a.string.isRequired,index:i.a.number.isRequired},we.SortableElement.contextTypes={intl:i.a.object.isRequired};var gt=ft,bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const xt={ORIG:0,ASC:1,DESC:2},Et=Object(we.SortableContainer)(({order:e,portfolios:t,lang:a,rapidSec:s})=>r.a.createElement("tbody",null,e.map((e,n)=>{const i=t[e];if(!i||i.following)return null;let o="Bgc($extraLightBlue):h Bdrs(4px) Bd Bdc($tableBorderGray) Bdc($tableBorderBlue):h Ta(end) H(50px) Whs(nw)";return n%2!=0&&(o+=" Bgc($altRowColor)"),[r.a.createElement(gt,{key:e,index:n,className:o,pfId:e,portfolio:i,rapidSec:s,lang:a}),r.a.createElement("tr",{key:"space "+e,className:"H(8px)"},r.a.createElement("td",{colSpan:x.G.length}))]})));class yt extends r.a.PureComponent{constructor(e,t){super(e,t),this.onReorder=this.onReorder.bind(this),this.onHeaderClick=this.onHeaderClick.bind(this),this.state={pfOrder:e.pfOrder,sortColumn:null,sortState:xt.ORIG}}componentWillReceiveProps(e){const{pfOrder:t}=e;t!==this.props.pfOrder&&this.setState({pfOrder:t,sortColumn:null,sortState:xt.ORIG})}onHeaderClick(e,t){const{portfolios:a,pfOrder:s}=this.props,{sortState:r,sortColumn:n}=this.state,{field:i}=e,o=[],l=r<2?r+1:xt.ORIG;l!==xt.ORIG||i!==n?(Object.keys(a).forEach(e=>{const t=a[e],s="symbol"===i?t.positions.length:t[i];o.push({pfId:e,value:s})}),o.sort((e,t)=>e.value<t.value?-1:e.value>t.value?1:0),l===xt.DESC&&o.reverse(),this.setState({pfOrder:o.map(e=>e.pfId),sortColumn:i,sortState:l})):this.setState({pfOrder:s,sortColumn:null,sortState:l})}onReorder({oldIndex:e,newIndex:t}){const{pfOrder:a}=this.props;this.context.executeAction(te,{silent:!1,action:"reorder",pfOrder:Object(we.arrayMove)(a,e,t)})}render(){const{portfolios:e,rapidSec:t,className:a}=this.props,{pfOrder:s,sortState:n,sortColumn:i}=this.state;return r.a.createElement("table",{key:"results",className:"W(100%) Tbl(f) Pos(r) "+a,"data-test":"pf-list-table","data-yaft-module":"fin-portfolio-listtable"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"Ta(end)"},x.G.map((e,t)=>{let a,s="Fw(400) Fz(xs) C($c-fuji-grey-j) Pstart(15px) Py(4px) Cur(p)";switch(e.field){case"pfName":s="Fw(400) Fz(xs) C($c-fuji-grey-j) Ta(start) Pstart(10px) Pend(15px) Py(4px) W(40%) Cur(p)";break;case"symbol":s="Fw(400) Fz(xs) C($c-fuji-grey-j) Py(4px) Cur(p)"}t===x.G.length-1&&(s+=" Pend(10px)"),n!==xt.ORIG&&i===e.field&&(a=r.a.createElement(Ce.Icon,{className:"Va(m)! W(14px) H(14px) Fill(black)! Stk(black)! Mend(2px)",asset:n!==xt.ASC?st.a:nt.a}));const o={onClick:this.onHeaderClick.bind(this,{field:e.field,index:t})};return r.a.createElement("th",bt({key:e.field,className:s,"data-idx":t},o),r.a.createElement(X.FormattedMessage,{id:e.title}),a)}))),r.a.createElement(Et,{order:s,portfolios:e,rapidSec:t,onSortEnd:this.onReorder,useDragHandle:!0}))}}yt.displayName="PortfolioListTable",yt.propTypes={className:i.a.string,portfolios:i.a.object,pfOrder:i.a.array.isRequired,rapidSec:i.a.string},yt.defaultProps={className:"",rapidSec:""},yt.contextTypes={executeAction:i.a.func.isRequired};var Nt=yt;function Ct(e,t){const{pfId:a,viewId:s,viewName:r,columns:n}=t;if(!s)throw u.a.http.badRequest("editView: missing `viewId`");if(!n)throw u.a.http.badRequest("editView: missing `columns`");const i=e.request.user.guid;if(!i)throw u.a.http.badRequest("editView: Unable to fetch user guid");return Object(h.b)(e,{resource:"tachyon.portfolioView",params:{userId:i,viewId:s,viewName:r||"New View",columns:n,sortColumns:"",sortAscending:"",viewSortOrder:0},method:"update"}).then(t=>{if(!t)throw u.a.http.internalServerError("No view received for editView");return e.dispatch("FIN_USR_VIEW_LOAD",{view:t}),e.executeAction(G.a.hide),e.executeAction(W,{pfId:a,viewId:s,loadPortfolioView:!0})}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.w}),t})}var Pt=a(1595);function wt(e,t){const{pfId:a,viewName:s,columns:r}=t;if(!r)throw u.a.http.badRequest("editCurrency: missing `columns`");const n=e.request.user.guid;if(!n)throw u.a.http.badRequest("editCurrency: Unable to fetch user guid");return Object(h.b)(e,{resource:"tachyon.portfolioView",params:{userId:n,viewId:"",viewName:s||"New View",columns:r,sortColumns:"",sortAscending:"",viewSortOrder:0},method:"create"}).then(t=>{if(!t)throw u.a.http.internalServerError("No view received for edit currency");e.dispatch("FIN_USR_VIEW_LOAD",{view:t}),e.executeAction(G.a.hide),e.executeAction(Q.a,{url:`/portfolio/${a}/view/${t.viewId}`})}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.w}),t})}var St=a(2183),It=a.n(St),Mt=a(633),kt=a.n(Mt),vt=a(2279),Tt=a.n(vt),Ft=a(67),Rt=a.n(Ft),Dt=a(701),Bt=a.n(Dt),_t=a(702),Ot=a.n(_t);const At={DG_BASIC:{symbol:!0,longName:!0,currency:!0,exchange:!0,regularMarketPrice:!0,regularMarketChange:!0,regularMarketChangePercent:!0,regularMarketTime:!0,regularMarketVolume:!0,averageDailyVolume3Month:!0,averageDailyVolume10Day:!0,regularMarketDayRange:!0,sparkline:!0},DG_DETAILS:{bid:!0,bidSize:!0,ask:!0,askSize:!0,regularMarketPreviousClose:!0,shareFloat:!0,regularMarketOpen:!0,regularMarketDayHigh:!0,regularMarketDayLow:!0,fiftyTwoWeekHigh:!0,fiftyTwoWeekLow:!0,fiftyTwoWeekHighChange:!0,fiftyTwoWeekHighChangePercent:!0,fiftyTwoWeekLowChange:!0,fiftyTwoWeekLowChangePercent:!0,sharesOutstanding:!0,shortRatio:!0},DG_EXTENDED_HOURS:{fiftyTwoWeekRange:!0,preMarketTime:!0,preMarketPrice:!0,preMarketChange:!0,preMarketChangePercent:!0,postMarketTime:!0,postMarketPrice:!0,postMarketChange:!0,postMarketChangePercent:!0},FUNDAMENTALS:{epsTrailingTwelveMonths:!0,trailingPE:!0,forwardPE:!0,dividendDate:!0,exDividendDate:!0,dividendsPerShare:!0,dividendRate:!0,dividendYield:!0,trailingAnnualDividendRate:!0,trailingAnnualDividendYield:!0,marketCap:!0,bookValue:!0,priceToBook:!0,priceToSales:!0,ebitda:!0,earningsDate:!0},DG_MOVING_AVERAGES:{fiftyDayAverage:!0,fiftyDayAverageChange:!0,fiftyDayAverageChangePercent:!0,twoHundredDayAverage:!0,twoHundredDayAverageChange:!0,twoHundredDayAverageChangePercent:!0},DG_ESTIMATES:{targetPriceMean:!0,epsForward:!0,pegRatio:!0},DG_PORTFOLIOS:{quantity:!0,tradeDate:!0,highLimit:!0,lowLimit:!0,purchasePrice:!0,currentMarketValue:!0,totalGain:!0,totalPercentGain:!0,dailyGain:!0,dailyPercentGain:!0,comment:!0,numberOfLots:!0,annualGain:!0}},Lt="symbol",jt="pf-view-modal";function $t({group:e,items:t,columnChecked:a,columnFilter:s,onCheckboxClicked:n,onGroupSelectClicked:i,allSelected:o}){return r.a.createElement("div",{className:"Px(15px) Pb(15px) Cl(b)"},r.a.createElement("div",{className:"C($gray) Mb(5px)"},r.a.createElement("span",{className:"Fw(500)"},r.a.createElement(X.FormattedMessage,{id:e})),r.a.createElement(J.I13nButton,{className:"C($c-fuji-blue-1-b) C($actionBlueHover):h Mstart(10px) Cur(p) Tt(l) Fz(14px) Fw(400)",onClick:i,i13nModel:{sec:jt,slk:"toggle-all",itc:1,elm:"btn"}},o?r.a.createElement(X.FormattedMessage,{id:"UNSELECT_ALL"}):r.a.createElement(X.FormattedMessage,{id:"SELECT_ALL"}))),r.a.createElement("ul",{className:"Ov(a)"},Object.keys(t).map(t=>!s[t]&&r.a.createElement(Vt,{key:t,item:t,checked:a[t]||!1,onCheckboxClicked:()=>n(t,e)}))))}function Vt({item:e,checked:t,onCheckboxClicked:a}){return e===Lt&&(a=(()=>null)),r.a.createElement("li",{className:"Fl(start) D(b) Mb(12px) W(33.33%)"},r.a.createElement("button",{className:"Cur(p) Fz(14px) P(0) M(0)",onClick:a},r.a.createElement("label",{className:"Ta(c) Pos(r) Va(tb) Pend(5px)"},r.a.createElement("span",{className:"H(16px) W(16px) Fz(16px)"},t?r.a.createElement(Ce.Icon,{className:"D(ib) Fill($c-fuji-blue-1-b)! Stroke($c-fuji-blue-1-b)!",asset:Bt.a,height:15}):r.a.createElement(Ce.Icon,{className:"D(ib) Fill($plusGray)! Stroke($plusGray)!",asset:Ot.a,height:15}))),r.a.createElement("span",{className:"Va(m)"},r.a.createElement(X.FormattedMessage,{id:x.I[e]}))))}$t.displayName="CustomViewPopup.ColumnGroup",$t.propTypes={group:i.a.string.isRequired,items:i.a.object.isRequired,columnChecked:i.a.object.isRequired,columnFilter:i.a.object.isRequired,onCheckboxClicked:i.a.func.isRequired,onGroupSelectClicked:i.a.func.isRequired,allSelected:i.a.bool.isRequired},Vt.displayName="CustomViewPopup.ColumnGroupCheckbox",Vt.propTypes={item:i.a.string.isRequired,checked:i.a.bool.isRequired,onCheckboxClicked:i.a.func.isRequired};const Ht=Object(we.SortableContainer)(function({columnOrder:e}){return r.a.createElement("div",{className:"Px(20px) Py(5px)"},e.map((e,t)=>r.a.createElement(zt,{key:e,index:t,i:t+1,disabled:e===Lt,fixed:e===Lt,item:e})))});Ht.displayName="CustomViewPopup.SortableList",Ht.propTypes={columnOrder:i.a.array.isRequired};const zt=Object(we.SortableElement)(function({i:e,item:t,fixed:a}){return r.a.createElement("div",{className:"Pstart(10px) Pend(15px) Py(10px) Bgc(white) Z(52) Fz(s) Bdrs(5px) Bxsh($boxAreaShadow) Mb(5px) Ov(h) Whs(nw) Tov(e) "+(a?"":"Cur(m)")},r.a.createElement("span",{className:"D(ib) W(10px) Mend(5px)"},!a&&r.a.createElement(Ce.Icon,{asset:Ie.a,height:15}))," ",e,". ",r.a.createElement(X.FormattedMessage,{id:x.I[t]}))});zt.displayName="CustomViewPopup.SortableListItem",zt.propTypes={i:i.a.number.isRequired,item:i.a.string.isRequired,fixed:i.a.bool.isRequired};class qt extends r.a.Component{constructor(e,t){let a,s,r;super(e,t),e.columns?(a=e.columns,s=e.columns.reduce((e,t)=>(e[t]=!0,e),{[Lt]:!0}),r=Object.keys(At).reduce((e,t)=>(e[t]=Object.keys(At[t]).every(e=>s[e]),e),{})):(a=[Lt],s={[Lt]:!0},r={}),this.state={columnOrder:a,columnChecked:s,columnGroupAllSelected:r,columnFilter:{}},this.viewName=e.viewName||"",this.onDragEnd=this.onDragEnd.bind(this),this.onCheckboxClicked=this.onCheckboxClicked.bind(this),this.onGroupSelectClicked=this.onGroupSelectClicked.bind(this),this.onColumnFilterChanged=this.onColumnFilterChanged.bind(this),this.onViewNameChanged=this.onViewNameChanged.bind(this),this.onSaveView=this.onSaveView.bind(this),this.onClose=this.onClose.bind(this)}onCheckboxClicked(e,t){if(this.state.columnOrder.findIndex(t=>t===e)>=0)this.setState({columnOrder:this.state.columnOrder.filter(t=>t!==e),columnChecked:Object.assign({},this.state.columnChecked,{[e]:!1}),columnGroupAllSelected:Object.assign({},this.state.columnGroupAllSelected,{[t]:!1})});else{const a=Object.assign({},this.state.columnChecked,{[e]:!0});this.setState({columnOrder:this.state.columnOrder.concat([e]),columnChecked:a,columnGroupAllSelected:Object.assign({},this.state.columnGroupAllSelected,{[t]:Object.keys(At[t]).every(e=>a[e])})})}}onGroupSelectClicked(e,t){e?this.setState({columnOrder:this.state.columnOrder.filter(e=>!At[t][e]||e===Lt),columnChecked:Object.keys(this.state.columnChecked).reduce((e,a)=>(e[a]=this.state.columnChecked[a]&&!At[t][a]||a===Lt,e),{}),columnGroupAllSelected:Object.assign({},this.state.columnGroupAllSelected,{[t]:!1})}):this.setState({columnOrder:this.state.columnOrder.concat(Object.keys(At[t]).filter(e=>!this.state.columnChecked[e])),columnChecked:Object.assign({},this.state.columnChecked,At[t]),columnGroupAllSelected:Object.assign({},this.state.columnGroupAllSelected,{[t]:!0})})}onDragEnd({oldIndex:e,newIndex:t}){this.setState({columnOrder:Object(we.arrayMove)(this.state.columnOrder,e,t)})}onColumnFilterChanged(e){const t=this.context.getStore(B.a).getStrings();if(e.target.value){const a=new RegExp(e.target.value,"i");this.setState({columnFilter:Object.keys(x.I).reduce((e,s)=>(a.test(t[x.I[s]])||(e[s]=!0),e),{})})}else this.setState({columnFilter:{}})}onViewNameChanged(e){this.viewName=e.target.value}onSaveView(){this.props.onSaveView(this.viewName,this.state.columnOrder.join(","))}onClose(){this.context.executeAction(G.a.hide)}render(){const{titleMessageId:e,hasError:t}=this.props,{ENTER_VIEW_NAME:a,SEARCH_COLUMNS:s}=this.context.getStore(B.a).getStrings();return r.a.createElement("div",{className:"Pos(r) W(900px) Mx(a) Mt(10%) Bdrs(5px) Bgc(white)"},r.a.createElement(J.I13nButton,{className:"Pos(a) T(15px) End(15px)",onClick:this.onClose,i13nModel:{sec:jt,itc:0,elm:"icon",elmt:"close"}},r.a.createElement(Ce.Icon,{asset:Rt.a,height:20})),r.a.createElement("div",{className:"P(20px) Bdb($defaultBorder)"},r.a.createElement("h2",{className:"Fz(18px) Fw(500) Mb(15px)"},r.a.createElement(X.FormattedMessage,{id:e})),t&&r.a.createElement("div",{className:"C($dataRed) Fw(500) Fz(s) Mb(5px)"},r.a.createElement(X.FormattedMessage,{id:"SAVE_VIEW_ERROR"})),r.a.createElement("input",{className:"H(30px) Mend(25px) W(310px) Fz(s) Pstart(10px) Bdrs(0) Bxsh(n)! Bxz(bb) Bdc($c-fuji-grey-c) Bdc($c-fuji-blue-1-b):f",type:"text",autoFocus:!0,placeholder:a,defaultValue:this.viewName,onChange:this.onViewNameChanged})),r.a.createElement("div",{className:"H(440px)"},r.a.createElement("div",{className:"H(100%) W(660px) Fl(start)"},r.a.createElement("div",{className:"Px(25px) Lh(50px) Fz(s) Fw(500)"},r.a.createElement("span",{className:"D(ib)"},r.a.createElement(Ce.Icon,{className:"Mb(15px) Mend(5px)",asset:Tt.a,height:20}),r.a.createElement(X.FormattedMessage,{id:"SELECT_DATA_COLUMNS_TO_DISPLAY"})),r.a.createElement("span",{className:"Pos(r) Fl(end)"},r.a.createElement("span",{className:"Fz(17px) Pos(a) Start(8px)"},r.a.createElement(Ce.Icon,{className:"Mb(15px) Mend(5px) Fill($c-fuji-blue-1-b)! Stroke($c-fuji-blue-1-b)!",asset:kt.a,height:18})),r.a.createElement("input",{className:"Fz(s) Pstart(30px) H(30px) W(190px) Bdrs(0) Bxsh(n)! Bxz(bb) Bdc($c-fuji-grey-c) Bdc($c-fuji-blue-1-b):f",type:"text",placeholder:s,value:this.state.value,onChange:this.onColumnFilterChanged}))),r.a.createElement("div",{className:"Fz(14px) H(390px) Ovy(a)"},Object.keys(At).map(e=>r.a.createElement($t,{key:e,group:e,items:At[e],columnFilter:this.state.columnFilter,columnChecked:this.state.columnChecked,onCheckboxClicked:this.onCheckboxClicked,allSelected:this.state.columnGroupAllSelected[e]||!1,onGroupSelectClicked:()=>this.onGroupSelectClicked(this.state.columnGroupAllSelected[e],e)})))),r.a.createElement("div",{className:"H(100%) W(240px) Fl(start) Bgc($panelBackground)"},r.a.createElement("div",{className:"Px(25px) Lh(50px) Fz(13px) Fw(500)"},r.a.createElement(Ce.Icon,{className:"Mb(15px) Mend(5px)",asset:It.a,height:20})," ",r.a.createElement(X.FormattedMessage,{id:"REORDER_COLUMNS"})),r.a.createElement("div",{className:"H(390px) Ovy(a)"},r.a.createElement(Ht,{columnOrder:this.state.columnOrder,onSortEnd:this.onDragEnd})))),r.a.createElement("div",{className:"P(20px) Bdt($defaultBorder)"},r.a.createElement(J.I13nButton,{className:"Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(3px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px)",onClick:this.onSaveView,i13nModel:{sec:jt,slk:"save",itc:1,elm:"btn"}},r.a.createElement(X.FormattedMessage,{id:"SAVE"})),r.a.createElement(J.I13nButton,{className:"C($c-fuji-blue-1-b) Bgc(white) Bd Bdc($c-fuji-blue-1-b) Bdc($actionBlueHover):h C($actionBlueHover):h Fw(500) Px(20px) Py(8px) Bdrs(3px) Fz(s) D(ib) Mstart(20px) Whs(nw) Miw(110px)",onClick:this.onClose,i13nModel:{sec:jt,slk:"cancel",itc:1,elm:"btn"}},r.a.createElement(X.FormattedMessage,{id:"CANCEL"}))))}}qt.displayName="CustomViewPopup",qt.propTypes={onSaveView:i.a.func.isRequired,titleMessageId:i.a.string,hasError:i.a.bool,viewName:i.a.string,columns:i.a.array},qt.contextTypes={executeAction:i.a.func.isRequired,getStore:i.a.func.isRequired},qt.defaultProps={titleMessageId:"CREATE_NEW_VIEW"};var Wt=K()(qt,[o.a],(e,t)=>{return{hasError:e.getStore(o.a).hasError(x.w)}});class Ut extends r.a.Component{constructor(e,t){super(e,t),this.onCreateView=this.onCreateView.bind(this)}onCreateView(){this.context.executeAction(re.a,{pageParams:{pd:"modal"},disableAds:!0}),this.context.executeAction(G.a.show,{component:Wt,componentProps:{onSaveView:(e,t)=>{this.context.executeAction(wt,{viewName:e,columns:t,pfId:this.props.pfId})}},wrapperClass:"Pos(f) T(0) B(0) Start(0) End(0) Bgc($modalBackground) Ovy(a)"})}render(){const{rapidSec:e,className:t}=this.props;return r.a.createElement(J.I13nButton,{className:"createViewBtn "+t,i13nModel:{sec:e,slk:"create-view",elm:"btn",elmt:"ct",itc:1},onClick:this.onCreateView},r.a.createElement(Ce.Icon,{className:"H(16px) W(16px) Va(m)! createViewBtn:h_Fill($actionBlueHover) createViewBtn:h_Stk($actionBlueHover) Cur(a)! Mend(4px) Mb(2px)",asset:Le.a,height:16,color:"#0081f2"}),r.a.createElement(X.FormattedMessage,{id:"CREATE_NEW_VIEW"}))}}Ut.displayName="CreateView",Ut.propTypes={className:i.a.string,rapidSec:i.a.string,pfId:i.a.string},Ut.defaultProps={className:"Fz(s) Fw(500) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Mend(15px)"},Ut.contextTypes={executeAction:i.a.func.isRequired};var Gt=Ut,Yt=a(1545),Qt=a(358),Zt=a.n(Qt),Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const Xt="fin-tab-item",Jt="fin-tab-items",ea=42;class ta extends r.a.PureComponent{constructor(){super(),this.setCompRef=this.setCompRef.bind(this),this.setBreakingIndex=this.setBreakingIndex.bind(this),this.onResize=this.onResize.bind(this),this.state={breakingIndex:-1}}componentDidMount(){this.props.isMini||window&&window.addEventListener("resize",this.onResize)}componentWillUnmount(){this.props.isMini||(this.containerNode=null,window&&window.removeEventListener("resize",this.onResize))}setBreakingIndex(){if(this.containerNode){const e=this.containerNode.getElementsByClassName(Jt)[0],t=this.containerNode.getElementsByClassName(Xt);if(!e||!t||!t.length)return;const a=e.offsetWidth,s=t.length,r=a-t[s-1].clientWidth;let n=s-1,i=0;for(let e=0;e<s-1;e++)if((i+=t[e].clientWidth)+ea>r){n=e;break}n!==this.state.breakingIndex&&this.setState({breakingIndex:n})}}onResize(){Zt()(this.setBreakingIndex,100,{trailing:!0})()}setCompRef(e){!e||this.props.isMini||this.props.quotes||(this.containerNode=e,this.setBreakingIndex())}render(){const{className:e,viewUrl:t,views:a,pfId:s,isMini:n,pfPrefix:i,viewPrefix:o,rapidSec:l,quotes:c,isHighValueUser:m}=this.props;if(!a)return null;const{breakingIndex:d}=this.state,p=[],u=[];let h=0;for(let e in a)if(a.hasOwnProperty(e)){const t=a[e];if(!n&&!c||t.defaultView&&!t.isPremium){(h<d||d<0?u:p).push({noFormattedText:!t.defaultView,title:t.viewName,url:c?`/quotes/${c}/${o}/${e}`:`/${i}/${s}/${o}/${e}`,icon:t.isPremium&&{component:Yt.a,props:{type:"lock",isHighValueUser:m,imgClassName:"Va(m) Mstart(5px)",pIconImgWidth:16,pIconImgHeight:16}}}),h++}}p.length>0&&u.push({subnav:p});let f={};return n||c||(f={CustomItemComponent:Gt,customItemComponentProps:{rapidSec:l,className:"Fz(s) Fw(500) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) H(100%) Mt(1px) Px(12px)",pfId:s}}),r.a.createElement("section",{className:e,ref:this.setCompRef,"data-test":"view-bar","data-yaft-module":"fin-portfolio-viewbar"},r.a.createElement(Pt.a,Kt({className:n?"Mx(15px)":"Bgc($panelBackground) Mb(0px)!",type:n?"mini_nav":"nav",tabs:u,selected:decodeURIComponent(t),config:{showBorder:!1}},f)))}}ta.displayName="ViewBar",ta.propTypes={className:i.a.string,rapidSec:i.a.string,viewUrl:i.a.string,pfId:i.a.string,pfPrefix:i.a.string,isHighValueUser:i.a.bool,viewPrefix:i.a.string,quotes:i.a.string,isMini:i.a.bool,views:i.a.object.isRequired},ta.defaultProps={className:"Px(20px) smartphone_Px(0px)",rapidSec:"viewbar",pfPrefix:"portfolio",isHighValueUser:!1,viewPrefix:"view",isMini:!1,views:{}};var aa=ta,sa=a(1839),ra=a(1581),na=a.n(ra),ia=a(2280),oa=a.n(ia),la=a(2281),ca=a.n(la);class ma extends r.a.PureComponent{constructor(){super(),this.state={isSelected:!1},this.onToggleSelected=this.onToggleSelected.bind(this)}onToggleSelected(e){this.setState({isSelected:e})}render(){const{className:e,portfolio:t,rapidSec:a,isReordering:s,isCustomView:n,isHoldingsView:i,quotes:o}=this.props;if(!t)return null;const{isSelected:l}=this.state,{pfId:c,baseCurrency:m="USD"}=t,d=!!t.linkedAccount,p=[];return d||(l?p.push(r.a.createElement(J.I13nButton,{key:"delete",className:"deletePf Fz(s) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h Py(7px) Fw(500)",i13nModel:{sec:a,elm:"btn",elmt:"rm",itc:1,slk:"del-sym"},onClick:this.props.onDeletePositions},r.a.createElement(Ce.Icon,{className:"H(13px) W(13px) Va(m)! deletePf:h_Fill($actionBlueHover) deletePf:h_Stk($actionBlueHover) Cur(a)! Px(6px) Mt(-3px)",asset:ke.a,height:13,color:"#0081f2"}),r.a.createElement(X.FormattedMessage,{id:"DELETE_SYMBOLS"}))):s?(p.push(r.a.createElement(J.I13nButton,{key:"save",className:"reorderPf Fz(s) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h Py(7px) Mend(30px) Fw(500)",i13nModel:{sec:a,elm:"btn",elmt:"dn",itc:1,slk:"save-order"},onClick:this.props.onReorderSave},r.a.createElement(Ce.Icon,{className:"H(13px) W(13px) Va(m)! reorderPf:h_Fill($actionBlueHover) reorderPf:h_Stk($actionBlueHover) Cur(a)! Px(6px) Mt(-3px)",asset:na.a,height:13,color:"#0081f2"}),r.a.createElement(X.FormattedMessage,{id:"SAVE"}))),p.push(r.a.createElement(J.I13nButton,{key:"reordercancel",className:"reorderPf Fz(s) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h Py(7px) Mend(30px) Fw(500)",i13nModel:{sec:a,elm:"btn",elmt:"cl",itc:1,slk:"cancel"},onClick:this.props.onReorderCancel},r.a.createElement(Ce.Icon,{className:"H(13px) W(13px) Va(m)! reorderPf:h_Fill($actionBlueHover) reorderPf:h_Stk($actionBlueHover) Cur(a)! Px(6px) Mt(-3px)",asset:Rt.a,height:13,color:"#0081f2"}),r.a.createElement(X.FormattedMessage,{id:"CANCEL"})))):(p.push(r.a.createElement(Pe.a,{key:"add-symbol",type:"link",menuClassName:"Start(0)",rapidSec:"pf-add-symbol",showTip:!0,autoFocus:!0,subSec:"pf_add_symbol",pfId:c,onAdd:this.props.onAddSymbol})),i?p.push(r.a.createElement(J.I13nButton,{key:"toggle",className:"expandPf Mt(2px) Fz(s) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Mstart(30px) Fw(500)",i13nModel:{sec:a,elm:"btn",elmt:"ct",itc:1,slk:"togg-all"},onClick:this.props.onTogglePositionExpandAll},r.a.createElement(Ce.Icon,{className:"H(13px) W(13px) Va(m)! expandPf:h_Fill($actionBlueHover) expandPf:h_Stk($actionBlueHover) Cur(a)! Px(6px) Mt(-3px)",asset:ca.a,height:13,color:"#0081f2"}),r.a.createElement(X.FormattedMessage,{id:"EXPAND_SLASH_COLLAPSE_ALL"}))):o||p.push(r.a.createElement(J.I13nButton,{key:"reorder",className:"reorderPf Mt(2px) Fz(s) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Mstart(30px) Fw(500)",i13nModel:{sec:a,elm:"btn",elmt:"ct",itc:1,slk:"reorder"},"data-test":"reorder-positions",onClick:this.props.onReorderStart},r.a.createElement(Ce.Icon,{className:"H(13px) W(13px) Va(m)! reorderPf:h_Fill($actionBlueHover) reorderPf:h_Stk($actionBlueHover) Cur(a)! Px(6px) Mt(-3px)",asset:It.a,height:13,color:"#0081f2"}),r.a.createElement(X.FormattedMessage,{id:"REORDER"}))))),n&&(p.push(r.a.createElement(J.I13nButton,{key:"editview",className:"reorderPf Mt(2px) Fz(s) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Mx(30px) Fw(500)",i13nModel:{sec:a,elm:"btn",elmt:"ct",itc:1,slk:"edit-view"},onClick:this.props.onEditView},r.a.createElement(Ce.Icon,{className:"H(13px) W(13px) Va(m)! reorderPf:h_Fill($actionBlueHover) reorderPf:h_Stk($actionBlueHover) Cur(a)! Px(6px) Mt(-3px)",asset:oa.a,height:13,color:"#0081f2"}),r.a.createElement(X.FormattedMessage,{id:"EDIT_VIEW"}))),p.push(r.a.createElement(J.I13nButton,{key:"deleteview",className:"reorderPf Mt(2px) Fz(s) Bd(0) C($c-fuji-blue-1-b) C($actionBlueHover):h P(0) Fw(500)",i13nModel:{sec:a,elm:"btn",elmt:"rm",itc:1,slk:"del-view"},onClick:this.props.onDeleteView},r.a.createElement(Ce.Icon,{className:"H(13px) W(13px) Va(m)! reorderPf:h_Fill($actionBlueHover) reorderPf:h_Stk($actionBlueHover) Cur(a)! Px(6px) Mt(-3px)",asset:ke.a,height:13,color:"#0081f2"}),r.a.createElement(X.FormattedMessage,{id:"DELETE_VIEW"})))),o||d||p.push(r.a.createElement("span",{key:"currency",className:"C($c-fuji-grey-j) Fz(s) Mstart(30px)"},r.a.createElement(X.FormattedMessage,{id:"CURRENCY_NOTICE",values:{currency:m}}))),r.a.createElement("div",{className:e},p)}}ma.displayName="PortfolioResultToolbar",ma.propTypes={className:i.a.string,portfolio:i.a.object.isRequired,rapidSec:i.a.string.isRequired,onReorderStart:i.a.func,onReorderSave:i.a.func,onReorderCancel:i.a.func,onAddSymbol:i.a.func,isReordering:i.a.bool,isCustomView:i.a.bool,isHoldingsView:i.a.bool,onDeleteView:i.a.func,onDeletePositions:i.a.func,onEditView:i.a.func,quotes:i.a.string,onTogglePositionExpandAll:i.a.func},ma.defaultProps={className:"Mb(15px)",rapidSec:"pf-cntrl"};var da=ma;class pa extends r.a.PureComponent{constructor(){super(),this.onSubmit=this.onSubmit.bind(this),this.onClose=this.onClose.bind(this),this.state={errorMessage:null}}onSubmit(e){e.preventDefault(),this.context.executeAction(ae.a,{pfId:this.props.pfId,posIds:this.props.posIds}),this.onClose()}onClose(){"function"==typeof this.props.onClearCheckbox&&this.props.onClearCheckbox()}render(){const{hasError:e}=this.props;return r.a.createElement(ge.a,{rapidSec:"fin-delete-positions",onSubmit:this.onSubmit,titleMessageId:"CONFIRM_DELETE",errorMessageId:e&&"DELETE_SYMBOLS_ERROR",onClose:this.onClose,submitMessageId:"CONFIRM"},r.a.createElement("p",{className:"M(0) Mb(10px) P(0)"},r.a.createElement(X.FormattedMessage,{id:"CONFIRM_DELETE_TICKER",values:{symbol:this.props.symbols.join(",")}})))}}pa.displayName="DeletePositionsPopup",pa.propTypes={pfId:i.a.string,posIds:i.a.array,symbols:i.a.array,onClearCheckbox:i.a.func,hasError:i.a.bool},pa.defaultProps={symbols:[]},pa.contextTypes={intl:i.a.object.isRequired,executeAction:i.a.func.isRequired};var ua=K()(pa,[o.a],(e,t)=>{return{hasError:e.getStore(o.a).hasError(x.h)}});function ha(e,t){const{pfId:a,pfPrefix:s="portfolio",viewPrefix:r="view",viewId:n}=t;if(!a)throw u.a.http.badRequest("deleteView: missing `pfId`");if(!n)throw u.a.http.badRequest("deleteView: missing `viewId`");const i=e.request.user.guid;if(!i)throw u.a.http.badRequest("deleteView: Unable to fetch user guid");return Object(h.b)(e,{resource:"tachyon.portfolioView",params:{userId:i,viewId:n},method:"delete"}).then(()=>{if(e.executeAction(G.a.hide),window&&window.localStorage){window.localStorage.getItem(x.z)===n&&window.localStorage.setItem(x.z,"v1")}e.executeAction(Q.a,{url:`/${s}/${a}/${r}/v1`}),e.dispatch("FIN_USR_VIEW_DELETE",{viewId:n})}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:x.i}),t})}class fa extends r.a.PureComponent{constructor(){super(),this.onSubmit=this.onSubmit.bind(this),this.state={errorMessage:null}}onSubmit(e){this.context.executeAction(ha,{pfId:this.props.pfId,viewPrefix:this.props.viewPrefix,pfPrefix:this.props.pfPrefix,viewId:this.props.viewId})}render(){const{hasError:e,viewName:t}=this.props;return r.a.createElement(ge.a,{rapidSec:"fin-delete-view",onSubmit:this.onSubmit,titleMessageId:"DELETE_VIEW_TITLE",subTitleMessage:t,errorMessageId:e&&"DELETE_VIEW_ERROR",submitMessageId:"CONFIRM",submitI13nModel:{slk:"submit",itc:0,elm:"btn",elmt:"done",rspns:"nav"}})}}fa.displayName="DeleteViewPopup",fa.propTypes={pfId:i.a.string,viewId:i.a.string,viewName:i.a.string,pfPrefix:i.a.string,viewPrefix:i.a.string,hasError:i.a.bool},fa.defaultProps={pfPrefix:"portfolio",viewPrefix:"view"},fa.contextTypes={executeAction:i.a.func.isRequired};var ga=K()(fa,[o.a],(e,t)=>{return{hasError:e.getStore(o.a).hasError(x.i)}});function ba(e,t){const{pfId:a,positionIndex:s,operations:r}=t;if(!a)throw u.a.http.badRequest("insertLot: missing `pfId`");if(void 0===s)throw u.a.http.badRequest("insertLot: missing `positionIndex`");if(void 0===r)throw u.a.http.badRequest("insertLot: missing `operations`");const n=e.request.user.guid;if(!n)throw u.a.http.badRequest("insertLot: Unable to fetch user guid");return Object(h.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:n,pfId:a},method:"update",body:{parameters:{userId:n,userIdType:"guid",pfId:a,fullResponse:!1},operations:r}}).then(()=>Object(h.b)(e,{resource:"tachyon.portfolio",params:{userId:n,pfIds:a,fields:"quantity,purchasePrice,currentMarketValue,dailyPercentGain,dailyGain,totalPercentGain,totalGain"},method:"read"})).then(t=>{t=Object(x.Z)(a,t),e.dispatch("FIN_PF_LIST_UPDATE_POSITION",{pfId:a,positionIndex:s,position:t.list.positions[s]})}).catch(e=>{throw e})}var xa=a(675),Ea=a.n(xa);function ya(e,t){const{pfId:a,positionIndex:s,lots:r,savedDate:n}=t;if(!a)throw u.a.http.badRequest("updateLots: missing `pfId`");if(void 0===s)throw u.a.http.badRequest("updateLots: missing `positionIndex`");if(!r)throw u.a.http.badRequest("updateLots: missing `lots`");const i=e.request.user.guid;if(!i)throw u.a.http.badRequest("updateLots: Unable to fetch user guid");return e.dispatch("FIN_PF_LIST_UPDATE_POSITION",{pfId:a,positionIndex:s,position:{isLoading:!0}}),Object(h.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:i,pfId:a},method:"update",body:{parameters:{userId:i,userIdType:"guid",pfId:a,fullResponse:!1},operations:r.map(e=>Object.assign({operation:"lot_update"},e))}}).then(()=>Object(h.b)(e,{resource:"tachyon.portfolio",params:{userId:i,pfIds:a,fields:"quantity,purchasePrice,currentMarketValue,dailyPercentGain,dailyGain,totalPercentGain,totalGain"},method:"read"})).then(t=>{t=Object(x.Z)(a,t),e.dispatch("FIN_PF_LIST_UPDATE_POSITION",{pfId:a,positionIndex:s,position:Object.assign({isLoading:!1,savedDate:n||new Date},t.list.positions[s])})}).catch(e=>{throw e})}function Na(e,t){const{pfId:a,symbol:s,positionIndex:r,lotId:n}=t;if(!a)throw u.a.http.badRequest("deleteLot: missing `pfId`");if(!s)throw u.a.http.badRequest("deleteLot: missing `symbol`");if(void 0===r)throw u.a.http.badRequest("deleteLot: missing `positionIndex`");if(!n)throw u.a.http.badRequest("deleteLot: missing `lotId`");const i=e.request.user.guid;if(!i)throw u.a.http.badRequest("deleteLot: Unable to fetch user guid");return Object(h.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:i,pfId:a},method:"update",body:{parameters:{userId:i,userIdType:"guid",pfId:a,fullResponse:!1},operations:[{operation:"lot_delete",symbol:s,lotId:n}]}}).then(()=>Object(h.b)(e,{resource:"tachyon.portfolio",params:{userId:i,pfIds:a,fields:"quantity,purchasePrice,currentMarketValue,dailyPercentGain,dailyGain,totalPercentGain,totalGain"},method:"read"})).then(t=>{const s=(t=Object(x.Z)(a,t)).list.positions[r];s.lots||(s.lots=null,s.quantity=null,s.purchasePrice=null,s.currentMarketValue=null,s.dailyPercentGain=null,s.dailyGain=null,s.totalPercentGain=null,s.totalGain=null),e.dispatch("FIN_PF_LIST_UPDATE_POSITION",{pfId:a,positionIndex:r,position:s})}).catch(e=>{throw e})}const Ca="-",Pa=864e5;class wa extends r.a.PureComponent{constructor(){super(),this.onTradeDateInputBlur=this.onTradeDateInputBlur.bind(this),this.onQuantityInputBlur=this.onQuantityInputBlur.bind(this),this.onPurchasePriceInputBlur=this.onPurchasePriceInputBlur.bind(this),this.onCommentInputBlur=this.onCommentInputBlur.bind(this),this.onHighLimitInputBlur=this.onHighLimitInputBlur.bind(this),this.onLowLimitInputBlur=this.onLowLimitInputBlur.bind(this),this.onDeleteLot=this.onDeleteLot.bind(this)}onTradeDateInputBlur(e){const{pfId:t,positionIndex:a,lot:s}=this.props,r=e.target.value?e.target.value.replace(/-/g,""):"0";r!==String(s.tradeDate)&&this.context.executeAction(ya,{pfId:t,positionIndex:a,lots:[{lotId:s.lotId,tradeDate:r}]})}onQuantityInputBlur(e){const{pfId:t,positionIndex:a,lot:s}=this.props,r=e.target.value||0;r!==String(s.quantity)&&this.context.executeAction(ya,{pfId:t,positionIndex:a,lots:[{lotId:s.lotId,quantity:r}]})}onPurchasePriceInputBlur(e){const{pfId:t,positionIndex:a,lot:s}=this.props,r=e.target.value||0;r!==String(s.purchasePrice)&&this.context.executeAction(ya,{pfId:t,positionIndex:a,lots:[{lotId:s.lotId,purchasePrice:r}]})}onCommentInputBlur(e){const{pfId:t,positionIndex:a,lot:s}=this.props,r=e.target.value;r!==String(s.comment)&&this.context.executeAction(ya,{pfId:t,positionIndex:a,lots:[{lotId:s.lotId,comment:r}]})}onHighLimitInputBlur(e){const{pfId:t,positionIndex:a,lot:s}=this.props,r=e.target.value||0;r!==String(s.highLimit)&&this.context.executeAction(ya,{pfId:t,positionIndex:a,lots:[{lotId:s.lotId,highLimit:r}]})}onLowLimitInputBlur(e){const{pfId:t,positionIndex:a,lot:s}=this.props,r=e.target.value||0;r!==String(s.lowLimit)&&this.context.executeAction(ya,{pfId:t,positionIndex:a,lots:[{lotId:s.lotId,lowLimit:r}]})}onDeleteLot(){const{pfId:e,positionIndex:t,symbol:a,lot:s}=this.props;this.context.executeAction(Na,{pfId:e,positionIndex:t,symbol:a,lotId:s.lotId})}render(){const{symbol:e,regularMarketPrice:t,lot:a,priceHint:s,isQuoteStreaming:n,rapidSec:i}=this.props,o=this.context.session.dimensions.lang||"en-US",l=a.quantity,c=a.purchasePrice,m=a.currentMarketValue,d=a.dailyPercentGain/100,p=a.dailyGain,u=a.totalPercentGain/100,h=a.totalGain,f=a.annualGainPercentage/100,g=m/t,b=m-h,E=m-p,y=isNaN(l)?Ca:null,N=a.tradeDate;let C,P,w;return a.tradeDate&&8===a.tradeDate.length&&(P=`${N.substr(0,4)}-${N.substr(4,2)}-${N.substr(6,2)}`,C=new Date(P),w=365/Math.floor(((new Date).getTime()-C.getTime())/Pa)),r.a.createElement("tr",{className:"Bgc($extraLightBlue):h"},r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m) Pos(r)"},r.a.createElement(Ce.Icon,{className:"Pos(a) T(9px) Start(16px) D(ib) Fill($c-fuji-grey-d)! Stroke($c-fuji-grey-d)!",asset:Ea.a,height:15}),r.a.createElement("input",{className:"Fz(xs) Ff(ss) Bxz(bb) W(100%) H(25px) P(4px) Bdw(1px) Bds(s) Bdc($c-fuji-grey-d) Ta(end)",type:"date",defaultValue:P,onBlur:this.onTradeDateInputBlur})),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m)"},r.a.createElement("input",{className:"Fz(xs) Ff(ss) Bxz(bb) W(100%) H(25px) P(4px) Bdw(1px) Bds(s) Bdc($c-fuji-grey-d) Ta(end)",type:"number",step:"1",defaultValue:l,onBlur:this.onQuantityInputBlur})),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m)"},r.a.createElement("input",{className:"Fz(xs) Ff(ss) Bxz(bb) W(100%) H(25px) P(4px) Bdw(1px) Bds(s) Bdc($c-fuji-grey-d) Ta(end)",type:"number",step:"0.01",min:"0",defaultValue:c,onBlur:this.onPurchasePriceInputBlur})),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m) Fz(s) Ta(end)"},y||r.a.createElement(Xe.a,{symbol:e,field:"regularMarketPrice",value:m,textColor:!1,config:{priceHint:s,transform:e=>e*g},streamingEnabled:n},Object(x.S)(m,s,"",o))),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m) Fz(s) Ta(end)"},r.a.createElement("div",{className:"Fz(s) Fw(b) Mb(2px)"},y||r.a.createElement(Xe.a,{symbol:e,field:"regularMarketChangePercent",value:d,textColor:!0,config:{priceHint:s},streamingEnabled:n},Object(x.S)(d,s,"percent",o))),r.a.createElement("div",{className:"Fz(xs)"},y||r.a.createElement(Xe.a,{symbol:e,field:"regularMarketPrice",value:p,textColor:!0,config:{priceHint:s,transform:e=>e*g-E},streamingEnabled:n},Object(x.S)(p,s,"",o)))),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m) Fz(s) Ta(end)"},r.a.createElement("div",{className:"Fz(s) Fw(b) Mb(2px)"},y||r.a.createElement(Xe.a,{symbol:e,field:"regularMarketPrice",value:u,textColor:!0,config:{priceHint:s,transform:e=>(e*g-b)/b,style:"percent"},streamingEnabled:n},Object(x.S)(u,s,"percent",o))),r.a.createElement("div",{className:"Fz(xs)"},y||r.a.createElement(Xe.a,{symbol:e,field:"regularMarketPrice",value:h,textColor:!0,config:{priceHint:s,transform:e=>e*g-b},streamingEnabled:n},Object(x.S)(h,s,"",o)))),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m) Fz(s) Fw(b) Ta(end)"},!isNaN(l)&&0!==l&&C?r.a.createElement(Xe.a,{symbol:e,field:"regularMarketPrice",value:f,textColor:!0,config:{priceHint:s,transform:e=>{const t=Math.pow(1+(e*g-b)/b,w)-1;return t>1e30?"∞":t<-1e30?"-∞":t},style:"percent"},streamingEnabled:n},Object(x.S)(f,s,"percent",o)):Ca),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m)"},r.a.createElement("input",{className:"Fz(xs) Ff(ss) Bxz(bb) W(100%) H(25px) P(4px) Bdw(1px) Bds(s) Bdc($c-fuji-grey-d) Ta(start)",type:"text",defaultValue:a.comment,onBlur:this.onCommentInputBlur})),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m)"},r.a.createElement("input",{className:"Fz(xs) Ff(ss) Bxz(bb) W(100%) H(25px) P(4px) Bdw(1px) Bds(s) Bdc($c-fuji-grey-d) Ta(end)",type:"number",min:"0",defaultValue:a.highLimit,onBlur:this.onHighLimitInputBlur})),r.a.createElement("td",{className:"Px(10px) Py(2px) Va(m)"},r.a.createElement("input",{className:"Fz(xs) Ff(ss) Bxz(bb) W(100%) H(25px) P(4px) Bdw(1px) Bds(s) Bdc($c-fuji-grey-d) Ta(end)",type:"number",min:"0",defaultValue:a.lowLimit,onBlur:this.onLowLimitInputBlur})),r.a.createElement("td",{className:"Px(0) Py(2px) Va(m)"},r.a.createElement(J.I13nButton,{className:"P(0) M(0) Fz(s)",i13nModel:{sec:i,slk:"holdings-delete-lot",elm:"btn",elmt:"ct",itc:1},onClick:this.onDeleteLot},r.a.createElement(Ce.Icon,{className:"D(ib) Fill($c-fuji-grey-f)! Stroke($c-fuji-grey-f)!",asset:ke.a,height:15}))))}}wa.displayName="PortfolioHoldingsTableRowLot",wa.propTypes={pfId:i.a.string.isRequired,positionIndex:i.a.number.isRequired,rapidSec:i.a.string.isRequired,symbol:i.a.string.isRequired,regularMarketPrice:i.a.number.isRequired,lot:i.a.object.isRequired,priceHint:i.a.number.isRequired,isQuoteStreaming:i.a.bool.isRequired},wa.defaultProps={rapidSec:""},wa.contextTypes={session:i.a.object.isRequired,executeAction:i.a.func.isRequired};var Sa=wa,Ia=a(371),Ma=a.n(Ia);const ka="-",va="https://s.yimg.com/uc/finance/dd-site/img/Loading_Small.svg";class Ta extends r.a.PureComponent{constructor(e){super(e),this.onInsertLot=this.onInsertLot.bind(this),this.onTogglePositionExpand=this.onTogglePositionExpand.bind(this)}onTogglePositionExpand(e,t){"function"==typeof this.props.onTogglePositionExpand&&this.props.onTogglePositionExpand(this.props.position.posId,t)}onInsertLot(e){this.context.executeAction(ba,{pfId:this.props.pfId,positionIndex:this.props.positionIndex,operations:[{operation:"lot_insert",symbol:this.props.position.symbol,sortOrder:this.props.position.lots&&this.props.position.lots.length||0}]}),this.onTogglePositionExpand(e,!0)}renderExpandedLots({isExpandable:e,isPositionExpand:t,position:a,rapidSec:s,pfId:n,positionIndex:i,symbol:o,regularMarketPrice:l,priceHint:c,isQuoteStreaming:m,quoteType:d}){if(e&&t)return r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"11",className:"Pb(10px) Pend(10px)"},r.a.createElement("table",{className:"Bgc(white) Mstart(25px) Tbl(f) BdT Bdtc($c-fuji-grey-c) Mend(a)"},r.a.createElement("colgroup",null,r.a.createElement("col",{className:"W(160px)"}),r.a.createElement("col",{className:"W(100px)"}),r.a.createElement("col",{className:"W(100px)"}),r.a.createElement("col",{className:"W(100px)"}),r.a.createElement("col",{className:"W(100px)"}),r.a.createElement("col",{className:"W(120px)"}),r.a.createElement("col",{className:"W(120px)"}),r.a.createElement("col",{className:"W(300px)"}),r.a.createElement("col",{className:"W(90px)"}),r.a.createElement("col",{className:"W(90px)"}),r.a.createElement("col",{className:"W(25px)"})),r.a.createElement("thead",{className:"Fz(xs) Fw(400) C($c-fuji-grey-i) Whs(nw)"},r.a.createElement("tr",null,r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(start)"},r.a.createElement(X.FormattedMessage,{id:"TD_TRADE_DATE"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"TD_SHARES"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"DC_COST_BASIS"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"MARKET_VALUE"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"DAY_GAIN"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"TOTAL_GAIN"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"DC_ANNUALIZED_GAIN"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(start)"},r.a.createElement(X.FormattedMessage,{id:"TD_NOTES"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(start)"},r.a.createElement(X.FormattedMessage,{id:"TD_HIGH_LIMIT"})),r.a.createElement("th",{className:"Fw(400) Pt(10px) Pb(5px) Px(10px) Ta(start)"},r.a.createElement(X.FormattedMessage,{id:"TD_LOW_LIMIT"})),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.lots.map(e=>r.a.createElement(Sa,{key:e.lotId,pfId:n,rapidSec:s,positionIndex:i,symbol:o,regularMarketPrice:l.raw,lot:e,priceHint:c,isQuoteStreaming:m})),r.a.createElement("tr",null,r.a.createElement("td",{className:"Px(10px) Pb(10px) Pt(5px) Fz(s)",colSpan:"2"},r.a.createElement(J.I13nButton,{className:"M(0) P(0) Fz(s) Cur(p) C($c-fuji-blue-1-b) Lh(25px)",i13nModel:{sec:s,slk:"holdings-add-lot",elm:"btn",elmt:"ct",itc:1},onClick:this.onInsertLot},r.a.createElement(Ce.Icon,{className:"D(ib) Fill($c-fuji-blue-1-b)! Stroke($c-fuji-blue-1-b)! Va(m)! Mend(5px)",asset:Le.a,height:13}),r.a.createElement(X.FormattedMessage,{id:"ADD_LOT"})),a.isLoading?r.a.createElement("span",{className:"Fl(end) W(25px) H(25px)"},r.a.createElement("img",{src:va,alt:"loading"})):a.savedDate?r.a.createElement("span",{className:"Fl(end) C($dataGreen) Fz(xs) Lh(25px)"},r.a.createElement(X.FormattedMessage,{id:"SAVED"})," ",r.a.createElement(X.FormattedTime,{value:a.savedDate,timeZoneName:"short"})):null))))))}render(){const{pfId:e,positionIndex:t,position:a,isQuoteStreaming:s,isPositionExpand:n,rapidSec:i,config:o={ui:{}}}=this.props,l=this.context.session.dimensions.lang||"en-US",{quoteType:c,symbol:m,priceHint:d,quantity:p}=a,u=Object(x.V)(a.purchasePrice),h=Object(x.V)(a.regularMarketPrice),g=Object(x.V)(a.regularMarketChangePercent),b=Object(x.V)(a.regularMarketChange),E=Object(x.V)(a.currentMarketValue),y=Object(x.V)(a.totalPercentGain),N=Object(x.V)(a.totalGain),C=Object(x.V)(a.dailyPercentGain),P=Object(x.V)(a.dailyGain),w=h.raw?E.raw/h.raw:1,S=E.raw-N.raw,I=E.raw-P.raw,M=isNaN(p)?ka:null,k=a.lots&&a.lots.length&&a.lots.filter(e=>e.comment).length||0,v=a.lots&&a.lots.length,T=Object(f.e)("quote",{symbol:m,comscoreEnabled:!0}),F=v&&o.ui&&o.ui.isExpandable;return r.a.createElement("tbody",{className:"Bgc($altRowColor)"},r.a.createElement("tr",{className:"H(4px)"}),r.a.createElement("tr",{className:"Bgc($extraLightBlue):h"},r.a.createElement("td",{className:"Py(10px) Pstart(5px) Va(m)"},F&&r.a.createElement(J.I13nButton,{className:"P(0) M(0)",i13nModel:{sec:i,slk:"holdings-"+m+"-expand",elm:"btn",elmt:"ct",itc:1},onClick:this.onTogglePositionExpand},r.a.createElement(Ce.Icon,{className:"D(ib) Fill($c-fuji-blue-1-b)! Stroke($c-fuji-blue-1-b)!",asset:n?nt.a:Ma.a,height:20}))),r.a.createElement("td",{className:"Py(10px) Pstart(5px) Ta(start)"},r.a.createElement("div",{className:"Mb(2px)"},c?r.a.createElement(le.a,{key:"quote",className:"Fw(b) Mb(2px) D(ib) C(searchBdrFoc) Fz(s) Td(n)",href:T,title:m,followLink:!1,i13nModel:{itc:0,elm:"qte",elmt:"link",sec:i}},m):r.a.createElement("div",{className:"Fw(500) D(ib) Ell C(black) Fz(s)",title:m},m)),r.a.createElement("div",{className:"Fz(xs)"},a.regularMarketPrice?r.a.createElement(Xe.a,{symbol:m,field:"regularMarketPrice",value:h.raw,textColor:!1,config:{priceHint:d},streamingEnabled:s},Object(x.S)(h.raw,d,"",l)):ka)),r.a.createElement("td",{className:"Py(10px) Pend(10px) Ta(end)"},r.a.createElement("div",{className:"Fz(s) Fw(b) Mb(2px)"},a.regularMarketChangePercent?r.a.createElement(Xe.a,{symbol:m,field:"regularMarketChangePercent",value:g.raw,textColor:!0,config:{priceHint:d},streamingEnabled:s},g.fmt):ka),r.a.createElement("div",{className:"Fz(xs)"},a.regularMarketChange?r.a.createElement(Xe.a,{symbol:m,field:"regularMarketChange",value:b.raw,textColor:!0,config:{priceHint:d},streamingEnabled:s},b.fmt):ka)),r.a.createElement("td",{className:"Py(10px) Pend(10px) Ta(end) Fz(s) Fw(b) Va(m)"},M||p),r.a.createElement("td",{className:"Py(10px) Pend(10px) Ta(end) Fz(s) Fw(b) Va(m)"},M||u.fmt),r.a.createElement("td",{className:"Py(10px) Pend(10px) Ta(end) Fz(s) Fw(b) Va(m)"},M||r.a.createElement(Xe.a,{symbol:m,field:"regularMarketPrice",value:E.raw,textColor:!1,config:{priceHint:d,transform:e=>e*w},streamingEnabled:s},Object(x.S)(E.raw,d,"",l))),r.a.createElement("td",{className:"Py(10px) Pend(10px) Ta(end)"},r.a.createElement("div",{className:"Fz(s) Fw(b) Mb(2px)"},M||r.a.createElement(Xe.a,{symbol:m,field:"regularMarketChangePercent",value:C.raw,textColor:!0,config:{priceHint:d},streamingEnabled:s},Object(x.S)(C.raw,d,"percent",l))),r.a.createElement("div",{className:"Fz(xs)"},M||r.a.createElement(Xe.a,{symbol:m,field:"regularMarketPrice",value:P.raw,textColor:!0,config:{priceHint:d,transform:e=>e*w-I},streamingEnabled:s},Object(x.S)(P.raw,d,"",l)))),r.a.createElement("td",{className:"Py(10px) Pend(10px) Ta(end)"},r.a.createElement("div",{className:"Fz(s) Fw(b) Mb(2px)"},M||r.a.createElement(Xe.a,{symbol:m,field:"regularMarketPrice",value:y.raw,textColor:!0,config:{priceHint:d,transform:e=>(e*w-S)/S,style:"percent"},streamingEnabled:s},Object(x.S)(y.raw,d,"percent",l))),r.a.createElement("div",{className:"Fz(xs)"},M||r.a.createElement(Xe.a,{symbol:m,field:"regularMarketPrice",value:N.raw,textColor:!0,config:{priceHint:d,transform:e=>e*w-S},streamingEnabled:s},Object(x.S)(N.raw,d,"",l)))),r.a.createElement("td",{className:"Py(10px) Pend(10px) Ta(end) Fz(s) Fw(n) Va(m)"},a.lots?r.a.createElement("span",{className:"Tt(l)"},a.lots.length," ",a.lots.length>1?r.a.createElement(X.FormattedMessage,{id:"TD_LOTS"}):r.a.createElement(X.FormattedMessage,{id:"TD_LOT"})):r.a.createElement(J.I13nButton,{className:"P(0) M(0) Fz(s) Cur(p) C($c-fuji-blue-1-b) Fw(500)",i13nModel:{sec:i,slk:"holdings-add-lot",elm:"btn",elmt:"ct",itc:1},onClick:this.onInsertLot},r.a.createElement(Ce.Icon,{className:"D(ib) Fill($c-fuji-blue-1-b)! Stroke($c-fuji-blue-1-b)! Mend(5px)",asset:Le.a,height:13}),r.a.createElement(X.FormattedMessage,{id:"ADD_LOT"}))),r.a.createElement("td",{className:"Py(10px) Pstart(10px) Ta(start) Fz(s) Fw(n) Va(m)"},k?r.a.createElement("span",{className:"Tt(l)"},k," ",k>1?r.a.createElement(X.FormattedMessage,{id:"TD_NOTES"}):r.a.createElement(X.FormattedMessage,{id:"TD_NOTE"})):ka),r.a.createElement("td",null,a.tradeable&&o.trading&&o.trading.enable&&r.a.createElement(ne.a,{className:"D(ib)",type:"trade-button",symbol:m,companyName:m,quoteType:a.quoteType,currentUrl:this.props.currentUrl,useDummyBroker:o.trading.useDummyBroker,rapidSec:"pf-trd-btn"}))),this.renderExpandedLots({isExpandable:F,isPositionExpand:n,position:a,rapidSec:i,pfId:e,positionIndex:t,symbol:m,regularMarketPrice:h,quoteType:c,priceHint:d,isQuoteStreaming:s}))}}Ta.displayName="PortfolioHoldingsTableRow",Ta.propTypes={pfId:i.a.string.isRequired,positionIndex:i.a.number.isRequired,position:i.a.object.isRequired,isQuoteStreaming:i.a.bool.isRequired,currentUrl:i.a.string.isRequired,config:i.a.object,rapidSec:i.a.string.isRequired,isPositionExpand:i.a.bool.isRequired,onTogglePositionExpand:i.a.func.isRequired},Ta.defaultProps={config:{}},Ta.contextTypes={session:i.a.object.isRequired,executeAction:i.a.func.isRequired};var Fa=Ta,Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const Da="-",Ba={valueUp:" C($dataGreen)",valueDown:" C($dataRed)"},_a=[{title:"TD_SHARES",field:"quantity",inputAttributes:{required:!0,step:"any",type:"number"},labelClassName:"W(1/3) Pend(10px)"},{title:"DC_COST_BASIS",field:"purchasePrice",inputAttributes:{step:"any",type:"number",min:0},labelClassName:"W(1/3) Pend(10px)"},{title:"TD_TRADE_DATE",field:"tradeDate",inputAttributes:{type:"date"},inputClassName:"Fz(s) C($c-fuji-grey-j)",labelClassName:"W(1/3)"},{title:"TD_HIGH_LIMIT",field:"highLimit",inputAttributes:{step:"any",type:"number",min:0},labelClassName:"W(1/2) Pend(10px)"},{title:"TD_LOW_LIMIT",field:"lowLimit",inputAttributes:{step:"any",type:"number",min:0},labelClassName:"W(1/2)"},{title:"TD_NOTES",field:"comment",inputAttributes:{type:"text"},labelClassName:"W(100%)"}];class Oa extends r.a.PureComponent{constructor(e){super(e),this.onTogglePortfolioItem=this.onTogglePortfolioItem.bind(this),this.onSaveLot=this.onSaveLot.bind(this),this.onAddLot=this.onAddLot.bind(this),this.onEditLot=this.onEditLot.bind(this),this.onDeleteLot=this.onDeleteLot.bind(this),this.onCancel=this.onCancel.bind(this),this.state={showLot:!1,isPositionExpand:!!e.isPositionExpand}}componentWillReceiveProps(e){e.isPositionExpand!==this.state.isPositionExpand&&this.setState({isPositionExpand:e.isPositionExpand})}onSaveLot(e){e.preventDefault();const t=e.currentTarget,{showLot:a}=this.state,s={};if(["purchasePrice","quantity","tradeDate","highLimit","lowLimit","comment"].forEach(e=>{const a=t[e]&&t[e].value;(a||0===a)&&(s[e]=a)}),s.tradeDate&&(s.tradeDate=s.tradeDate.replace(/-/g,"")),!isNaN(s.quantity)){if(-1===a)this.context.executeAction(ba,{pfId:this.props.pfId,positionIndex:this.props.positionIndex,operations:[Object.assign({},{operation:"lot_insert",symbol:this.props.position.symbol,sortOrder:this.props.position.lots&&this.props.position.lots.length||0},s)]});else{const e=this.props.position.lots[a]||null;e&&this.context.executeAction(ya,{pfId:this.props.pfId,positionIndex:this.props.positionIndex,lots:[Object.assign({},{lotId:e.lotId},s)]})}this.setState({showLot:!1})}}onTogglePortfolioItem(e,t){const a=void 0===t?!this.state.isPositionExpand:t;a!==this.state.isPositionExpand&&(this.setState({isPositionExpand:a}),"function"==typeof this.props.onPositionExpandToggle&&this.props.onPositionExpandToggle(this.props.position.posId,a))}onAddLot(){this.setState({showLot:-1})}onEditLot(e){const t=Number(e.currentTarget.getAttribute("data-index"));this.setState({showLot:t})}onDeleteLot(e){const t=this.props.position.lots[this.state.showLot]||null;t&&(this.context.executeAction(Na,{pfId:this.props.pfId,positionIndex:this.props.positionIndex,symbol:this.props.position.symbol,lotId:t.lotId}),this.setState({showLot:!1}))}onCancel(e){this.setState({showLot:!1})}renderLotForm(){const{rapidSec:e}=this.props,{lots:t}=this.props.position,{showLot:a}=this.state,s=a>-1?t[a]:null,n=this.context.intl.formatMessage;return r.a.createElement("form",{className:"Py(15px) Px(10px) BdT Bdtc($grey4) Bgc($panelBackground)",onSubmit:this.onSaveLot},_a.map(e=>{const{field:t}=e;return r.a.createElement("label",{key:t,className:"Bxz(bb) D(ib) Pt(15px) "+e.labelClassName},r.a.createElement("span",{className:"Fz(xs) C($c-fuji-grey-j)"},n({id:e.title})),r.a.createElement("br",null),r.a.createElement("input",Ra({name:t,className:"BdB Bdbc($grey4) O(n):f Ta(start) W(100%) Bgc(t) "+(e.inputClassName||""),defaultValue:s&&s[t]||""},e.inputAttributes)))}),r.a.createElement("div",{className:"Mt(15px)"},r.a.createElement(J.I13nButton,{className:"M(0) Fz(s) Cur(p) Bdrs(3px) C(white) Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h Fw(500) Px(20px) Py(10px) Mend(15px)",type:"submit",i13nModel:{sec:e,slk:"save-lot",elm:"btn",elmt:"ct",itc:1}},r.a.createElement(X.FormattedMessage,{id:"SAVE_LOT"})),r.a.createElement(J.I13nButton,{className:"M(0) Fz(s) Cur(p) C($c-fuji-blue-1-b) Fw(500) Px(20px) Py(10px) Bd(0)",type:"button",onClick:this.onCancel,i13nModel:{sec:e,slk:"cl-save-lot",elm:"btn",elmt:"cl",itc:1}},r.a.createElement(X.FormattedMessage,{id:"CANCEL"})),s&&r.a.createElement(J.I13nButton,{className:"Fl(end) M(0) Fz(s) Cur(p) C($c-fuji-punch-a) Fw(500) Pstart(5px) Py(10px) Bd(0)",type:"button",onClick:this.onDeleteLot,i13nModel:{sec:e,slk:"holdings-delete-lot",elm:"btn",elmt:"ct",itc:1}},r.a.createElement(Ce.Icon,{className:"Fill($c-fuji-punch-a)! Stk($c-fuji-punch-a)! Va(m)! Mend(4px)",asset:ke.a,height:18}),r.a.createElement("span",{className:"Va(m)"},r.a.createElement(X.FormattedMessage,{id:"DELETE_LOT"})))))}renderExpandedLots({regularMarketPrice:e,isExpandable:t}){const{isQuoteStreaming:a,rapidSec:s}=this.props,{symbol:n,lots:i,priceHint:o}=this.props.position,l=this.context.session.dimensions.lang||"en-US";return[r.a.createElement("div",{key:"body",className:"Ovx(a)"},r.a.createElement("table",{className:"W(100%) Bxz(bb) Bgc($panelBackground) BdT Bdtc($grey4)"},r.a.createElement("colgroup",null,r.a.createElement("col",{className:"Miw(50px) Whs(nw) "}),r.a.createElement("col",{className:"Miw(50px) Whs(nw)"}),r.a.createElement("col",{className:"Miw(50px) Whs(nw)"}),r.a.createElement("col",{className:"Miw(50px) Whs(nw)"})),r.a.createElement("thead",null,r.a.createElement("tr",{className:"BdB Bdbc($grey4)"},r.a.createElement("th",{className:"Fw(400) P(10px) Pstart(15px) C(black) Fz(xs) Ta(start)"},r.a.createElement(X.FormattedMessage,{id:"TD_SHARES"})),r.a.createElement("th",{className:"Fw(400) P(10px) Pstart(15px) C(black) Fz(xs) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"MARKET_VALUE"})),r.a.createElement("th",{className:"Fw(400) P(10px) Pstart(15px) C(black) Fz(xs) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"DAY_GAIN"})),r.a.createElement("th",{className:"Fw(400) P(10px) Pstart(15px) C(black) Fz(xs) Ta(end)"},r.a.createElement(X.FormattedMessage,{id:"TOTAL_GAIN"})))),r.a.createElement("tbody",null,i&&i.map((i,c)=>{const m=0!==i.quantity?null:Da,d=i.dailyPercentGain/100,p=i.totalPercentGain/100,u=e.raw?i.currentMarketValue/e.raw:1,h=i.currentMarketValue-i.dailyGain,f=i.currentMarketValue-i.totalGain;let g={className:"C(black) Fz(s) Fw(500) Bd(0) P(10px) M(0)"};return t&&(g={onClick:this.onEditLot,className:"C($c-fuji-blue-1-b) Fz(s) Fw(500) Bd(0) P(10px) M(0)"}),r.a.createElement("tr",{key:i.lotId,className:"BdB Bdbc($grey4)"},r.a.createElement("td",{className:"Fw(500) P(10px) Pstart(15px) C(black) Ta(start)"},r.a.createElement(J.I13nButton,Ra({"data-index":c},g,{i13nModel:{sec:s,slk:"edit-lot",itc:1,elm:"ct",elmt:"btn"}}),i.quantity)),r.a.createElement("td",{className:"Fw(500) P(10px) Pstart(15px) C(black) Ta(end)"},r.a.createElement(Xe.a,{symbol:n,field:"regularMarketPrice",value:i.currentMarketValue,textColor:!1,config:{priceHint:o,transform:e=>e*u},streamingEnabled:a},Object(x.S)(i.currentMarketValue,o,"",l))),r.a.createElement("td",{className:"Fw(500) P(10px) Pstart(15px) C(black) Ta(end)"},isNaN(i.dailyGain)||isNaN(d)?Da:[r.a.createElement("div",{key:"dailyPercentGain",className:"Fz(s) Fw(b) Mb(2px)"},m||r.a.createElement(Xe.a,{symbol:n,field:"regularMarketChangePercent",value:d,textColor:!0,config:{priceHint:o},streamingEnabled:a},Object(x.S)(d,o,"percent",l))),r.a.createElement("div",{key:"dailyGain",className:"Fz(xs) P(10px) Pstart(15px) C(black)"},m||r.a.createElement(Xe.a,{symbol:n,field:"regularMarketPrice",value:i.dailyGain,textColor:!0,config:{priceHint:o,transform:e=>e*u-h},streamingEnabled:a},Object(x.S)(i.dailyGain,o,"",l)))]),r.a.createElement("td",{className:"Fw(500) P(10px) Pstart(15px) C(black) Ta(end)"},isNaN(i.totalGain)||isNaN(p)?Da:[r.a.createElement("div",{key:"totalPercentGain",className:"Fz(s) Fw(b) Mb(2px)"},m||r.a.createElement(Xe.a,{symbol:n,field:"regularMarketPrice",value:p,textColor:!0,config:{priceHint:o,transform:e=>(e*u-f)/f,style:"percent"},streamingEnabled:a},Object(x.S)(p,o,"percent",l))),r.a.createElement("div",{key:"totalGain",className:"Fz(xs) P(10px) Pstart(15px) C($c-fuji-grey-j)"},m||r.a.createElement(Xe.a,{symbol:n,field:"regularMarketPrice",value:i.totalGain,textColor:!0,config:{priceHint:o,transform:e=>e*u-f},streamingEnabled:a},Object(x.S)(i.totalGain,o,"",l)))]))})))),t?r.a.createElement("div",{key:"footer",className:"Pstart(5px)"},r.a.createElement(J.I13nButton,{className:"M(0) Fz(s) Cur(p) C($c-fuji-blue-1-b) Fw(500) P(10px)",i13nModel:{sec:s,slk:"holdings-add-lot",elm:"btn",elmt:"ct",itc:1},onClick:this.onAddLot},r.a.createElement(Ce.Icon,{className:"D(ib) Fill($c-fuji-blue-1-b)! Stroke($c-fuji-blue-1-b)! Va(m)! Mend(5px)",asset:Le.a,height:13}),r.a.createElement(X.FormattedMessage,{id:"ADD_LOT"}))):null]}render(){const{className:e,position:t,isQuoteStreaming:a,config:s={}}=this.props,{isPositionExpand:n,showLot:i}=this.state;if(!t)return null;const{symbol:o,quantity:l,priceHint:c,lots:m}=t,d=Object(x.V)(t.regularMarketPrice),p=Object(x.V)(t.currentMarketValue),u=Object(x.V)(t.dailyGain),h=Object(x.V)(t.dailyPercentGain),f=Object(x.V)(t.regularMarketChangePercent),g=Object(x.V)(t.regularMarketChange),b=A.a.decode(t.longName||t.shortName||""),E=m&&m.length>0,y=s.ui&&s.ui.isExpandable,N=d.raw?p.raw/d.raw:1,C=p.raw-u.raw;let P="";g.raw>0?P+=Ba.valueUp:g.raw<0&&(P+=Ba.valueDown);let w,S,I=isNaN(g.raw)?Da:r.a.createElement("span",{className:"Mstart(10px) Fw(500) "+P},r.a.createElement(Xe.a,{symbol:o,className:"Mend(4px)",field:"regularMarketChange",value:g.raw,textColor:!0,config:{priceHint:c},streamingEnabled:a},g.fmt),"(",r.a.createElement(Xe.a,{symbol:o,field:"regularMarketChangePercent",value:g.raw,textColor:!0,config:{priceHint:c},streamingEnabled:a},f.fmt),")");if(E){let e="";u.raw>0?e+=Ba.valueUp:u.raw<0&&(e+=Ba.valueDown);let t=E&&!isNaN(u.raw)?r.a.createElement("span",{className:"Fw(500) Fl(end) "+e},r.a.createElement(Xe.a,{symbol:o,className:"Mend(4px)",field:"regularMarketPrice",value:u.raw,textColor:!0,config:{priceHint:c,transform:e=>e*N-C},streamingEnabled:a},u.fmt),"(",r.a.createElement(Xe.a,{symbol:o,field:"regularMarketChangePercent",value:h.raw,textColor:!0,config:{priceHint:c},streamingEnabled:a},h.fmt),")"):Da;w=[r.a.createElement("div",{key:"marketValue",className:"C($c-fuji-grey-j) Mt(10px) Pt(10px) BdT Bdtc($finLightGrayAlt) Mb(5px)"},r.a.createElement("span",null,r.a.createElement(X.FormattedMessage,{id:"TOTAL_MARKET_VALUE"})),r.a.createElement("span",{className:"Fl(end) Fw(500) C(black)"},r.a.createElement(Xe.a,{symbol:o,field:"regularMarketPrice",value:p.raw,textColor:!1,config:{priceHint:c,transform:e=>e*N},streamingEnabled:a},p.fmt))),r.a.createElement("div",{key:"gain",className:"C($c-fuji-grey-j)"},r.a.createElement("span",null,r.a.createElement(X.FormattedMessage,{id:"DAY_GAIN"})),t)]}S=n?st.a:nt.a;let M,k,v=r.a.createElement(Ce.Icon,{className:"Fill(black)! Stk(black)! H(16px) Va(m)! Cur(a)",asset:S,height:16});return t.tradeable&&s.trading&&s.trading.enable&&(M=r.a.createElement(ne.a,{className:"D(ib) Pstart(10px) Pb(10px) Mend(30px) D(n)--print Us(n)",type:"trade-button",isMini:!0,symbol:o,companyName:b,quoteType:t.quoteType,currentUrl:this.props.currentUrl,useDummyBroker:s.trading.useDummyBroker,rapidSec:"pf-trd-btn"})),!1!==i?k=this.renderLotForm():n&&(k=this.renderExpandedLots({regularMarketPrice:d,isExpandable:y})),r.a.createElement("li",{className:e},r.a.createElement("div",{className:"Cur(p) Px(15px) Py(15px)",onClick:this.onTogglePortfolioItem},r.a.createElement("span",{className:"Fw(b)"},t.symbol),r.a.createElement("span",{className:"Fw(500) Mstart(10px)"},r.a.createElement(Xe.a,{symbol:o,field:"regularMarketPrice",value:d.raw,textColor:!1,config:{priceHint:c},streamingEnabled:a},d.fmt)),I,r.a.createElement("span",{className:"Fl(end) Mt(8px)"},M,v),r.a.createElement("div",{className:"C($c-fuji-blue-1-b) Fz(xs)"},r.a.createElement(X.FormattedMessage,{id:"SHARES_NUMBER",values:{shares:l||0}})),w),k)}}Oa.displayName="PortfolioHoldingsItem",Oa.propTypes={className:i.a.string,pfId:i.a.string.isRequired,positionIndex:i.a.number.isRequired,position:i.a.object.isRequired,isQuoteStreaming:i.a.bool.isRequired,currentUrl:i.a.string.isRequired,config:i.a.object,rapidSec:i.a.string.isRequired,isPositionExpand:i.a.bool,onPositionExpandToggle:i.a.func},Oa.defaultProps={className:"Bgc(white) Mb(10px) Bxsh($boxAreaShadow)",config:{},isQuoteStreaming:!0,isPositionExpand:!1},Oa.contextTypes={session:i.a.object.isRequired,intl:i.a.object.isRequired,executeAction:i.a.func.isRequired};var Aa=Oa;const La=[{className:"Fw(400) Py(5px) Pstart(5px) Pend(10px) Bgc($extraLightBlue):h Ta(start)",isSortable:!0,column:"symbol",i18nId:"TD_SYMBOL"},{className:"Fw(400) Py(5px) Px(10px) Bgc($extraLightBlue):h Ta(end)",isSortable:!0,column:"regularMarketChangePercent",i18nId:"TD_CHANGE"},{className:"Fw(400) Py(5px) Px(10px) Bgc($extraLightBlue):h Ta(end)",isSortable:!0,column:"quantity",i18nId:"TD_SHARES"},{className:"Fw(400) Py(5px) Px(10px) Bgc($extraLightBlue):h Ta(end)",isSortable:!0,column:"purchasePrice",i18nId:"DC_COST_BASIS"},{className:"Fw(400) Py(5px) Px(10px) Bgc($extraLightBlue):h Ta(end)",isSortable:!0,column:"currentMarketValue",i18nId:"TD_MARKET_VALUE"},{className:"Fw(400) Py(5px) Px(10px) Bgc($extraLightBlue):h Ta(end)",isSortable:!0,column:"dailyPercentGain",i18nId:"DAILY_GAIN"},{className:"Fw(400) Py(5px) Px(10px) Bgc($extraLightBlue):h Ta(end)",isSortable:!0,column:"totalPercentGain",i18nId:"TOTAL_GAIN"},{className:"Fw(400) Py(5px) Px(10px) Bgc($extraLightBlue):h Ta(end)",isSortable:!1,i18nId:"DC_NO_OF_LOTS"},{className:"Fw(400) Py(5px) Px(10px) Bgc($extraLightBlue):h Ta(start)",isSortable:!1,i18nId:"TD_NOTES"}],ja={isSortable:!0,isExpandable:!0},$a={isSortable:!1,isExpandable:!1};class Va extends r.a.PureComponent{constructor(e,t){super(e,t),this.onTogglePositionExpand=this.onTogglePositionExpand.bind(this),this.isLightweightBrowser=Object(f.A)(t),this.state={expandedPositions:{},sortingColumn:null,isSortingReversely:!1,sortedPositions:e.positions}}componentWillReceiveProps(e){e.positions!==this.props.positions&&this.setState({sortingColumn:null,isSortingReversely:!1,sortedPositions:e.positions})}togglePositionExpandAll(){let e=!1,{expandedPositions:t,sortedPositions:a}=this.state;for(let s=0;s<a.length;s++)if(!t[a[s].posId]){e=!0;break}let s={};for(let t=0;t<a.length;t++)e?s[a[t].posId]=!0:delete s[a[t].posId];this.setState({expandedPositions:s})}onTogglePositionExpand(e,t){const{expandedPositions:a}=this.state;let s=!1;s=void 0===t?!a[e]:t;let r=Object.assign({},a);s?r[e]=s:delete r[e],this.setState({expandedPositions:r})}onHeaderClick(e){const{positions:t}=this.props,{sortingColumn:a,isSortingReversely:s,sortedPositions:r}=this.state;if(e!==a){const a=t.map((t,a)=>[t[e]&&t[e].raw||t[e]||0,a]).sort((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0).map(e=>t[e[1]]);this.setState({sortingColumn:e,isSortingReversely:!1,sortedPositions:a})}else a&&(s?this.setState({sortingColumn:null,isSortingReversely:!1,sortedPositions:t}):this.setState({isSortingReversely:!0,sortedPositions:r.reverse()}))}renderRows({sortedPositions:e,rapidSec:t,pfId:a,isQuoteStreaming:s,currentUrl:n,config:i,expandedPositions:o}){if(e)return e.map((e,l)=>r.a.createElement(Fa,{key:e.posId,pfId:a,rapidSec:t,positionIndex:l,position:e,isQuoteStreaming:s,currentUrl:n,config:i,isPositionExpand:!!o[e.posId],onTogglePositionExpand:this.onTogglePositionExpand}))}renderHoldingsList(){const{pfId:e,isQuoteStreaming:t,currentUrl:a,rapidSec:s,config:n}=this.props,{sortedPositions:i,expandedPositions:o}=this.state;return r.a.createElement("ul",{className:"List(n) P(10px) M(0) Bgc($altRowColor)"},i&&i.map((i,l)=>r.a.createElement(Aa,{key:i.posId,pfId:e,rapidSec:s,positionIndex:l,position:i,isQuoteStreaming:t,currentUrl:a,config:n,isPositionExpand:!!o[i.posId],onPositionExpandToggle:this.onTogglePositionExpand})))}render(){const{pfId:e,isQuoteStreaming:t,currentUrl:a,rapidSec:s,config:n,isMini:i}=this.props,{sortingColumn:o,isSortingReversely:l,sortedPositions:c,expandedPositions:m}=this.state;return this.isLightweightBrowser?n.ui=Object.assign({},$a,n.ui):n.ui=Object.assign({},ja,n.ui),n.trading=Object.assign({},{enable:!1,useDummyBroker:!1},n.trading),i?this.renderHoldingsList():r.a.createElement("table",{className:"Tbl(f) W(100%)"},r.a.createElement("colgroup",null,r.a.createElement("col",{className:"W(25px)"}),r.a.createElement("col",{className:"W(80px)"}),r.a.createElement("col",{className:"W(80px)"}),r.a.createElement("col",{className:"W(100px)"}),r.a.createElement("col",{className:"W(100px)"}),r.a.createElement("col",{className:"W(100px)"}),r.a.createElement("col",{className:"W(100px)"}),r.a.createElement("col",{className:"W(120px)"}),r.a.createElement("col",{className:"W(120px)"}),r.a.createElement("col",{className:"W(120px)"})),r.a.createElement("thead",{className:"BdB Bdc($c-fuji-grey-c) Fz(xs) Fw(400) C($c-fuji-grey-i) Whs(nw)"},r.a.createElement("tr",null,r.a.createElement("th",null),La.map(e=>{const{column:t,i18nId:a}=e,i=o===t?r.a.createElement("span",{className:"C(black) Fw(b)"},r.a.createElement(X.FormattedMessage,{id:a}),r.a.createElement("span",{className:"Pos(r) T(-1px)"},r.a.createElement(Ce.Icon,{className:"Va(t)! Fill(black)! Stk(black)! Pos(a)",asset:l?nt.a:st.a,height:14}))):r.a.createElement(X.FormattedMessage,{id:a}),c=e.isSortable&&n.ui.isSortable,m=e.className+(c?" Cur(p)":"");return c?r.a.createElement("th",{key:a,className:m},r.a.createElement(J.I13nButton,{className:"Fz(xs) Fw(400) C($c-fuji-grey-i)",i13nModel:{sec:s,slk:"holdings-"+t+"-thd",elm:"btn",elmt:"ct",itc:1},onClick:()=>this.onHeaderClick(t)},i)):r.a.createElement("th",{key:a,className:m},i)}),r.a.createElement("th",null))),this.renderRows({pfId:e,sortedPositions:c,rapidSec:s,isQuoteStreaming:t,currentUrl:a,config:n,expandedPositions:m}))}}Va.propTypes={pfId:i.a.string.isRequired,positions:i.a.array,isQuoteStreaming:i.a.bool.isRequired,currentUrl:i.a.string.isRequired,config:i.a.object,isMini:i.a.bool,rapidSec:i.a.string.isRequired},Va.defaultProps={config:{},isMini:!1},Va.contextTypes={session:i.a.object.isRequired};var Ha=Va;const za={PRE:{title:"PRE",price:"preMarketPrice",changePercent:"preMarketChangePercent"},POST:{title:"POST",price:"postMarketPrice",changePercent:"postMarketChangePercent"}};class qa extends r.a.PureComponent{render(){const{position:e,rapidSec:t,quoteStreaming:a}=this.props,{symbol:s,quoteType:n,marketState:i,priceHint:o}=e,l=Object(f.v)(this.context,"yahooapp")?Object(f.e)("quoteLeaf",{symbol:s,suffix:"details"}):Object(f.e)("quote",{symbol:s,comscoreEnabled:!0}),c=A.a.decode(e.longName||""),m=Object(x.V)(e.regularMarketPrice),d=Object(x.V)(e.regularMarketChangePercent);let p;if("REGULAR"!==i){let t;if(t=e.postMarketTime&&e.preMarketTime?e.preMarketTime>e.postMarketTime?"PRE":"POST":"POST"===i?"POST":"PRE",e[za[t].price]){const n=za[t].title,i=Object(x.V)(e[za[t].price]),l=Object(x.V)(e[za[t].changePercent]);p=r.a.createElement("div",{className:"D(ib) Fl(end) Ell Maw(40%)"},r.a.createElement("span",{key:"title",className:"Fz(s) Fw(500)"},r.a.createElement(X.FormattedMessage,{id:n}),":"),r.a.createElement("span",{key:"price",className:"Fz(s) Mstart(5px)"},r.a.createElement(Xe.a,{symbol:s,field:za[t].price,value:i.raw,textColor:!1,config:{priceHint:o},streamingEnabled:a},i.fmt)),r.a.createElement("span",{className:"Fz(s) Mstart(5px)"},r.a.createElement(Xe.a,{symbol:s,field:za[t].changePercent,value:l.raw,textColor:!0,bgColor:!1,config:{priceHint:o},streamingEnabled:a},l.fmt)))}}let u=[r.a.createElement("div",{key:"content",className:"Mb(5px)"},r.a.createElement("div",{className:"Fz(l) Fw(500) IbBox Miw(80px) Ell"},s),this.props.enableTrading&&!!n&&r.a.createElement(ne.a,{className:"IbBox Mstart(20px) Px(10px) Pb(10px)",type:"trade-button",isMini:!0,symbol:s,companyName:c,quoteType:e.quoteType,currentUrl:this.props.currentUrl,useDummyBroker:this.props.useDummyBroker,rapidSec:"pf-trd-btn"}),r.a.createElement("div",{className:"Fl(end) IbBox"},r.a.createElement("span",{className:"Fw(500) Fz(l) Mend(20px)"},r.a.createElement(Xe.a,{symbol:s,field:"regularMarketPrice",value:m.raw,textColor:!1,config:{priceHint:o},streamingEnabled:a},m.fmt)),r.a.createElement("span",{className:"Fw(500) Fz(l)"},r.a.createElement(Xe.a,{symbol:s,className:"Pend(10px) Bdrs(3px)",field:"regularMarketChangePercent",value:d.raw,textColor:!1,bgColor:!0,config:{priceHint:o},streamingEnabled:a},d.fmt)))),r.a.createElement("div",{key:"bottom"},r.a.createElement("div",{className:"Fz(s) Ell D(ib) "+(p?"Maw(60%) ":"")},c),p)];return u=n?r.a.createElement(le.a,{href:l,title:c,className:"D(ib) Py(10px) Px(15px) Td(n) C(black) Bxz(bb) W(100%)",i13nModel:{sec:t,slk:c,itc:0,elm:"qte",elmt:"link"}},u):r.a.createElement("div",{className:"D(ib) Py(10px) Px(15px) C(black) Bxz(bb) W(100%)"},u),r.a.createElement("li",{className:"BdB Bdbc($finLightGrayAlt)"},u)}}qa.displayName="PortfolioPositionsListItem",qa.propTypes={position:i.a.object.isRequired,rapidSec:i.a.string,quoteStreaming:i.a.bool,currentUrl:i.a.string,useDummyBroker:i.a.bool,enableTrading:i.a.bool},qa.contextTypes={session:i.a.object.isRequired};var Wa=qa,Ua=a(1821);const Ga={"1d":"1d","5d":"5d","1m":"1mo","6m":"6mo","1y":"1y",YTD:"ytd",Max:"max"},Ya=["#1a9af9","#1ac567","#f0126f","#9552ff","#45e3ff","#ff7b12","#400090","#30d3b6","#e20081","#787d82","#000","#ffb700"],Qa="1d";class Za extends r.a.PureComponent{constructor(){super(),this.onAddSymbol=this.onAddSymbol.bind(this),this.closeLightBox=this.closeLightBox.bind(this)}closeLightBox(){this.context.executeAction(G.a.hide)}onAddSymbol(e){this.context.executeAction(re.a,{pageParams:{pd:"modal"}}),this.context.executeAction(G.a.show,{component:Oe,componentProps:{type:"add-symbol",pfId:this.props.pfId,onCancel:this.closeLightBox},wrapperClass:"Pos(f) T(0) Start(0) End(0) B(0) W(100%) H(100%) Bgc(white)"})}render(){const{positions:e,className:t,rapidSec:a,quoteStreaming:s,quotes:n,isLinkedPortfolio:i}=this.props;let o;if(n){const t=e[0]&&e[0].symbol,a=e[0]&&e[0].quoteType,s=[];for(let t=1;t<e.length;t++)s.push(e[t].symbol);s.length+1<Ya.length&&(o=[r.a.createElement("ul",{key:"symbolList",className:"Mt(20px) Mstart(20px)"},[t].concat(s).map((e,t)=>r.a.createElement("li",{key:e,className:"Py(2px) Pstart(5px) Mend(20px) Fw(500) Fz(s) D(ib) Bdstartw(5px) Bdstarts(s)",style:{borderColor:Ya[t],color:Ya[t]}},e))),r.a.createElement(Ua.a,{key:"chart",className:"Bxz(bb) Px(20px)",containerClassName:"Mt(10px)",id:"multiquote-mobile",range:Qa,rangeMap:Ga,symbol:t,config:{hideToolbar:!0},quoteType:a,followFullChartLink:!1,height:160,showFullChartLink:!1,chartConfig:{comparisons:s}})])}return r.a.createElement("div",{className:t},r.a.createElement("ul",{className:"List(n) M(0) P(0)"},e.map(e=>{if(e)return r.a.createElement(Wa,{key:e.posId,position:e,quoteStreaming:s,rapidSec:a,enableTrading:this.props.enableTrading,useDummyBroker:this.props.useDummyBroker})})),n||i?null:r.a.createElement(J.I13nButton,{className:"add-sym-btn O(n) D(ib) Bxz(bb) C($c-fuji-blue-1-b) Fw(500) Py(10px) Px(15px) Fz(16px)",onClick:this.onAddSymbol,i13nModel:{sec:a,slk:"add-symbol",itc:1,elm:"btn",elmt:"ct"}},r.a.createElement(Ce.Icon,{asset:Le.a,height:14,color:"#0081f2",className:"H(14px) add-sym-btn:h_Fill($actionBlueHover)! add-sym-btn:h_Stk($actionBlueHover)! Mend(4px) Mt(-3px) Va(m)!"}),r.a.createElement(X.FormattedMessage,{id:"ADD_SYMBOL"})),o)}}Za.displayName="PortfolioPositionsList",Za.propTypes={quotes:i.a.string,pfId:i.a.string.isRequired,positions:i.a.array,rapidSec:i.a.string,className:i.a.string,quoteStreaming:i.a.bool,enableTrading:i.a.bool,useDummyBroker:i.a.bool,isLinkedPortfolio:i.a.bool},Za.defaultProps={className:"",rapidSec:"",quoteStreaming:!0,enableTrading:!1,useDummyBroker:!1},Za.contextTypes={session:i.a.object.isRequired,executeAction:i.a.func.isRequired};var Ka=Za,Xa=a(1550);const Ja=({className:e,valueClassName:t,title:a,value:s,dispValue:n,id:i,benchMarkValue:o})=>{const l={animation:!0,animationDuration:750,barPadding:20,barWidth:40,height:150,width:200,showText:!1,id:i,values:[s,o]};let c=n;return c||(c="number"==typeof s&&s.toFixed(1)||"-"),r.a.createElement("div",{className:"Bxz(bb) Va(t) "+e},r.a.createElement("div",{className:"Bd Bdrs(4px) Bdc($lightGrayBorder) P(15px)"},r.a.createElement("h3",{className:"Fz(14px) Fw(b) Mt(0) Mb(10px) Ta(start)"},a||"-"),r.a.createElement("div",{className:t},c),"number"==typeof s&&"number"==typeof o&&r.a.createElement(Xa.a,{type:"BarChart",className:"Ta(c) M(a)",options:l})))};Ja.displayName="PfCharacteristicsItem",Ja.propTypes={className:i.a.string,title:i.a.string,id:i.a.string,value:i.a.number,valueClassName:i.a.string,dispValue:i.a.string,benchMarkValue:i.a.number},Ja.defaultProps={className:"",valueClassName:"Fw(b) Fz(24px) Ta(start)"};var es=Ja,ts=a(628),as=a.n(ts),ss=a(355),rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const ns=({name:e,className:t,color:a})=>r.a.createElement("div",{className:"D(ib) Va(t) Bxsh($featurePromoImgShadow) Bdrs(4px) Px(10px) Py(4px) C($c-fuji-grey-j) Bdstartw(4px) Bdstarts(s) "+t,style:{borderLeftColor:a}},A.a.decode(e||""));ns.displayName="CharacteristicsPill",ns.propTypes={name:i.a.string,className:i.a.string,color:i.a.string};class is extends r.a.PureComponent{render(){const{pfName:e,characteristics:t,title:a,className:s,pillClassName:n,isMini:i}=this.props,{portfolioCharacteristics:o,benchmarkCharacteristics:l}=t||{},c=l&&l.symbol,m=i?2:3;let d;return d=o&&l?[{title:ss.PRICE_TO_EARNINGS,key:"priceToEarnings"},{title:ss.PRICE_TO_CASHFLOW,key:"priceToCashFlow"},{title:ss.EPS_GROWTH,key:"epsGrowth"},{title:ss.PRICE_TO_BOOK,key:"priceToBook"},{title:ss.MARKET_CAP,format:"currency",key:"marketCap"},{title:ss.DIVIDEND_YIELD,key:"dividendYield"}].map((e,t)=>{const a=(t+1)%m==0,s="currency"===e.format?{dispValue:Object(_.j)(this.context,o[e.key])}:{};return r.a.createElement(es,rs({key:e.key,id:e.key,className:"W(1/3) W(1/2)--mobp W(1/2)--mobl W(1/2)--tab768 W(1/2)--tab1024 Fl(start) Mb(15px) "+(a?"":"Pend(15px)"),title:e.title,value:o[e.key],valueClassName:i?"Fw(b) Fz(m) Ta(start)":void 0,benchMarkValue:l[e.key]},s))}):r.a.createElement("div",{className:"Ta(c) Pt(40px) Pb(50px)"},r.a.createElement(Ce.Icon,{className:"H(30px) W(30px) Va(m)! Fill($grayBorder)! Stk($grayBorder) Cur(a)! Mb(8px)",asset:as.a,height:30,color:"#9ea2af"}),r.a.createElement("div",{className:"Fw(b) Fz(m) Mb(5px) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"MSG_NO_DATA"}))),r.a.createElement("section",{className:s,"data-yaft-module":"pf-detail-characteristics"},r.a.createElement("h2",{className:"Fw(b) D(ib) "+(i?"Fz(l)":"Fz(16px)")},a),r.a.createElement("div",{className:n},r.a.createElement(ns,{name:e,className:"Mend(15px)",color:"#5964ff"}),c&&r.a.createElement(ns,{name:c,color:"#49c3fd"})),r.a.createElement("div",{className:"Mt(20px) Row"},d))}}is.displayName="PfCharacteristics",is.propTypes={characteristics:i.a.object,pillClassName:i.a.string,title:i.a.string,isMini:i.a.bool,pfName:i.a.string,className:i.a.string,rapidSec:i.a.string.isRequired},is.contextTypes={intl:i.a.object},is.defaultProps={rapidSec:"portfolio",isMini:!1,pillClassName:"Fl(end)",className:"Px(20px)--mobp Px(20px)--mobl Px(20px)--tab768 Px(20px)--tab1024",title:ss.PORTFOLIO_HOLDINGS_CHARACTERISTICS,pfName:""};var os=is,ls=a(1781);const cs=({beta:e,benchMark:t})=>{let a;if(e){const s="number"==typeof e.beta?e.beta:null,n=s>=1?"C($dataRed)":"C($dataGreen)",i=function(e){const t=(e+1.2)/4.4;return t<0?0:t>100?100:t}(e.beta);a=[r.a.createElement("div",{key:"head",className:"Pos(a) End(0) T(0) P(30px) W(20%) Ta(end)"},r.a.createElement("div",{className:"Fz(24px) Fw(b) "+n,"data-test":"beta-value"},s&&Object(x._0)(s,1)||"-"),r.a.createElement("div",{className:"Fw(b)"},e.riskDescription)),r.a.createElement("div",{key:"legend",className:"Mt(15px)"},r.a.createElement("div",{className:"D(ib) Va(m) H(0) W(0) Bds(s) Bdstartc(t) Bdendc(t) Bdbw(0px) Bdendw(8px) Bdtw(8px) Bdstartw(8px)",style:{borderTopColor:"#49c3fd"}}),r.a.createElement("div",{className:"Mstart(10px) D(ib) Va(m) C($c-fuji-grey-j)"},t)),r.a.createElement("div",{key:"content",className:"Mt(15px)"},r.a.createElement("div",{className:"D(ib) Va(m) C($dataGreen) Fw(500) W(15%) Ta(end)"},"β","<1",r.a.createElement("div",null,ss.LESS_RISKY)),r.a.createElement("div",{className:"D(ib) Va(m) W(70%) Bxz(bb) Px(15px)"},r.a.createElement("div",{className:"W(100%) Pos(r) Bgc($lightBackgroundGray) H(130px)--mv2 H(70px)"},r.a.createElement("div",{className:"W(4.5%) H(100%) BdEnd Bdc($c-fuji-grey-e) D(ib)"}),r.a.createElement("div",{className:"W(22.7%) H(100%) BdEnd Bdc($c-fuji-grey-e) D(ib)"}),r.a.createElement("div",{className:"W(22.7%) H(100%) BdEnd Bdc($c-fuji-grey-e) D(ib)"}),r.a.createElement("div",{className:"W(22.7%) H(100%) BdEnd Bdc($c-fuji-grey-e) D(ib)"}),r.a.createElement("div",{className:"W(22.7%) H(100%) BdEnd Bdc($c-fuji-grey-e) D(ib)"}),r.a.createElement("div",{className:"Pos(a) T(45%) W(100%)"},r.a.createElement(ls.a,{key:"traffic",value:i,containerClassName:"W(100%)"})),r.a.createElement("div",{className:"Pos(a) H(0) W(0) Bds(s) Bdstartc(t) Bdendc(t) Bdbw(0px) Bdendw(8px) Bdtw(8px) Bdstartw(8px) Start(49%) T(28px) T(54px)--mv2",style:{borderTopColor:"#49c3fd"}}),r.a.createElement("div",{className:"Pos(a) H(0) W(0) Bds(s) Bdstartc(t) Bdendc(t) Bdtw(0px) Bdendw(6px) Bdbw(6px) Bdstartw(6px) Bdbc(black) T(50px) T(80px)--mv2",style:{left:`calc(${100*i}% - 4px)`}}),r.a.createElement("div",{className:"Pos(a) W(50px) H(25px) T(56px) T(86px)--mv2 Bgc(black) Bdrs(10px)",style:{left:`calc(${100*i}% - 25px)`}},r.a.createElement("div",{className:"C(white) Fw(b) Fz(m) Ta(c) Mt(2px)"},Object(x._0)(e.beta,1)))),r.a.createElement("div",{className:"Mt(5px) C($c-fuji-grey-j)"},r.a.createElement("div",{className:"W(4.5%) Ta(end) IbBox Mstart(2px)"},"-1"),r.a.createElement("div",{className:"W(22.7%) Ta(end) IbBox Mstart(2px)"},"0"),r.a.createElement("div",{className:"W(22.7%) Ta(end) IbBox"},"1"),r.a.createElement("div",{className:"W(22.7%) Ta(end) IbBox Mstart(2px)"},"2"),r.a.createElement("div",{className:"W(22.7%) Ta(end) IbBox Mstart(2px)"},"3"))),r.a.createElement("div",{className:"D(ib) Va(m) C($dataRed) Fw(500) W(15%)"},"β",">1",r.a.createElement("div",null,ss.MORE_RISKY)))]}else a=r.a.createElement("div",{className:"Ta(c) Pt(40px) Pb(50px)"},r.a.createElement(Ce.Icon,{className:"H(30px) W(30px) Va(m)! Fill($grayBorder)! Stk($grayBorder) Cur(a)! Mb(8px)",asset:as.a,height:30,color:"#9ea2af"}),r.a.createElement("div",{className:"Fw(b) Fz(m) Mb(5px) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"MSG_NO_DATA"})));return r.a.createElement("section",{className:"Pos(r) Bdrs(4px) Bxsh($featurePromoImgShadow) Bxsh(n)--mobp Bxsh(n)--mobl Bxsh(n)--tab768 Bxz(bb) P(30px)"},r.a.createElement("div",{className:"W(80%) W(70%)--mobp"},r.a.createElement("h2",{className:"Fw(b) Fz(17px) Mb(15px)"},ss.BETA_TREND),r.a.createElement("p",{className:"LineClamp(2,35px) Mih(35px) Fz(s) C($c-fuji-grey-j)"},ss.BETA_DESCRIPTION)),a)};cs.displayName="BetaTrend",cs.propTypes={beta:i.a.object,benchMark:i.a.string},cs.defaultProps={benchMark:"S&P 500"};var ms=cs;const ds=({riskMetrics:e,benchMark:t},a)=>{let s;if(e){const n=e[0]&&"number"==typeof e[0].portfolioVolatility?e[0].portfolioVolatility:0,i=e[0]&&"number"==typeof e[0].benchmarkVolatility?e[0].benchmarkVolatility:0;let o="C($dataGreen)",l=ss.LOW;n>i&&(l=ss.HIGH,o="C($dataRed)");const c=[],m=[],d=[];for(let t=e.length-1;t>=0;t--){m.push(100*e[t].benchmarkVolatility),c.push(100*e[t].portfolioVolatility);const s=new Date(e[t].timestampInMillis).getMonth();d.push(a.intl.formatMessage({id:"CALENDAR_MONTH_"+s}))}const p={id:"lc-chart",data:[c,m],overlayClassName:"Pos(a) T(0) B(0) Start(0) End(0) Z(1)",height:160,spacingTop:10,spacingRight:55,spacingBottom:25,spacingLeft:5,dataColors:["#5964ff","#49c3fd"],dataIsPercentages:!0,yAxesLabels:d};s=[r.a.createElement("div",{key:"head",className:"Pos(a) End(0) T(0) P(30px) Ta(end)"},r.a.createElement("div",{className:"Fz(24px) Fw(b) "+o},r.a.createElement(X.FormattedNumber,{value:n,style:"percent",maximumFractionDigits:1})),r.a.createElement("div",{className:"Fw(b)"},`${l} ${ss.VOLATILITY}`)),r.a.createElement("div",{key:"legend",className:"Mb(10px) Mt(9px) Fz(12px) C($c-fuji-grey-j)"},r.a.createElement("div",{className:"Mend(20px) IbBox"},r.a.createElement("div",{className:"D(ib) W(18px) H(2px) Va(m) Mend(10px) Bgc($sigDevBlue) Bdrs(4px) Bds(s) Bdw(1px) Bdc($sigDevBlue)"}),r.a.createElement("div",{className:"D(ib) Va(m)"},ss.PORTFOLIO)),r.a.createElement("div",{className:"IbBox"},r.a.createElement("div",{className:"D(ib) W(18px) H(2px) Va(m) Mend(10px) Bgc($sectorColor) Bdrs(4px) Bds(s) Bdw(1px) Bdc($sectorColor)"}),r.a.createElement("div",{className:"D(ib) Va(m)"},t))),r.a.createElement("div",{key:"content"},r.a.createElement(Xa.a,{type:"LineChart",options:p}))]}else s=r.a.createElement("div",{className:"Ta(c) Pt(40px) Pb(50px)"},r.a.createElement(Ce.Icon,{className:"H(30px) W(30px) Va(m)! Fill($grayBorder)! Stk($grayBorder) Cur(a)! Mb(8px)",asset:as.a,height:30,color:"#9ea2af"}),r.a.createElement("div",{className:"Fw(b) Fz(m) Mb(5px) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"MSG_NO_DATA"})));return r.a.createElement("section",{className:"Pos(r) Bdrs(4px) Bxsh($featurePromoImgShadow) Bxsh(n)--mobp Bxsh(n)--mobl Bxsh(n)--tab768 Bxz(bb) P(30px)"},r.a.createElement("h2",{className:"Fw(b) Fz(17px) Mb(15px)"},ss.VOLATILITY),r.a.createElement("p",{className:"LineClamp(2,35px) Mih(35px) Fz(s) C($c-fuji-grey-j) Maw(80%) Maw(70%)--mobp"},ss.VOLATILITY_DESCRIPTION),s)};ds.displayName="Volatility",ds.propTypes={riskMetrics:i.a.array,benchMark:i.a.string},ds.defaultProps={benchMark:"S&P 500"},ds.contextTypes={intl:i.a.object.isRequired};var ps=ds;const us="-",hs="S&P 500";class fs extends r.a.PureComponent{render(){const{risk:e,isMini:t}=this.props,{riskMetrics:a,isEmpty:s}=e||{};let n;return n=s?r.a.createElement("div",{className:"Py(50px)"},r.a.createElement("div",{className:"M(a) Ta(c) Mb(10px)"},r.a.createElement(Ce.Icon,{className:"Va(m)! Mend(4px) Cur(a)! Fill($warningYellow)! Stk($warningYellow)!",asset:as.a,height:"30"})),r.a.createElement("div",{className:"Ta(c)"},r.a.createElement("h3",{className:"Fw(b) Fz(16px) Mb(10px)"},ss.NOT_ENOUGH_HISTORICAL),r.a.createElement("p",{className:"Fz(14px) Fw(400) Mb(15px) C($c-fuji-grey-j)"},ss.PORTFOLIO_HOLDINGS_HISTORY_MSG))):[r.a.createElement("div",{key:"header",className:"Mb(30px)"},r.a.createElement("div",{className:"W(1/2)--mv2 IbBox--mv2 Bxz(bb) Pend(15px)--mv2 Pend(0) Mb(15px) Mb(0)--mv2"},r.a.createElement(ms,{beta:a&&a[0]&&a[0].beta,benchMark:hs})),r.a.createElement("div",{className:"W(1/2)--mv2 IbBox--mv2 Bxz(bb)"},r.a.createElement(ps,{riskMetrics:a,benchMark:hs}))),a&&[r.a.createElement("h2",{key:"head",className:"Fz(17px) Fw(b) Mb(15px) Px(20px)--mobp Px(20px)--mobl Px(20px)--tab768"},ss.PORTFOLIO_RISK_MEASURES),r.a.createElement("table",{key:"table",className:"W(100%)"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"BdB Bdbc($finLightGrayAlt) H(28px) C($c-fuji-grey-j)"},r.a.createElement("th",{className:"Ta(start) Px(20px) Fw(400)! Fz(xs) Miw(100px)"},r.a.createElement(X.FormattedMessage,{id:"DATE"})),r.a.createElement("th",{className:"Ta(start) Pend(20px)--mv2 Pend(15px) Fw(400)! Fz(xs)"},r.a.createElement(X.FormattedMessage,{id:"SCREENER_FIELD_beta"})),r.a.createElement("th",{className:"Ta(end) Pend(20px)--mv2 Pend(15px) Fw(400)! Fz(xs) Miw(50px)"},ss.VOLATILITY),r.a.createElement("th",{className:"Ta(end) Fw(400)! Fz(xs) Miw(50px)"},r.a.createElement(X.FormattedMessage,{id:"ALPHA"})),r.a.createElement("th",{className:"W(100%)"}))),r.a.createElement("tbody",null,a.map((e,a)=>{let s="";return a%2!=0&&(s+=" Bgc($altRowColor)"),r.a.createElement("tr",{key:e.date+a,className:"tblRow Bgc($extraLightBlue):h BdB Bdbc($finLightGrayAlt) Bdbc($tableBorderBlue):h H(36px)"+s},r.a.createElement("td",{className:"Ta(start) Px(20px) tblRow:h_Bgc($extraLightBlue) Miw(100px)"},e.date||us),r.a.createElement("td",{className:"Ta(start) Pend(20px)--mv2 Pend(15px) tblRow:h_Bgc($extraLightBlue)"},!t&&r.a.createElement("span",{className:"Mend(15px)"},e.beta&&e.beta.beta&&Object(x._0)(e.beta.beta,1)||us),r.a.createElement(ls.a,{value:Object(x.W)(e.beta.beta)})),r.a.createElement("td",{className:"Ta(end) Pend(20px)--mv2 Pend(15px) tblRow:h_Bgc($extraLightBlue) Miw(50px)"},"number"==typeof e.portfolioVolatility?r.a.createElement(X.FormattedNumber,{value:e.portfolioVolatility,style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}):us),r.a.createElement("td",{className:"Ta(end) tblRow:h_Bgc($extraLightBlue) Miw(50px)"},e.alpha&&r.a.createElement(X.FormattedNumber,{value:e.alpha,minimumFractionDigits:1,maximumFractionDigits:3})||us),r.a.createElement("td",{className:"W(100%)"}))})))]],r.a.createElement("section",{"data-yaft-module":"pf-detail-risk-analysis"},n)}}fs.displayName="PfRiskAnalysis",fs.propTypes={risk:i.a.object,isMini:i.a.bool,rapidSec:i.a.string.isRequired},fs.defaultProps={isMini:!1,rapidSec:"portfolio"};var gs=fs,bs=a(2001),xs=a(2003),Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const ys=[{raw:"list",fmt:ss.LIST_VIEW},{raw:"heatmap",fmt:ss.HEAT_VIEW}],Ns="all",Cs=[{data:"all",content:ss.ALL},{data:"sector",content:ss.SECTOR}],Ps="allocation",ws={symbol:{name:ss.SYMBOL,className:"Ta(start) Pstart(6px)",type:"quote"},closePrice:{name:ss.PRICE,type:"number"},valuation:{name:ss.FAIR_VALUE,className:"Ta(start) Pstart(10px)",type:"valuation"},name:{name:ss.NAME,className:"Ta(start) Pstart(10px)"},quantity:{name:ss.END_SHARES},marketValue:{name:ss.END_MARKET_VALUE,type:"currency"},weight:{name:ss.AVG_WEIGHT,type:"number"},totalReturn:{name:ss.UNREALIZED_RETURN,type:"colorChangePercent"},contributionToReturn:{name:ss.UNREALIZED_CONTRIBUTION_RETURN,className:"Ta(end) Pend(6px)",type:"percent"}},Ss={all:{columns:["symbol","name","closePrice","valuation","quantity","marketValue","weight","totalReturn","contributionToReturn"]},sector:{typeField:"sectorAllocation",columns:["symbol","name","closePrice","valuation","quantity","marketValue","weight","totalReturn","contributionToReturn"]}},Is={Undervalued:"C($dataGreen)","Near Fair Value":"C(black)",Overvalued:"C($dataRed)"};class Ms extends r.a.Component{constructor(e){super(e),this.onViewToggle=this.onViewToggle.bind(this),this.onTypeToggle=this.onTypeToggle.bind(this),this.onRangeChange=this.onRangeChange.bind(this),this.onCustomRange=this.onCustomRange.bind(this),this.state={selectedView:e.selectedView}}onViewToggle(e,t){this.setState({selectedView:e})}onTypeToggle(e,t){const{allocation:a={}}=this.props,s=a.type;Object(f.b)(this,{sec:this.props.rapidSec,subSec:Ps,slk:t,elm:"inpt",elmt:"fltr",itc:1,outcm:"group-tggl"});const r=a[s]||{},{start:n,end:i,range:o}=r;this.context.executeAction(C,{type:t,range:o,start:n,end:i,pfId:this.props.pfId})}onRangeChange(e,{range:t}){const{allocation:a={}}=this.props,s=a.type;this.context.executeAction(C,{type:s,range:t,pfId:this.props.pfId})}onCustomRange({fromDate:e,toDate:t}){const{allocation:a={}}=this.props,s=a.type;this.context.executeAction(C,{type:s,start:e.getTime(),end:t.getTime(),pfId:this.props.pfId})}renderCell({type:e,rowData:t,column:a,rapidSec:s,currency:n="USD"}){if(null===t[a]||void 0===t[a])return"-";const i=t.priceHint||2,o=this.context.session&&this.context.session.dimensions&&this.context.session.dimensions.lang||"en-US";switch(e){case"quote":{const e=Object(f.e)("quote",{symbol:t[a],comscoreEnabled:!0});return r.a.createElement(le.a,{key:"quote",href:e,followLink:!1,className:"Fw(600)",i13nModel:{itc:0,elm:"qte",elmt:"link",subsec:Ps,sec:s}},t[a])}case"colorChangePercent":case"colorChange":{const s="colorChangePercent"===e?Object(x.S)(t[a]/100,i,"percent",o):Object(x.S)(t[a],i);return r.a.createElement(Xe.a,{value:t[a],textColor:!0,streamingEnabled:!1},s)}case"valuation":return r.a.createElement("span",{className:Is[t[a]]+" Fw(500)"},t[a]);case"totalText":return r.a.createElement("span",{className:"Fw(b)"},t[a]);case"percent":return Object(x.S)(t[a]/100,i,"percent",o);case"number":return Object(x.S)(t[a],i,void 0,o);case"currency":return this.context.intl.formatNumber(t[a],{currency:n,style:"currency",currencyDisplay:"symbol",minimumFractionDigits:2,maximumFractionDigits:2});default:return t[a]}}renderAllocation({index:e,allocation:t,type:a,rapidSec:s,currency:n="USD"}){const{columns:i,typeField:o}=Ss[a],{positionAllocation:l}=t||{},c=t&&t[o];let m=l,d=-1;return a!==Ns&&(m=[c].concat(l),d=0),m.map((t,o)=>{const l=o===d;let c=a===Ns?"H(40px)":"H(32px)";return l&&(c="H(50px) Fw(b)"),o%2==0||l||(c+=" Bgc($altRowColor)"),r.a.createElement("tr",{key:t.posId+e+String(o),className:"tblRow Bgc($extraLightBlue):h BdB Bdbc($finLightGrayAlt) Bdbc($tableBorderBlue):h "+c},i.map((e,i)=>{let o=e;const c=ws[e]||{};let m=c.type,d=c.className||"Ta(end) Pend(10px)";const p={};if(l&&t[a])if("symbol"===e)o=a,m="totalText",p.colSpan=4;else if("name"===e||"closePrice"===e||"valuation"===e)return null;let u=t[e];return"symbol"===e||isNaN(u)||(u=Object(x.S)(u,2)),r.a.createElement("td",Es({key:e+i,"aria-label":c.name||"",className:"tblRow:h_Bgc($extraLightBlue) "+d},p),this.renderCell({rowData:t,type:m,column:o,rapidSec:s,currency:n}))}))})}renderTotalAllocation({type:e,rapidSec:t,currency:a,allocation:s}){const{columns:n}=Ss[e];return r.a.createElement("tr",{key:"total",className:"tblRow Bgc($extraLightBlue):h BdB Bdbc($finLightGrayAlt) Bdbc($tableBorderBlue):h H(40px) Fw(b)"},n.map((e,n)=>{if(n>=1&&n<=4)return null;const i=ws[e]||{},o={};let l,c=i.className||"Ta(end) Pend(10px)";return 0===n?(o.colSpan=5,l=ss.TOTALS,c="Ta(start) Pstart(6px)"):l=this.renderCell({rowData:s,type:i.type,column:e,rapidSec:t,currency:a}),r.a.createElement("td",Es({key:e+n,"aria-label":i.name||"",className:"tblRow:h_Bgc($extraLightBlue) "+c},o),l)}))}renderContent(){const{selectedView:e}=this.state,{allocation:t,rapidSec:a}=this.props,{type:s=Ns}=t||{},{meta:n,positionAllocation:i,allocations:o,totalAllocation:l,start:c,end:m}=t&&t[s]||{},{currency:d="USD"}=n||{};let p;if((i||o)&&Ss[s])switch(e){case"list":{const e=o&&Array.isArray(o)?o:[t&&t[s]],{columns:n}=Ss[s];p=r.a.createElement("table",{key:"table",className:"Tbl(f) W(100%) BdT Bdtc($finLightGrayAlt)"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"C($c-fuji-grey-j) BdB Bdbc($finLightGrayAlt) H(32px)"},n.map((e,t)=>r.a.createElement("th",{key:e+t,className:"Fw(400)! Fz(xs) "+(ws[e].className||"Ta(end) Pend(10px)")},ws[e]&&ws[e].name||"-")))),r.a.createElement("tbody",null,e.map((e,t)=>this.renderAllocation({rapidSec:a,index:t,currency:d,type:s,allocation:e})),this.renderTotalAllocation({type:s,rapidSec:a,currency:d,allocation:l})));break}case"heatmap":p=r.a.createElement("div",{key:"heatmap"},"Heatmap coming soon..")}else p=r.a.createElement("div",{key:"error",className:"Ta(c) Pt(40px) Pb(50px)"},r.a.createElement(Ce.Icon,{className:"H(30px) W(30px) Va(m)! Fill($grayBorder)! Stk($grayBorder) Cur(a)! Mb(8px)",asset:as.a,height:30,color:"#9ea2af"}),r.a.createElement("div",{className:"Fw(b) Fz(m) Mb(5px) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"MSG_NO_DATA"})),r.a.createElement("div",null,r.a.createElement(X.FormattedMessage,{id:"MSG_RELOAD_PAGE"})));return[r.a.createElement(xs.a,{key:"toolbar",optionTitle:ss.GROUP_BY,options:Cs,selected:s,rapidSec:"pf-allc-toolbar",startDate:c,endDate:m,onCustomRange:this.onCustomRange,onOptionChange:this.onTypeToggle,onRangeChange:this.onRangeChange}),p]}render(){const{className:e,rapidSec:t,enableViewBar:a}=this.props;return r.a.createElement("section",{className:e,"data-yaft-module":"pf-detail-allocation"},r.a.createElement("h2",{className:"Mb(15px) Fw(b) Fz(16px)"},ss.PORTFOLIO_ALLOCATION),a&&r.a.createElement("ul",{className:"H(50px) Bgc($panelBackground) List(n) Whs(nw) W(100%) Bdbs(s) BdB(4px) Cf Mb(15px) Bdbc(t)"},ys.map(e=>{let a;return a=e.raw===this.state.selectedView?r.a.createElement("div",{className:"Fz(s) Lh(50px) Ta(c) Bdbw(3px) Bdbs(s) Px(12px) Bdbc($c-fuji-blue-1-a) C(black) Bgc($navSelectedBlue)"},e.fmt):r.a.createElement(J.I13nButton,{className:"Fz(s) Lh(50px) Ta(c) Bdbw(3px) Bdbs(s) Px(12px) Bdbc(t) D(b)",i13nModel:{sec:t,subsec:"pf-perf-views",slk:e.raw,itc:1,elm:"btn"},onClick:this.onViewToggle.bind(this,e.raw)},e.fmt),r.a.createElement("li",{key:e.raw,className:"IbBox Fw(500) fin-tab-item H(50px) desktop_Bgc($lightBlue):h desktop-lite_Bgc($lightBlue):h"},a)})),this.renderContent())}}Ms.displayName="PerformanceAllocation",Ms.propTypes={allocation:i.a.object,pfId:i.a.string.isRequired,enableViewBar:i.a.bool,selectedView:i.a.string,rapidSec:i.a.string.isRequired,className:i.a.string},Ms.defaultProps={rapidSec:"portfolio",enableViewBar:!0,selectedView:"list",className:""},Ms.contextTypes={session:i.a.object.isRequired,executeAction:i.a.func.isRequired,intl:i.a.object.isRequired};var ks=Ms,vs=a(360),Ts=a.n(vs);const Fs=["#5067F4","#86B9F8","#933AF6","#ECBC46","#1a9af9","#1ac567","#f0126f","#9552ff","#45e3ff","#ff7b12","#400090","#30d3b6","#e20081","#787d82","#ffb700"];class Rs extends r.a.PureComponent{render(){const{className:e,diversity:t,href:a,rapidSec:s,followLink:n,headerClassName:i,description:o,isHighValueUser:l}=this.props,c=[r.a.createElement("h5",{key:"header",className:i},ss.DIVERSITY),r.a.createElement(Ce.Icon,{key:"icon",className:"Fill(black)! Stk(black)! Va(m)!",asset:Ts.a,height:10})];let m;if(t){let e=0;const a={};let s=0;const n=Object.keys(t);n.forEach(e=>{s+=t[e]});const i=n.map(n=>{a[n]=Fs[e++],e>=Fs.length&&(e=0);const i=t[n]/s;return r.a.createElement("li",{key:n,className:"Mb(5) Ta(start) P(0)"},r.a.createElement("span",{className:"Mend(10px) Fw(b)",style:{color:a[n]}},r.a.createElement(X.FormattedNumber,{value:i,style:"percent",maximumFractionDigits:1})),r.a.createElement("span",{className:"C($c-fuji-grey-j)"},n))});m=r.a.createElement("div",{className:"Mt(15px)"},o&&r.a.createElement("p",{className:"Fz(s) C($c-fuji-grey-j) Whs(n) M(0) Mb(15px) P(0)"},o),r.a.createElement(Xa.a,{key:"chart",className:"H(64px) W(64px) Mx(a) D(ib) Va(t)",type:"DonutChart",options:{id:"diversity-ch",width:64,height:64,donutWidth:10,colors:a,data:t}}),r.a.createElement("ul",{key:"legend",className:"List(n) D(ib) Va(t) Fz(12px) Mstart(15px)"},i))}else m=r.a.createElement("div",{className:"C($c-fuji-grey-j) Mt(10px)"},ss.CHART_UNAVAILABLE);return l?r.a.createElement(le.a,{className:"D(ib) C(black) Td(n) "+e,href:a,followLink:n,i13nModel:{sec:s,slk:"diversity",itc:0,elm:"itm",elmt:"link"}},c,m):r.a.createElement("div",{className:"C(black) "+e},c,m)}}Rs.displayName="PfDiversityModule",Rs.propTypes={className:i.a.string,href:i.a.string,followLink:i.a.bool,description:i.a.string,headerClassName:i.a.string,diversity:i.a.object,isHighValueUser:i.a.bool,rapidSec:i.a.string.isRequired},Rs.defaultProps={className:"",followLink:!1,headerClassName:"D(ib) Fz(s) Fw(b) Va(m) Mend(6px)",isHighValueUser:!1,href:"/"};var Ds=Rs;const Bs={Undervalued:"Bgc($dataGreen)","Near Fair Value":"Bgc($grayBorder)",Overvalued:"Bgc($dataRed)"},_s="Bgc($c-fuji-grey-j)";class Os extends r.a.PureComponent{render(){const{className:e,valuation:t,rapidSec:a,followLink:s,href:n,headerClassName:i,description:o,isHighValueUser:l}=this.props,c=[r.a.createElement("h5",{key:"header",className:i},ss.VALUATION),r.a.createElement(Ce.Icon,{key:"icon",className:"Fill(black)! Stk(black)! Va(m)!",asset:Ts.a,height:10})];let m;if(t){let e=0;const a=Object.keys(t);a.forEach(a=>{e+=t[a]}),m=r.a.createElement("div",{className:"Mt(15px)"},o&&r.a.createElement("p",{className:"Fz(s) C($c-fuji-grey-j) Whs(n) M(0) Mb(15px) P(0)"},o),r.a.createElement("ul",{className:"List(n) M(0) P(0)"},a.map(a=>{const s=t[a];return r.a.createElement("li",{key:a,className:"Fz(s) Mb(6px)"},r.a.createElement("div",{className:"Mend(10px) Bgc($panelBackground) H(10px) W(100px) W(200px)--mobp W(200px)--mobl W(200px)--tab768 D(ib) Va(m) Bdrs(3px)"},r.a.createElement("div",{className:(Bs[a]||_s)+" H(10px) Bdrs(3px)",style:{width:Math.floor(s/e*100)+"%"}})),r.a.createElement("span",{className:"Fw(500) C(black) Mend(10px)"},s),r.a.createElement("span",{className:"C($c-fuji-grey-j)"},a))})))}else m=r.a.createElement("div",{className:"C($c-fuji-grey-j) Mt(10px)"},ss.VALUATION_UNAVAILABLE);return l?r.a.createElement(le.a,{className:"D(ib) C(black) Td(n) "+e,href:n,followLink:s,i13nModel:{sec:a,slk:"valuation",itc:0,elm:"itm",elmt:"link"}},c,m):r.a.createElement("div",{className:"C(black) "+e},c,m)}}Os.displayName="PfValuationModule",Os.propTypes={className:i.a.string,href:i.a.string,followLink:i.a.bool,headerClassName:i.a.string,description:i.a.string,valuation:i.a.object,isHighValueUser:i.a.bool,rapidSec:i.a.string.isRequired},Os.defaultProps={className:"",isHighValueUser:!1,followLink:!1,headerClassName:"D(ib) Fz(s) Fw(b) Va(m) Mend(6px)",href:"/"};var As=Os;class Ls extends r.a.PureComponent{render(){const{className:e,risk:t,rapidSec:a,href:s,followLink:n,headerClassName:i,description:o,isHighValueUser:l}=this.props,c=[r.a.createElement("h5",{key:"header",className:i},ss.RISK_PROFILE),r.a.createElement(Ce.Icon,{key:"icon",className:"Fill(black)! Stk(black)! Va(m)!",asset:Ts.a,height:10})];let m;return m=t?r.a.createElement("div",{className:"Mt(15px)"},o&&r.a.createElement("p",{className:"Fz(s) C($c-fuji-grey-j) Whs(n) M(0) Mb(15px) P(0)"},o),r.a.createElement("div",{key:"low",className:"D(ib) Va(m) C($c-fuji-grey-j) Fw(400) Mend(10px)"},ss.LOW),r.a.createElement(ls.a,{key:"traffic",value:Object(x.W)(t.beta),containerClassName:"W(110px) W(240px)--mobp W(240)--mobl W(240px)--tab768 Mt(5px) Mend(16px)"}),r.a.createElement("div",{key:"high",className:"D(ib) Va(m) C($c-fuji-grey-j) Fw(400)"},ss.HIGH),r.a.createElement("div",{key:"title",className:"Fw(b) Fz(s) Fz(m)--mobp Fz(m)--mobl Fz(m)--tab768 Mt(10px) Mstart(30px)"},t.riskDescription)):r.a.createElement("div",{className:"C($c-fuji-grey-j) Mt(10px)"},ss.RISK_PROFILE_UNAVAILABLE),l?r.a.createElement(le.a,{className:"D(ib) C(black) Td(n) "+e,href:s,followLink:n,i13nModel:{sec:a,slk:"risk-profile",itc:0,elm:"itm",elmt:"link"}},c,m):r.a.createElement("div",{className:"C(black) "+e},c,m)}}Ls.displayName="PfRiskModule",Ls.propTypes={className:i.a.string,href:i.a.string,followLink:i.a.bool,description:i.a.string,risk:i.a.object,headerClassName:i.a.string,isHighValueUser:i.a.bool,rapidSec:i.a.string.isRequired},Ls.defaultProps={className:"",followLink:!1,headerClassName:"D(ib) Fz(s) Fw(b) Va(m) Mend(6px)",isHighValueUser:!1,href:"/"};var js=Ls;const $s=({className:e,portfolio:t,pfPrefix:a,viewPrefix:s,rapidSec:n,comparison:i,isMini:o})=>{const{premiumSummary:l={},characteristics:c}=t||{},{portfolioInsights:m={}}=l||{},d=`/${a}/${t.pfId}/${s}/`,p="Whs(nw) Bxz(bb) Px(20px) Mx(a) Bxsh($featurePromoImgShadow) Bdrs(4px) Bgc(white) Mb(20px) Py(20px)";let u;if(c){const{portfolioCharacteristics:e,benchmarkCharacteristics:t}=c||{};u=r.a.createElement("div",{className:"Mt(15px)"},r.a.createElement("p",{className:"Fz(s) C($c-fuji-grey-j) Whs(n) M(0) Mb(15px) P(0)"},ss.DESC_PORTFOLIO_CHARACTERISTICS),r.a.createElement(es,{key:"earnings",id:"priceToEarnings",className:"W(1/2) Fl(start) Pend(15px)",title:ss.PRICE_TO_EARNINGS,valueClassName:"Fw(b) Fz(m) Ta(start)",value:e&&e.priceToEarnings,benchMarkValue:t&&t.priceToEarnings}),r.a.createElement(es,{key:"cash",id:"priceToCashFlow",className:"W(1/2) Fl(start)",title:ss.PRICE_TO_CASHFLOW,valueClassName:"Fw(b) Fz(m) Ta(start)",value:e&&e.priceToCashFlow,benchMarkValue:t&&t.priceToCashFlow}))}else u=r.a.createElement("div",{className:"Ta(c) Mt(15px)"},r.a.createElement(Ce.Icon,{className:"H(30px) W(30px) Va(m)! Fill($grayBorder)! Stk($grayBorder) Cur(a)! Mb(8px)",asset:as.a,height:30,color:"#9ea2af"}),r.a.createElement("div",{className:"Fw(b) Fz(m) Mb(5px) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"MSG_NO_DATA"})));return r.a.createElement("section",{className:e},r.a.createElement("section",{className:p},r.a.createElement("h2",{className:"D(ib) Fz(16px) Va(m) Mend(6px) Mb(15px)"},ss.ANNUAL_PERFORMANCE),r.a.createElement(bs.a,{pfId:t.pfId,pfName:t.pfName,userId:t.userId,teaserType:"mini",type:o?"mini":"default",rapidSec:n,showSelectOptions:!1,showCustomRange:!1,showComparator:!1,className:"H(300px) Mb(20px) Mt(-15px) Mt(a)--mobp Mt(a)--mobl Mt(a)--tab768",chartClassName:"H(300px)",chartContainerClass:"Pos(r) Z(3) H(300px) W(100%)--mobp W(100%)--mobl W(100%)--tab768 Miw(a)--mobp Miw(a)--mobl Miw(a)--tab768",comparison:i})),r.a.createElement("section",{className:p},r.a.createElement(js,{risk:l.portfolioBeta,followLink:!0,description:m.riskLevel,headerClassName:"D(ib) Fz(16px) Fw(b) Va(m) Mend(6px)",href:d+x.O,isHighValueUser:!0,rapidSec:n})),r.a.createElement("section",{className:p},r.a.createElement(As,{valuation:l.portfolioValuationsCount,description:m.valuation,followLink:!0,headerClassName:"D(ib) Fz(16px) Fw(b) Va(m) Mend(6px)",href:d+x.Q,isHighValueUser:!0,rapidSec:n})),r.a.createElement("section",{className:p},r.a.createElement(Ds,{diversity:l.portfolioDiversity,description:m.diversification,headerClassName:"D(ib) Fz(16px) Fw(b) Va(m) Mend(6px)",href:d+x.e,followLink:!0,isHighValueUser:!0,rapidSec:n})),r.a.createElement("section",{className:p},r.a.createElement(le.a,{className:"D(ib) C(black) Td(n) Mb(15px)",href:d+x.b,followLink:!0,i13nModel:{sec:n,slk:"characteristicsc",itc:0,elm:"itm",elmt:"link"}},r.a.createElement("h2",{className:"D(ib) Fz(16px) Va(m) Mend(6px)"},ss.CHARACTERISTICS),r.a.createElement(Ce.Icon,{className:"Fill(black)! Stk(black)! Va(m)!",asset:Ts.a,height:12}),u)))};$s.displayName="PfPremiumSummary",$s.propTypes={className:i.a.string,rapidSec:i.a.string,portfolio:i.a.object,pfPrefix:i.a.string,viewPrefix:i.a.string,comparison:i.a.array,isMini:i.a.bool},$s.defaultProps={className:"Bgc($panelBackground)",rapidSec:"pf-prem-summary",isMini:!1};var Vs=$s;const Hs=({className:e,viewId:t})=>{let a;switch(t){case x.Q:a=[r.a.createElement("h2",{key:"head",className:"Fw(b) Fz(l) Mb(30px)"},ss.VALUATION),r.a.createElement("div",{key:"detail",className:"Fz(14px) Lh(1.8em)"},r.a.createElement("p",null,ss.VALUATION_DESC_MSG),r.a.createElement("ul",{className:"List(d) Mt(10px) Pstart(20px)"},r.a.createElement("li",null,ss.UNDER_VALUED_DESC),r.a.createElement("li",null,ss.FAIR_VALUE_DESC,", ",ss.OR),r.a.createElement("li",null,ss.OVER_VALUED_DESC)))];break;case x.e:a=[r.a.createElement("h2",{key:"head",className:"Fw(b) Fz(l) Mb(30px)"},ss.DIVERSITY_DETAILS),r.a.createElement("p",{key:"details",className:"Fz(14px) Lh(1.8em)"},ss.DIVERSITY_DESC)]}return r.a.createElement("section",{className:e},a)};Hs.displayName="PfInformationModule",Hs.propTypes={viewId:i.a.string,className:i.a.string},Hs.defaultProps={viewId:x.Q,className:"Px(20px)--mobp Px(20px)--mobl Px(20px)--tab768 Px(20px)--tab1024 Pt(10px)"};var zs=Hs;const qs=({message:e})=>r.a.createElement("div",{className:"Ta(c) Pt(40px) Pb(50px) Bgc($panelBackground) Bdrs(3px) Bd Bdc($finLightGrayAlt)"},r.a.createElement(Ce.Icon,{className:"H(30px) W(30px) Va(m)! Fill($grayBorder)! Stk($grayBorder) Cur(a)! Mb(8px)",asset:as.a,height:30,color:"#9ea2af"}),r.a.createElement("div",{className:"Fw(b) Fz(m) Mb(5px) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:e})),r.a.createElement("div",null,r.a.createElement(X.FormattedMessage,{id:"MSG_RELOAD_PAGE"})));qs.displayName="PortfolioErrorMessage",qs.propTypes={message:i.a.string},qs.defaultProps={message:"MSG_NO_PORTFOLIOS"};var Ws=qs,Us=a(1892),Gs=a(630);class Ys extends r.a.PureComponent{constructor(){super(),this.state={isReordering:!1},this.selectedSymbols=[],this.setDataTableRef=this.setDataTableRef.bind(this),this.setToolbarRef=this.setToolbarRef.bind(this),this.setHoldingsTableRef=this.setHoldingsTableRef.bind(this),this.onReorderStart=this.onReorderStart.bind(this),this.onReorderSave=this.onReorderSave.bind(this),this.onReorderCancel=this.onReorderCancel.bind(this),this.onMultiQuoteAddSymbol=this.onMultiQuoteAddSymbol.bind(this),this.onEditView=this.onEditView.bind(this),this.onDeleteView=this.onDeleteView.bind(this),this.onCheckboxSelect=this.onCheckboxSelect.bind(this),this.onAllCheckboxSelect=this.onAllCheckboxSelect.bind(this),this.onDeletePositions=this.onDeletePositions.bind(this),this.onDeleteSinglePosition=this.onDeleteSinglePosition.bind(this),this.onTogglePositionExpandAll=this.onTogglePositionExpandAll.bind(this)}setDataTableRef(e){this.dataTableRef=e}setHoldingsTableRef(e){this.holdingsTableRef=e}setToolbarRef(e){this.resultToolbarRef=e}onReorderStart(){this.setState({isReordering:!0})}onReorderSave(){this.dataTableRef&&this.dataTableRef.state&&this.dataTableRef.state.rows&&this.context.executeAction(se,{pfId:this.props.portfolio.pfId,positions:this.dataTableRef.state.rows.map((e,t)=>({posId:e.posId,sortOrder:t}))}),this.setState({isReordering:!1})}onReorderCancel(){this.setState({isReordering:!1})}onEditView(){const e=this.props.views[this.props.viewId];this.context.executeAction(re.a,{pageParams:{pd:"modal"},disableAds:!0}),this.context.executeAction(G.a.show,{wrapperClass:"Pos(f) T(0) B(0) Start(0) End(0) Bgc($modalBackground)",component:Wt,componentProps:{titleMessageId:"EDIT_VIEW",viewName:e.viewName,columns:e.columns,onSaveView:(e,t)=>{this.context.executeAction(Ct,{viewId:this.props.viewId,viewName:e,columns:t})}}})}onDeleteView(){const{views:e,viewId:t}=this.props;e&&t&&e[t]&&this.context.executeAction(G.a.show,{wrapperClass:"Bgc($modalBackground) Ovy(a)",component:ga,componentProps:{pfId:this.props.portfolio.pfId,viewPrefix:this.props.viewPrefix,pfPrefix:this.props.pfPrefix,viewId:t,viewName:e[t].viewName||""}})}onCheckboxSelect(e,t){e.checked?this.selectedSymbols.push(e.value):this.selectedSymbols.splice(this.selectedSymbols.indexOf(e.value),1),this.resultToolbarRef&&this.resultToolbarRef.onToggleSelected(this.selectedSymbols.length>0)}onAllCheckboxSelect(e,t){e.checked?this.selectedSymbols=e.value:this.selectedSymbols=[],this.resultToolbarRef&&this.resultToolbarRef.onToggleSelected(this.selectedSymbols.length>0)}onDeletePositions(){if(this.selectedSymbols.length<1)return;const e={},{portfolio:t}=this.props,a=t&&t.positions,s=[];this.selectedSymbols.forEach((t,a)=>{e[t]=a});for(let t=0;t<a.length;t++)void 0!==e[a[t].symbol]&&s.push(a[t].posId);this.context.executeAction(G.a.show,{wrapperClass:"Bgc($modalBackground) Ovy(a)",component:ua,componentProps:{pfId:t.pfId,posIds:s,symbols:this.selectedSymbols,onClearCheckbox:()=>{this.selectedSymbols=[],this.dataTableRef.onClearCheckbox(),this.resultToolbarRef&&this.resultToolbarRef.onToggleSelected(!1)}}})}onDeleteSinglePosition(e){let t;const a=this.props.portfolio.positions||[];for(let s=0;s<a.length;s++)if(a[s].posId===e){t=[a[s].symbol];break}t&&(this.context.executeAction(G.a.show,{wrapperClass:"Bgc($modalBackground) Ovy(a)",component:ua,componentProps:{pfId:this.props.portfolio.pfId,posIds:[e],symbols:t}}),this.selectedSymbols.length>0&&(this.selectedSymbols=[],this.dataTableRef.onClearCheckbox(),this.resultToolbarRef&&this.resultToolbarRef.onToggleSelected(!1)))}onTogglePositionExpandAll(){this.holdingsTableRef&&this.holdingsTableRef.togglePositionExpandAll()}onMultiQuoteAddSymbol(e,t){if(this.props.quotes){const{viewPrefix:e,viewId:a}=this.props;let s=this.props.quotes.split(",");s=s.concat(t?t.split(","):[]),this.context.executeAction(Q.a,{url:`/quotes/${s.join(",")}/${e}/${a}`,type:"click"})}}componentWillReceiveProps(e){const{portfolio:t,viewId:a,views:s}=e;if(s&&a&&s[a]&&t&&t.positions){const e=s[a].columns.concat(["regularMarketPrice","regularMarketChangePercent"]),r=Object(x.X)(t);if(this.__columnsToStream&&this.__symbolList){for(let t=0;t<e.length;t++){const a=e[t];let s=!1;for(let e=0;e<this.__columnsToStream.length;e++)if(a===this.__columnsToStream[e]){s=!0;break}s||this.__columnsToStream.push(a)}for(let e=0;e<r.length;e++){const t=r[e];let a=!1;for(let e=0;e<this.__symbolList.length;e++)if(t===this.__symbolList[e]){a=!0;break}a||this.__symbolList.push(t)}this.context.getStore(Gs.a).subscribe(this.__symbolList,this.__columnsToStream)}else this.__columnsToStream=e,this.__symbolList=r,this.context.getStore(Gs.a).subscribe(r,e)}}componentWillUnmount(){this.context.getStore(Gs.a).unsubscribe(this.__symbolList,this.__columnsToStream),this.__symbolList=null,this.__columnsToStream=null}renderEmptyPortfolio({isLinkedPortfolio:e,isAccountStale:t}){const{portfolio:a,isMini:s}=this.props;let n,i="MSG_EMPTY_PF";return e?t&&(i="MSG_REAUTHENTICATE_PF"):n=r.a.createElement(Pe.a,{menuClassName:"Start(-50%)!",rapidSec:"empty-pf-add-symbol",subSec:"pf_add_symbol",autoFocus:!0,arrowStyle:{left:40},showTip:!0,type:"button",pfId:a.pfId}),r.a.createElement("div",{key:"emptybody",className:"Mih(280px) M(a) Ta(c) Bdrs(3px) Bd Bdc($finLightGrayAlt)"+(s?" Mx(15px) Mt(15px)":""),"data-test":"empty-pf-results"},r.a.createElement("div",{className:"Mt(80px)"},r.a.createElement("div",{className:"Fz(16px) Fw(500) P(20px)"},r.a.createElement(X.FormattedMessage,{id:i})),n))}renderPortfolioDetailSummary(){const{views:e,viewId:t,portfolio:a,componentConfig:s,rapidSec:n,quotes:i,isQuoteStreaming:o,pfPrefix:l,viewPrefix:c,isMini:m,isHighValueUser:d=!1}=this.props;let p=[];const u=!!a.linkedAccount,h=!u&&!m,f=a.linkedAccount&&a.linkedAccount.status&&a.linkedAccount.status.stale,g=f||!a.positions||0===a.positions.length,b=Object(x.Y)(a);let E;const y={ui:{firstColumnSticky:!0,showFooter:!1,alternateColor:!0,isSortable:!m,isSelectable:h,isDeletable:h,isFullWidth:!1,readOnly:!h,quoteStreaming:o,showDashes:!0},trading:{enable:s.enableTradeit,useDummyBroker:s.useDummyBroker}};switch(i&&(y.ui={firstColumnSticky:!0,showFooter:!1,alternateColor:!0,isSortable:!0,isSelectable:!1,isDeletable:!1,isFullWidth:!1,readOnly:!1,quoteStreaming:!1,showDashes:!0},E=this.onMultiQuoteAddSymbol),t){case"v2":{const e={ui:{isSortable:h,isExpandable:!u},trading:{enable:s.enableTradeit,useDummyBroker:s.useDummyBroker}};if(m||(p=[r.a.createElement(da,{key:"header",ref:this.setToolbarRef,portfolio:a,isCustomView:!1,onReorderStart:this.onReorderStart,onReorderCancel:this.onReorderCancel,onReorderSave:this.onReorderSave,onAddSymbol:E,isReordering:this.state.isReordering,quotes:i,isHoldingsView:!0,onTogglePositionExpandAll:this.onTogglePositionExpandAll})]),g){p.push(this.renderEmptyPortfolio({isLinkedPortfolio:u,isAccountStale:f}));break}p.push(r.a.createElement(Ha,{ref:this.setHoldingsTableRef,key:"body",rapidSec:n,pfId:a.pfId,positions:a.positions,isMini:m,isQuoteStreaming:o,currentUrl:this.props.currentUrl,config:e}));break}case x.O:case x.b:case x.E:if(g){p.push(this.renderEmptyPortfolio({isLinkedPortfolio:u,isAccountStale:f}));break}if(!d||!b){const e={[x.O]:ss.PORTFOLIO_RISK_TEASER_TEXT,[x.b]:ss.PORTFOLIO_CHAR_TEASER_TEXT,[x.E]:ss.PORTFOLIO_PERF_TEASER_TEXT};p.push(r.a.createElement(Us.a,{key:"teaser",type:"trial",description:e[t],pfId:a.pfId,hasHoldings:b,isHighValueUser:d,className:"Bgc($panelBackground) Py(80px) Bdrs(3px) Bd Bdc($finLightGrayAlt)",innerClassName:"M(a) P(10px)--mobp P(10px)--mobl P(10px)--tab768 Whs(n)"}));break}switch(t){case x.E:m||(p.push(r.a.createElement("div",{key:"note",className:"Py(10px) C($c-fuji-grey-j) Fz(12px)"},ss.NOTE_PF_PREMIUM_HOLDINGS)),p.push(r.a.createElement(bs.a,{key:"chart",type:m?"mini":"default",rapidSec:n,isHighValueUser:d,pfId:a.pfId,pfName:a.pfName,userId:a.userId,comparison:x.x}))),d&&p.push(r.a.createElement(ks,{key:"allocation",className:"Px(20px)--mobp Px(20px)--mobl Px(20px)--tab768 Px(20px)--tab1024",rapidSec:n,selectedView:"list",pfId:a.pfId,enableViewBar:!1,isHighValueUser:d,allocation:a.allocation,baseCurrency:a.baseCurrency,cashCurrency:a.cashCurrency}));break;case x.b:m||p.push(r.a.createElement("div",{key:"note",className:"Py(10px) C($c-fuji-grey-j) Fz(12px)"},ss.NOTE_PF_PREMIUM_HOLDINGS)),p.push(r.a.createElement(os,{key:"characteristics",rapidSec:n,isMini:m,isHighValueUser:d,pillClassName:m?"Mt(20px)":void 0,title:m?ss.CHARACTERISTICS:void 0,pfName:a.pfName,characteristics:a.characteristics}));break;case x.O:m||p.push(r.a.createElement("div",{key:"note",className:"Py(10px) C($c-fuji-grey-j) Fz(12px)"},ss.NOTE_PF_PREMIUM_HOLDINGS)),p.push(r.a.createElement(gs,{key:"riskanalysis",isMini:m,isHighValueUser:d,rapidSec:n,risk:a.risk}))}break;case x.N:if(g){p.push(this.renderEmptyPortfolio({isLinkedPortfolio:u,isAccountStale:f}));break}p.push(r.a.createElement(Vs,{key:"premiumSummary",portfolio:a,isMini:m,pfPrefix:l,viewPrefix:c,comparison:x.x}));break;case x.Q:case x.e:p.push(r.a.createElement(zs,{key:"info",viewId:t}));break;case"fv":default:{const l=e[t]&&e[t].columns?e[t].columns.map(e=>({raw:e,fmt:x.I[e]})):[],c=t&&e[t]&&!e[t].defaultView||!1;if(m||(p=[r.a.createElement(da,{key:"header",ref:this.setToolbarRef,portfolio:a,onReorderStart:this.onReorderStart,onReorderCancel:this.onReorderCancel,onReorderSave:this.onReorderSave,onAddSymbol:E,isReordering:this.state.isReordering,isCustomView:c,onDeleteView:this.onDeleteView,onDeletePositions:this.onDeletePositions,onEditView:this.onEditView,quotes:i})]),g)p.push(this.renderEmptyPortfolio({isLinkedPortfolio:u,isAccountStale:f}));else if(m&&"v1"===t)p.push(r.a.createElement(Ka,{key:"body",quotes:i,rapidSec:n,pfId:a.pfId,positions:a.positions,enableTrading:s.enableTradeit,useDummyBroker:s.useDummyBroker,quoteStreaming:o,isLinkedPortfolio:u}));else{let e="";m&&(e="Pend(15px) Mt(10px)"),p.push(r.a.createElement("div",{key:"body",className:e},r.a.createElement(sa.a,{ref:this.setDataTableRef,id:"pf-detail-table",rowId:"symbol",rapidSec:n,columns:l,config:y,rows:a.positions,isReordering:this.state.isReordering,isTableDense:this.props.isTableDense,onCheckboxSelect:this.onCheckboxSelect,onAllCheckboxSelect:this.onAllCheckboxSelect,onDeleteSinglePosition:this.onDeleteSinglePosition,currentUrl:this.props.currentUrl})))}}}return p}render(){const{className:e,portfolio:t,views:a,viewId:s,pfPrefix:n,viewPrefix:i,quotes:o,isMini:l,enableViewBar:c,isHighValueUser:m}=this.props;let d;if((a||o)&&t){let e;e=o?`/quotes/${o}/${i}/${s}`:`/${n}/${t.pfId}/${i}/${s}`,d=[],!c||l&&o||d.push(r.a.createElement(aa,{key:"bar",views:a,pfPrefix:n,isHighValueUser:m,viewPrefix:i,viewId:s,pfId:t.pfId,viewUrl:e,quotes:o,isMini:l})),d.push(r.a.createElement("div",{key:"detail-wrapper",className:"Px(20px) Pt(15px) smartphone_Px(0px) Bgc(white)"},this.renderPortfolioDetailSummary()))}else d=r.a.createElement(Ws,null);return r.a.createElement("div",{className:e,"data-yaft-module":"fin-portfolio-detail"},d)}}Ys.propTypes={className:i.a.string,portfolio:i.a.object,views:i.a.object,rapidSec:i.a.string.isRequired,currentUrl:i.a.string,viewId:i.a.string,pfPrefix:i.a.string,viewPrefix:i.a.string,isQuoteStreaming:i.a.bool,isHighValueUser:i.a.bool,enablePremium:i.a.bool,enableViewBar:i.a.bool,isTableDense:i.a.bool,isMini:i.a.bool,componentConfig:i.a.object,quotes:i.a.string},Ys.defaultProps={className:"",pfPrefix:"portfolio",viewPrefix:"view",enableViewBar:!0,isHighValueUser:!1,enablePremium:!1,views:{},isQuoteStreaming:!0,isMini:!1,isTableDense:!1,componentConfig:{}},Ys.contextTypes={session:i.a.object.isRequired,executeAction:i.a.func.isRequired,getStore:i.a.func.isRequired},Ys.displayName="PortfolioDetail";var Qs=K()(Ys,[F.a],(e,t)=>{return{views:e.getStore(F.a).getViews()}}),Zs=a(2),Ks=a.n(Zs);const Xs=Object(_.t)("RecommendationsByPortfolio"),Js=e=>{const{hasError:t,recommendedSymbols:a}=e;if(!t&&a.symbols&&a.symbols.length){const e=Object(_.v)("link",{sec:Xs,elm:"itm",elmt:"link",itc:0}),t=a.symbols.map(t=>{const a=Ks()(t,"symbol","");return r.a.createElement(le.a,{key:a,className:"Pstart(10px) Fz(s) Ell C($c-fuji-blue-1-b) Fw(500) ie-7_Fl(end)",href:Object(f.e)("quote",{symbol:a,comscoreEnabled:!0}),i13nModel:e},a)});return r.a.createElement("div",{className:"Mb(10px) Whs(nw) Ta(end) Fl(end) C(black)","data-test":"pf-recommend","data-yaft-module":"fin-portfolio-recommend"},r.a.createElement("span",null,r.a.createElement(X.FormattedMessage,{id:"PEOPLE_ALSO_WATCH"}),":"),t)}return null};Js.displayName="RecommendationsByPortfolio",Js.propTypes={pfId:i.a.string.isRequired,recommendedSymbols:i.a.object.isRequired,hasError:i.a.bool.isRequired};var er=K()(Js,[d.a],(e,t)=>{const a=e.getStore(d.a);return{recommendedSymbols:a.getRecommendationsByPortfolio(t.pfId).toJS(),hasError:!!a.getErrorList().toJS().length}}),tr=a(373),ar=a.n(tr);const sr="/";class rr extends r.a.Component{constructor(e,t){super(e,t),this.setDropDownRef=this.setDropDownRef.bind(this),this.onDropDownClick=this.onDropDownClick.bind(this),this.onPfChange=this.onPfChange.bind(this)}setDropDownRef(e){this.dropDown=e}onDropDownClick(){this.dropDown&&this.dropDown.closeMenu()}onPfChange(e){const{pfPrefix:t,viewPrefix:a="view",viewId:s="v1",rapidSec:r}=this.props,n=e.target.value;Object(_.e)(this,{sec:r,slk:"tggl-pf",elm:"inpt",elmt:"filtr",g:n,itc:0});const i=n!==x.a?`/${t}/${n}/${a}/${s}`:"/portfolios";this.context.executeAction(Q.a,{url:i,type:"click"}),e.currentTarget.selectedIndex=-1}render(){const{currentPf:e,portfolios:t,pfPrefix:a,viewPrefix:s,viewId:n,rapidSec:i,isSmartphone:o}=this.props,l=r.a.createElement(le.a,{href:`/${a}s`,className:"Fw(b) Fz(17px)",i13nModel:{sec:i,slk:"my-portfolios",itc:0,elm:"hdln",elmt:"nav"}},r.a.createElement(X.FormattedMessage,{id:"MY_PORTFOLIOS"}));let c;if(e&&t){const m=A.a.decode(e.pfName||"");if(o){const e=this.context.intl.formatMessage,a=Object.keys(t).map(e=>{const a=t[e];if(!a)return null;const s=A.a.decode(a.pfName||""),{pfId:n}=a;return r.a.createElement("option",{key:n,value:n},s)});return r.a.createElement("form",{className:"D(b) Mend(35px)"},r.a.createElement("label",{className:"Pos(r) P(15px) D(b)"},r.a.createElement("div",{className:"Fw(b) Fz(16px) Va(m) Maw($pfMobBcrumbMaw) D(ib) Ell"},m),r.a.createElement("div",{className:"D(ib) Va(m) Bdrs(3px) Mstart(10px) W(20px) H(20px) Bgc($c-fuji-grey-c) Ta(c)"},r.a.createElement(Ce.Icon,{className:"Stkw(0) Mt(3px) Va(m)! Fill(black)! Stk(black)!",key:"arrow",asset:ar.a,height:11})),r.a.createElement("select",{onChange:this.onPfChange,className:"Op(0) W(100%) H(100%) Pos(a) T(0) End(0) Z(1) Fz(16px)",defaultValue:"none"},r.a.createElement("option",{disabled:!0,value:"none"},e({id:"SELECT_AN_ACTION_BELOW"})),r.a.createElement("option",{value:x.a},e({id:"ALL_PORTFOLIOS"})),a)))}const d=r.a.createElement("span",{className:"C($c-fuji-grey-j) Fz(17px) Mx(5px) Fw(500)"},sr),p=r.a.createElement("ul",{className:"M(0) P(0) List(n)"},Object.keys(t).map(e=>{const o=t[e];if(!o||o.following)return null;const l=A.a.decode(o.pfName||""),{pfId:c}=o,m=`/${a}/${c}/${s}/${n}`;return r.a.createElement("li",{key:c},r.a.createElement(le.a,{className:"C(black) Td(n)",href:m,title:l,i13nModel:{sec:i,slk:"tggl-pf",elm:"inpt",elmt:"filtr",itc:0}},r.a.createElement("div",{className:"Fw(b) Px(20px) Py(15px) Ta(start) Maw(250px) Miw(210px) Bgc($c-fuji-blue-1-a):h C(white):h Ell",onClick:this.onDropDownClick},l)))}));c=r.a.createElement("div",{className:"IbBox","data-yaft-module":"fin-portfolio-breadcrumb"},l,d,r.a.createElement(ce.a,{id:"pf-breadcrumb",className:"IbBox",ref:this.setDropDownRef,containerClassName:"Pos(r) D(ib) O(n):f W(100%)",content:p,menuClassName:"Z(6) Bxsh($boxShadow) Bd Bdc($c-fuji-grey-c) Bdrs(3px) Bgc(white) Maw(250px) Miw(150px) Ta(start) Cur(a) Start(0px) Mt(10px)",showClose:!1,showArrow:!0,arrowStyle:{left:20}},r.a.createElement("h3",{className:"Fw(b) Fz(17px) D(ib) Va(m)","data-test":"pfname"},m),r.a.createElement(Ce.Icon,{className:"Stkw(0) Mstart(7px) Va(m)!",key:"arrow",asset:ar.a,height:15})))}else c=r.a.createElement("div",{className:"IbBox Ta(c)--mobl Ta(c)--mobxl Ta(c)--mobp P(15px)--mobl P(15px)--mobxl P(15px)--mobp","data-yaft-module":"fin-portfolio-breadcrumb"},r.a.createElement("h1",{className:"Fw(b) Fz(17px) D(ib)"},r.a.createElement(X.FormattedMessage,{id:"MY_PORTFOLIOS"})));return c}}rr.displayName="PortfolioBreadcrumb",rr.propTypes={currentPf:i.a.object,portfolios:i.a.object,pfPrefix:i.a.string,viewPrefix:i.a.string,viewId:i.a.string,rapidSec:i.a.string,isSmartphone:i.a.bool},rr.defaultProps={isSmartphone:!1,pfPrefix:"portfolio",viewPrefix:"view",viewId:"v1"},rr.contextTypes={intl:i.a.object.isRequired,executeAction:i.a.func.isRequired};var nr=rr;const ir="-";class or extends r.a.Component{constructor(){super(),this.transformCurrentMarketValue=this.transformCurrentMarketValue.bind(this),this.transformPercentGain=this.transformPercentGain.bind(this),this.transformGain=this.transformGain.bind(this)}transformCurrentMarketValue(e){if(isNaN(e.raw))return ir;const{pfMeta:t}=this.props;return this.context.intl.formatNumber(e.raw,{currency:t.baseCurrency,style:"currency",currencyDisplay:"symbol",minimumFractionDigits:2,maximumFractionDigits:2})}transformGain(e){if(isNaN(e.raw))return ir;const t=this.context.intl.formatNumber(e.raw,{minimumFractionDigits:2,maximumFractionDigits:2});return e.raw>0?"+"+t:t}transformPercentGain(e){if(isNaN(e.raw))return ir;const t=this.context.intl.formatNumber(e.raw/100,{minimumFractionDigits:2,maximumFractionDigits:2,style:"percent"});return"("+(e.raw>0?"+"+t:t)+")"}render(){const{type:e,pfMeta:t,pfId:a,isQuoteStreaming:s,className:n}=this.props,{dailyGain:i,dailyPercentGain:o,totalGain:l,totalPercentGain:c,currentMarketValue:m}=t;let d;a&&(d=[a]);const p=r.a.createElement(pt,{value:m||0,textColor:!1,field:"currentMarketValue",streamingEnabled:s,pfIds:d,transform:this.transformCurrentMarketValue}),u=isNaN(i)&&isNaN(o)?ir:[r.a.createElement(pt,{key:"dailyGain",value:i||0,field:"dailyGain",streamingEnabled:s,pfIds:d,transform:this.transformGain},isNaN(i)?ir:i)," ",r.a.createElement(pt,{key:"dailyPercentGain",value:o||0,field:"dailyPercentGain",streamingEnabled:s,pfIds:d,transform:this.transformPercentGain},isNaN(o)?ir:o)],h=isNaN(l)&&isNaN(c)?ir:[r.a.createElement(pt,{key:"totalGain",value:l||0,field:"totalGain",streamingEnabled:s,pfIds:d,transform:this.transformGain},isNaN(l)?ir:l)," ",r.a.createElement(pt,{key:"totalPercentGain",value:c||0,field:"totalPercentGain",streamingEnabled:s,pfIds:d,transform:this.transformPercentGain},isNaN(c)?ir:c)];let f,g="";return"mini"===e?(g="Bgc(white)"+(a?" Px(15px) Pb(15px) ":" Bxsh($boxAreaShadow) P(15px) "),f=[a?null:r.a.createElement("h2",{key:"header",className:"Fz(m) Fw(n) Mb(10px)"},r.a.createElement(X.FormattedMessage,{id:"TOTAL_MARKET_VALUE"})),r.a.createElement("div",{key:"value",title:m,className:"Fz(32px) Mb(10px) Fw(b) Ell"},p),r.a.createElement("div",{key:"daygain",className:"Fz(14px) Mb(10px)"},r.a.createElement(X.FormattedMessage,{id:"DAY_GAIN"}),r.a.createElement("span",{className:"Fl(end) Fw(b)"},u)),r.a.createElement("div",{key:"totalgain",className:"Fz(14px)"},r.a.createElement(X.FormattedMessage,{id:"TOTAL_GAIN"}),r.a.createElement("span",{className:"Fl(end) Fw(b)"},h))]):(g="Mb(10px) "+(a?"Px(20px)":""),f=[r.a.createElement("div",{key:"value",className:"IbBox Fw(b) Fz(36px) Mt(-8px)"},p),r.a.createElement("div",{key:"daygain",className:"IbBox Mstart(20px) Mstart(0)--tab768 Fz(12px)"},r.a.createElement("div",{className:"C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"DAY_GAIN"})),r.a.createElement("div",{className:"Fw(b) Fz(16px)"},u)),r.a.createElement("div",{key:"totalgain",className:"IbBox Mstart(20px) Fz(12px)"},r.a.createElement("div",{className:"C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"TOTAL_GAIN"})),r.a.createElement("div",{className:"Fw(b) Fz(16px)"},h))]),r.a.createElement("div",{key:"meta",className:g+n,"data-yaft-module":"fin-portfolio-gainloss"},f)}}or.displayName="PortfoliosGainLoss",or.propTypes={type:i.a.oneOf(["mini","default"]),className:i.a.string,pfId:i.a.string,isQuoteStreaming:i.a.bool,pfMeta:i.a.object.isRequired},or.contextTypes={session:i.a.object.isRequired,intl:i.a.object},or.defaultProps={type:"default",className:"",isQuoteStreaming:!0,pfMeta:{}};var lr=or,cr=a(646);const mr=["#5964ff","#49c3fd"],dr="#5964ff";class pr extends r.a.PureComponent{render(){const{className:e,width:t,height:a,perfChart:s,pfId:n}=this.props;let i;if(!s)return null;const o=Object.keys(s).map(e=>s[e]),l=function(e,t,a){let s=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;for(let t=0;t<e.length;t++){const a=e[t],{timestamp:o,totalReturn:l}=a;for(let e=0;e<o.length;e++)s=Math.min(s,o[e]),r=Math.max(r,o[e]),n=Math.min(n,l[e]),i=Math.max(i,l[e])}const o=Object(cr.scaleLinear)().domain([s,r]).range([0,t]),l=Object(cr.scaleLinear)().domain([n,i]).range([a,0]),c=[];for(let t=0;t<e.length;t++){const a=e[t],{timestamp:s,totalReturn:r}=a,n=[];for(let e=0;e<s.length;e++)n.push(`${o(s[e])},${l(r[e])}`);c.push(n.join(","))}return c}(o,t,a),c=[],m=[];for(let e=0;e<l.length;e++){const t=mr[e]||dr,a=o[e].symbol;c[e]=r.a.createElement("polyline",{key:a+e,fill:"none",stroke:t,strokeWidth:n===a?"2":"1",points:l[e]}),m[e]=r.a.createElement("span",{key:a+e,className:"Mend(10px)"},r.a.createElement("div",{className:"D(ib) Va(m) W(20px) H(3px) Mend(4px) Bdrs(4px)",style:{backgroundColor:t}}),r.a.createElement("span",{className:"Fz(xs) C($c-fuji-grey-j)"},n===a?ss.PORTFOLIO:a))}return i=[r.a.createElement("span",{key:"chart"},r.a.createElement("svg",{viewBox:`0 0 ${t} ${a}`,width:t,height:a},c)),r.a.createElement("div",{key:"legend"},m)],r.a.createElement("div",{className:"D(ib) "+e},i)}}pr.propTypes={className:i.a.string,pfId:i.a.string.isRequired,perfChart:i.a.object,width:i.a.number,height:i.a.number},pr.defaultProps={className:""};var ur=pr;class hr extends r.a.PureComponent{render(){const{className:e,pfId:t,perfChart:a}=this.props;let s;return s=a?r.a.createElement(ur,{pfId:t,perfChart:a,width:180,height:60}):r.a.createElement("div",{className:"C($c-fuji-grey-j)"},ss.CHART_UNAVAILABLE),r.a.createElement("div",{className:e},r.a.createElement("h5",{className:"Fz(s) Fw(b) Mb(10px)"},ss.ANNUAL_PERFORMANCE),r.a.createElement("div",null,s))}}hr.displayName="PfAnnualPerfModule",hr.propTypes={className:i.a.string,pfId:i.a.string.isRequired,perfChart:i.a.object},hr.defaultProps={className:"Pstart(15px)"};var fr=hr;const gr=[{key:"researchReports",title:ss.RESEARCH_REPORTS},{key:"tradeIdeas",title:ss.INVESTING_IDEAS}],br=e=>{const{className:t,isHighValueUser:a,rapidSec:s,href:n}=e;return!a||e.researchReports&&e.tradeIdeas?r.a.createElement(le.a,{className:"link D(b) C(black) Td(n) "+t,href:n,i13nModel:{sec:s,slk:"premium-insights",itc:0,elm:"itm",elmt:"link"}},r.a.createElement("h3",{className:"Fz(s) Fw(b) IbBox"},ss.PREMIUM_INSIGHTS),r.a.createElement(Ce.Icon,{key:"icon",className:"Fill(black)! Stk(black)! Va(m)! Mb(2px)",asset:Ts.a,height:10}),r.a.createElement("div",{className:"IbBox"},r.a.createElement(Yt.a,{type:"lock",isHighValueUser:a})),r.a.createElement("div",null,a?gr.map(t=>r.a.createElement("div",{key:t.key,className:"IbBox C($c-fuji-blue-1-b) link:h_C($actionBlueHover) Pend(10px) Bxz(bb) W(1/2)"},r.a.createElement("div",{className:"Fz(20px) Fw(b)"},e[t.key]&&e[t.key].count||"N/A"),r.a.createElement("div",{className:"Fz(s) Fw(400)"},t.title))):r.a.createElement("div",{className:"Mt(5px)"},r.a.createElement("p",{className:"D(i)"},ss.PREMIUM_PORTFOLIO_INSIGHTS_MSG),r.a.createElement("span",{className:"Mstart(5px) Fw(b) C($c-fuji-blue-1-b) link:h_C($actionBlueHover)"},r.a.createElement(X.FormattedMessage,{id:"LEARN_MORE"}))))):null};br.displayName="PremiumInsights",br.propTypes={className:i.a.string,rapidSec:i.a.string,href:i.a.string,researchReports:i.a.object,isHighValueUser:i.a.bool,tradeIdeas:i.a.object},br.defaultProps={className:"",href:"/premium",rapidSec:"portfolio",isHighValueUser:!1};var xr=K()(br,[R.a],(e,t)=>{const a=e.getStore(R.a),{researchReports:s,tradeIdeas:r}=a.getModule("metrics")||{};return{researchReports:s,tradeIdeas:r}});const Er=Object(_.t)("PortfolioHeader"),yr=({className:e,pfMeta:t,pfId:a,pfPrefix:s,viewPrefix:n,isQuoteStreaming:i,isSmartphone:o,isHighValueUser:l,enablePremium:c})=>{const m=t||{};if(m&&(m.linkedAccount&&m.linkedAccount.status&&m.linkedAccount.status.stale||void 0===m.currentMarketValue))return null;if(!a||!c){const e=r.a.createElement(lr,{pfId:a,pfMeta:t,isQuoteStreaming:i,type:o?"mini":"default"});if(!c)return e;if(!a)return r.a.createElement("div",null,r.a.createElement("div",{className:"IbBox W(60%)"},r.a.createElement("h3",{className:"Fz(s) Fw(b) Mb(10px)"},r.a.createElement(X.FormattedMessage,{id:"MY_HOLDINGS"})),e),r.a.createElement("div",{className:"Pos(r) IbBox W(40%) Bxz(bb) Pstart(10px)"},r.a.createElement(xr,{rapidSec:"pf-prm-insght",isHighValueUser:l})))}const d=m.premiumSummary||{},p=`/${s}/${a}/${n}/`,u=Object(x.Y)(m);let h;return h=l&&u?[r.a.createElement("div",{key:"annual",className:"W(1/4) IbBox Pend(15px) Bxz(bb)"},r.a.createElement(fr,{pfId:a,perfChart:m.perfChart})),r.a.createElement("div",{key:"risk",className:"W(1/4) IbBox Pend(15px) Bxz(bb)"},r.a.createElement(js,{risk:d.portfolioBeta,href:p+x.O,isHighValueUser:l,rapidSec:Er})),r.a.createElement("div",{key:"valuation",className:"W(1/4) IbBox Pend(15px) Bxz(bb)"},r.a.createElement(As,{valuation:d.portfolioValuationsCount,href:p+x.E,isHighValueUser:l,rapidSec:Er})),r.a.createElement("div",{key:"diversity",className:"W(1/4) IbBox Pend(15px) Bxz(bb)"},r.a.createElement(Ds,{diversity:d.portfolioDiversity,href:p+x.E,isHighValueUser:l,rapidSec:Er}))]:r.a.createElement(Us.a,{type:"mini",innerClassName:"M(a)",className:"Ta(c) Px(15px) Miw(1024px)",pfId:a,hasHoldings:u,isHighValueUser:l}),r.a.createElement("div",{className:e},r.a.createElement("div",{className:"W(1/5) IbBox Px(15px) Py(15px) Bxz(bb)"},r.a.createElement(lr,{className:"Pb(0)! Px(0)! Mt(-5px)",pfId:a,pfMeta:t,isQuoteStreaming:i,type:"mini"})),r.a.createElement("div",{className:"W(4/5) IbBox Py(15px) Bxz(bb) Pos(r)"},h))};yr.displayName="PortfolioHeader",yr.propTypes={className:i.a.string,pfId:i.a.string,pfPrefix:i.a.string,viewPrefix:i.a.string,isQuoteStreaming:i.a.bool,isSmartphone:i.a.bool,isHighValueUser:i.a.bool,enablePremium:i.a.bool,pfMeta:i.a.object.isRequired},yr.defaultProps={className:"Mx(20px) Bgc(white) Bxsh($featurePromoImgShadow) Bdrs(4px) Mb(10px) Miw(984px)",pfPrefix:"portfolio",viewPrefix:"view",isQuoteStreaming:!0,isSmartphone:!1,isHighValueUser:!1,enablePremium:!1,pfMeta:{}};var Nr=yr;const Cr=({className:e,isMini:t,rapidSec:a,linkedAccount:s,currentUrl:n,onAuthenticate:i})=>{const{lastSynchronizedAt:o,status:l,brokerLongName:c,broker:m,userId:d,accountNumber:p}=s;if(!l.actionToRefresh||!l.stale)return null;let u,h,f,g,b;return"NEEDS_OAUTHUPDATE"===l.actionToRefresh?(u="relink",h={longName:c,shortName:m,accountNumber:p,userId:d}):(u="refresh",h={longName:c,shortName:m,accountNumber:p,userId:d}),t?(f=" D(f) Mx(10px) Ai(c) ",g="H(24px) P(10px)",b=24):(f=" My(10px) ",g="H(20px) P(8px)",b=20),r.a.createElement("div",{className:"Bd Bdrs(2px) Bdc($attentionYellow) "+f+e},r.a.createElement("div",{className:"D(ib) Va(m) Bgi($attentionYellowGradient)"},r.a.createElement(Ce.Icon,{className:"Va(m)! Fill(white)! Stk(white) Cur(a)! "+g,height:b,asset:as.a})),r.a.createElement("div",{className:"D(ib) Va(m) Mstart(10px) "+(t?"Py(6px)":"")},o?r.a.createElement(X.FormattedMessage,{id:"LINKED_ACCOUNT_LAST_UPDATED_TIME",values:{date:r.a.createElement(X.FormattedRelative,{value:o})}}):null),r.a.createElement(ne.a,{className:"Va(m) D(ib) Mx(10px)",rapidSec:a,type:u,currentUrl:n,currentStateData:h,onAuthenticate:i,onAccountLink:Function.prototype,isMini:t}))};Cr.displayName="RefreshLinkAccBar",Cr.propTypes={className:i.a.string,isMini:i.a.bool,rapidSec:i.a.string.isRequired,currentUrl:i.a.string,linkedAccount:i.a.object,onAuthenticate:i.a.func},Cr.defaultProps={className:"",isMini:!1,rapidSec:"",currentUrl:"",linkedAccount:{}};var Pr=Cr,wr=a(25),Sr=a.n(wr),Ir=a(12),Mr=a.n(Ir),kr=a(256),vr=a.n(kr);const Tr="https://help.yahoo.com/kb/finance-app-for-ios/sln28346.html#cont2",Fr="https://s.yimg.com/uc/New.png",Rr="https://s.yimg.com/uc/fin/img/-g-Group%203@2x.png",Dr="https://s.yimg.com/uc/fin/img/pf_splash.png",Br="right-rail-promo";class _r extends r.a.Component{constructor(e,t){super(e,t),this.rapidSec="fin-portfolios",this.isSignedIn=Object(f.B)(t),this.isSmartphone=Object(f.C)(t),this.onLinkedAccountRefresh=this.onLinkedAccountRefresh.bind(this),this.onSuccessfulPortfolioImport=this.onSuccessfulPortfolioImport.bind(this),this.onEditCurrency=this.onEditCurrency.bind(this),this.state={isQuoteStreaming:!0,isTableDense:!1,viewId:e.viewId||"v1"},this.toggleQuoteStreaming=this.toggleQuoteStreaming.bind(this),this.toggleTableDense=this.toggleTableDense.bind(this)}componentDidMount(){const{pfId:e,pfPrefix:t="portfolio",viewPrefix:a="view",quotes:s,isHighValueUser:r=!1,enablePremium:n=!1}=this.props,{viewId:i}=this.state;if(s)return void this.context.executeAction(W,{viewId:i,setLoading:!0,symbols:s});if(!this.isSignedIn)return;const o={};if(localStorage){if("false"===localStorage.getItem(x.A)&&(o.isQuoteStreaming=!1),"true"===localStorage.getItem(x.B)&&(o.isTableDense=!0),e){const s=localStorage.getItem(x.z);if(this.props.viewId){const e=this.context.getStore(F.a).getViews(this.props.viewId);localStorage.setItem(x.z,e?this.props.viewId:"v1")}else{const r=this.context.getStore(F.a).getViews(s);s&&r&&s!==i&&(o.viewId=s);const n=o.viewId||i;(new vr.a).replaceState({},"",`/${t}/${e}/${a}/${n}`),localStorage.setItem(x.z,n)}}}e?this.context.executeAction(W,{pfId:e,viewId:o.viewId||i,isHighValueUser:r,enablePremium:n,loadCurrencies:!0,loadRecommendations:!0,loadPortfolioNames:!0}):this.context.executeAction(W,{isHighValueUser:r,enablePremium:n,loadCurrencies:!0,realTime:!1}),Object.keys(o).length>0&&this.setState(o)}componentWillReceiveProps(e){if(!this.isSignedIn)return;const{viewId:t}=this.state,{pfPrefix:a="portfolio",viewPrefix:s="view",pfId:r,quotes:n}=this.props;let i=t,o=null;e.quotes?(e.viewId?e.viewId!==t&&(o={viewId:i=e.viewId},localStorage.setItem(x.z,i)):(new vr.a).replaceState({},"",`/quotes/${e.quotes}/${s}/${t}`),e.quotes===n&&i===t||this.context.executeAction(W,{viewId:i,symbols:e.quotes})):e.pfId?(e.viewId?e.viewId!==t&&(o={viewId:i=e.viewId},localStorage.setItem(x.z,i)):(new vr.a).replaceState({},"",`/${a}/${r}/${s}/${t}`),e.pfId!==r?this.context.executeAction(W,{pfId:e.pfId,viewId:i,isHighValueUser:e.isHighValueUser,enablePremium:e.enablePremium,loadRecommendations:!0}):i!==t&&this.context.executeAction(W,{pfId:e.pfId,viewId:i,isHighValueUser:e.isHighValueUser,enablePremium:e.enablePremium,loadRecommendations:!1})):r&&!e.pfId&&this.context.executeAction(W,{isHighValueUser:e.isHighValueUser,loadCurrencies:!0,setLoading:!0,realTime:!1}),o&&this.setState(o)}toggleQuoteStreaming(){localStorage&&localStorage.setItem(x.A,!this.state.isQuoteStreaming),this.setState({isQuoteStreaming:!this.state.isQuoteStreaming})}toggleTableDense(){localStorage&&localStorage.setItem(x.B,!this.state.isTableDense),this.setState({isTableDense:!this.state.isTableDense})}onLinkedAccountRefresh(e){if(e&&e.token){this.context.executeAction(G.a.hide);const{pfPrefix:t="portfolio",viewPrefix:a="view"}=this.props,{viewId:s}=this.state;this.context.executeAction(m.a,{silent:!1,setLoading:!1,realTime:!1,callback:(r,n)=>{if(r)return;const i=n.portfolios;let o;for(let t=0;t<i.length;t++)if(i[t].linkedAccount&&i[t].linkedAccount.userId===e.token){o=i[t].pfId;break}o!==this.props.pfId&&this.context.executeAction(Q.a,{url:`/${t}/${o}/${a}/${s}`,type:"default"})}})}}onSuccessfulPortfolioImport({pfId:e}){const{pfPrefix:t,viewPrefix:a}=this.props,{viewId:s}=this.state;e&&this.props.pfId?this.context.executeAction(Q.a,{url:`/${t}/${e}/${a}/${s}`,type:"click"}):e&&this.context.executeAction(m.a,{silent:!1,setLoading:!1,realTime:!1})}onEditCurrency(){const{pfId:e}=this.props;if(e){const{viewId:t}=this.state;this.context.executeAction(m.a,{silent:!1,pfId:e,viewId:t,setLoading:!1,realTime:!0})}}renderSignedOut(){const{enableTradeit:e}=this.props.componentConfig;let t,a;return e?(t=[r.a.createElement("h1",{key:"heading",className:"Fz(28px) My(15px) Fw(b)"},r.a.createElement(X.FormattedMessage,{id:"PORTFOLIO_WELCOME_MESSAGE"}),r.a.createElement("img",{className:"W(40px) H(20px) Va(m) Mstart(10px)",src:Fr})),r.a.createElement("p",{key:"submsg",className:"Mb(5px) Fz(m) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"PORTFOLIO_WELCOME_SUBMSG"})),r.a.createElement("p",{key:"subsubmsg",className:"Mb(5px) Fz(m) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"MSG_BROKER_CRED"}),r.a.createElement(J.I13nAnchor,{href:Tr,className:"Mstart(5px) Td(n) C($c-fuji-blue-1-b) C($actionBlueHover):h Fw(500) D(ib) Fz(m)",i13nModel:{sec:this.rapidSec,itc:0,elm:"itm",elmt:"link"}},r.a.createElement("span",{className:"Whs(nw)"},r.a.createElement(X.FormattedMessage,{id:"LEARN_MORE"}),"…")))],a=Rr):(t=[r.a.createElement("h1",{key:"heading",className:"Fz(28px) My(15px) Fw(b)"},r.a.createElement(X.FormattedMessage,{id:"PORTFOLIO_WELCOME_MESSAGE_NONTRADE"})),r.a.createElement("p",{key:"submsg",className:"Mb(5px) Fz(m) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"PORTFOLIO_WELCOME_SUBMSG_NONTRADE"})),r.a.createElement("p",{key:"subsubmsg",className:"Mb(5px) Fz(m) C($c-fuji-grey-j)"},r.a.createElement(X.FormattedMessage,{id:"PORTFOLIO_WELCOME_SUBSUBMSG"}))],a=Dr),r.a.createElement("section",{className:"Ta(c) Py(20px) Bgc($panelBackground) Bd Bdc($finLightGrayAlt) Bdrs(2px) Mb(30px)"},t,r.a.createElement("div",{className:"My(20px)"},r.a.createElement(J.I13nAnchor,{href:Object(f.j)(this.context,"/portfolios"),className:"Fz(m) Py(12px) Px(50px) Td(n) Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) D(ib) Bdrs(3px)",i13nModel:{sec:this.rapidSec,itc:0,elm:"itm",elmt:"lgn-yh"}},r.a.createElement(X.FormattedMessage,{id:"SIGN_IN"}))),r.a.createElement("img",{src:a,className:"D(b) M(a) Mt(50px) W(50%)",alt:"portfolio promo","data-test":"signed-out-img"}))}render(){const{isLoading:e,hasError:t,portfolios:a,meta:s,currentUrl:n,className:i,componentConfig:o={},pfOrder:l,pfId:c,pfPrefix:m,viewPrefix:d,isDefaultPf:p,quotes:u,isHighValueUser:h=!1,enablePremium:f=!1}=this.props,{viewId:g}=this.state,b=(c&&a?a[c]:s)||{};let E,y,N,C,P;const w=c?"Mb(30px) Px(20px)":"Mb(10px)";let S="";if(!this.isSignedIn&&!u)return this.renderSignedOut();if(e)E=r.a.createElement("div",{className:"Ta(c) Py(60px) Bgc($panelBackground) Bdrs(3px) Bd Bdc($finLightGrayAlt)"},r.a.createElement(ee.a,{type:"fuji",spinnerClass:"Mb(0)! Mt(7px)! Bgc(t)"}));else if(t||!a)E=r.a.createElement(Ws,null);else{let e,t;if(e=m===x.C||u?null:r.a.createElement(Nr,{key:"pf-header",pfId:c,pfPrefix:m,viewPrefix:d,pfMeta:b,isQuoteStreaming:this.state.isQuoteStreaming,isSmartphone:this.isSmartphone,enablePremium:f,isHighValueUser:h}),c){let e=g;if(u&&(e=this.isSmartphone?"v1":"v2"===g?"v1":g),t=r.a.createElement(Qs,{key:"detail",className:"Mb(30px)",portfolio:a[c],isMini:this.isSmartphone,enableViewBar:m!==x.C,rapidSec:this.rapidSec,currentUrl:n,pfPrefix:m,viewPrefix:d,viewId:e,enablePremium:f,isQuoteStreaming:this.state.isQuoteStreaming,isTableDense:this.state.isTableDense,isHighValueUser:h,componentConfig:this.props.componentConfig,quotes:u}),y=u?null:r.a.createElement(er,{pfId:c}),N=a[c],f&&!u&&(S+=" Bgc($panelBackground) Pt(10px)"),!!N&&N.linkedAccount){const e=r.a.createElement(X.FormattedDate,{value:N.linkedAccount.lastSynchronizedAt,year:"numeric",month:"long",day:"2-digit",weekday:"short",hour:"2-digit",minute:"2-digit",timeZoneName:"short"});C=r.a.createElement("div",{className:"C(black) Fz(s) Px(15px)--mobp Px(15px)--mobl"},r.a.createElement(X.FormattedMessage,{id:"TRUMPONOMICS_LAST_UPDATED",values:{date:e}}),r.a.createElement("span",{className:"Mstart(10px)"},r.a.createElement(X.FormattedMessage,{id:"CURRENCY_NOTICE",values:{currency:N.baseCurrency}}))),N.linkedAccount.status&&N.linkedAccount.status.stale&&(P=r.a.createElement(Pr,{key:"refresh",currentUrl:n,isMini:this.isSmartphone,linkedAccount:N.linkedAccount,onAuthenticate:this.onLinkedAccountRefresh,rapidSec:this.rapidSec}))}}else this.isSmartphone?t=[r.a.createElement("div",{key:"precontent",className:"P(20px) C($c-fuji-grey-j)"},r.a.createElement("h1",{className:"D(ib) Va(m) Lh(20px) Fz(14px) Lts(1px) Fw(b) Tt(u) Ell"},r.a.createElement(X.FormattedMessage,{id:"MY_PORTFOLIOS"})),r.a.createElement("span",{className:"D(ib) Va(m) End(20px) Pos(a)"},r.a.createElement(Ke,{className:"D(ib) Va(t)",pfMeta:b,onSuccessfulPortfolioImport:this.onSuccessfulPortfolioImport,onEditCurrency:this.onEditCurrency,portfolios:a,pfOrder:l,currentUrl:n,componentConfig:o,onAccountLink:this.onLinkedAccountRefresh,isSmartphone:this.isSmartphone,quotes:u}))),r.a.createElement(tt,{key:"list",portfolios:a,pfOrder:l,rapidSec:this.rapidSec})]:(t=[r.a.createElement(Nt,{key:"table",className:"Mb(30px)",portfolios:a,pfOrder:l,rapidSec:this.rapidSec})],this.props.routeQuery&&"1"===this.props.routeQuery.showBrokerList&&t.push(r.a.createElement(ne.a,{key:"link-modal",type:"link-broker-modal",className:"",rapidSec:Br,action:"buy",onAccountLink:this.onLinkedAccountRefresh})));E=[e,t]}if(this.isSmartphone){let e,t="";if(c&&m!==x.C){let t;u||(t=r.a.createElement("div",{className:"Pos(r)"},r.a.createElement(nr,{key:"bd",currentPf:N,portfolios:a,pfPrefix:m,viewPrefix:d,viewId:g,rapidSec:this.rapidSec,isSmartphone:this.isSmartphone}),r.a.createElement("div",{key:"toolbar",className:"IbBox Pos(a) End(0px) T(3px)"},r.a.createElement(Ke,{className:"Whs(nw) Cl(b) Py(12px) Pend(15px)",pfId:c,pfMeta:b,portfolios:a,pfOrder:l,isSmartphone:this.isSmartphone,pfPrefix:m,viewPrefix:d,viewId:g,currentUrl:n,componentConfig:o,onAccountLink:this.onLinkedAccountRefresh,onEditCurrency:this.onEditCurrency,onSuccessfulPortfolioImport:this.onSuccessfulPortfolioImport,isQuoteStreaming:this.state.isQuoteStreaming,toggleQuoteStreaming:this.toggleQuoteStreaming,isTableDense:this.state.isTableDense,toggleTableDense:this.toggleTableDense,isDefaultPf:p,quotes:u})))),e=r.a.createElement("header",{className:"Pos(r)"},P,t,C)}else t="Bgc($altRowColor)";return r.a.createElement("main",{className:t,"data-yaft-module":"tdv2-applet-PortfoliosSmartPhone"},e,E)}return r.a.createElement("main",{className:i+S,"data-yaft-module":"tdv2-applet-Portfolios"},r.a.createElement("header",{className:w},this.props.quotes?r.a.createElement("span",{className:"Fz(17px) Fw(b)"},r.a.createElement(X.FormattedMessage,{id:"SEARCH_RESULTS"})):[P,r.a.createElement(nr,{key:"bd",currentPf:N,portfolios:a,pfPrefix:m,viewPrefix:d,viewId:g,rapidSec:this.rapidSec,isSmartphone:this.isSmartphone})],r.a.createElement("div",{className:"IbBox Fl(end)"},y,r.a.createElement(Ke,{className:"Whs(nw) Cl(b)",pfId:c,pfMeta:b,pfPrefix:m,viewPrefix:d,viewId:g,currentUrl:n,componentConfig:o,onEditCurrency:this.onEditCurrency,onAccountLink:this.onLinkedAccountRefresh,onSuccessfulPortfolioImport:this.onSuccessfulPortfolioImport,isQuoteStreaming:this.state.isQuoteStreaming,toggleQuoteStreaming:this.toggleQuoteStreaming,isTableDense:this.state.isTableDense,toggleTableDense:this.toggleTableDense,isDefaultPf:p,quotes:u})),C),E)}}_r.displayName="Portfolios",_r.propTypes={className:i.a.string,portfolios:i.a.object,pfOrder:i.a.array.isRequired,meta:i.a.object.isRequired,isLoading:i.a.bool.isRequired,hasError:i.a.bool.isRequired,componentConfig:i.a.object,currentUrl:i.a.string,pfId:i.a.string,pfPrefix:i.a.string,viewPrefix:i.a.string,viewId:i.a.string,isHighValueUser:i.a.bool,enablePremium:i.a.bool,isDefaultPf:i.a.bool,quotes:i.a.string,routeQuery:i.a.object},_r.defaultProps={className:"smartphone_Px(20px)",componentConfig:{},pfPrefix:"portfolio",isHighValueUser:!1,enablePremium:!1,viewPrefix:"view"},_r.contextTypes={executeAction:i.a.func.isRequired,session:i.a.object.isRequired,getStore:i.a.func.isRequired,intl:i.a.object.isRequired},_r.initializeAction=c,_r.componentConfig={name:"componentPortfolios"};var Or=K()(_r,[o.a],(e,t)=>{const a=e.getStore(o.a),s=e.getStore(Sr.a).getCurrentRoute(),r=a.getLists(),{isHighValueUser:n,enablePremium:i}=e.getStore(Mr.a).getPageConfig()||{},l={currentUrl:s.url,meta:a.getMeta(),portfolios:r,pfOrder:a.getPfOrder(),isLoading:a.isLoading(),isHighValueUser:n,enablePremium:i,hasError:a.hasError(x.q)};if(s.params){const{pfId:e,quotes:t,prefix:n,viewPrefix:i,viewId:o}=s.params;l.pfId=e,l.pfPrefix=n,l.viewPrefix=i,e?(l.hasError=a.hasError(x.r),l.isDefaultPf=r&&r[e]&&r[e].defaultPf,l.quotes=void 0):t&&(l.pfId="internal_multi_quote",l.quotes=t),o&&(l.viewId=o)}return s.query&&(l.routeQuery=s.query),l}),Ar=a(1763),Lr=a.n(Ar);const jr={weekday:"short",hour:"2-digit",minute:"2-digit"},$r=(e,t)=>{const{data:a,rapidSec:s,isSmartphone:n}=e,i=a.url,o=a.clickUrl,l=t.intl.formatRelative,c=t.intl.formatDate,m=t.session&&t.session.dimensions&&t.session.dimensions.device||"desktop";let d;if(a.tickers&&a.tickers.length&&(d=a.tickers.map((e,t)=>{let i=n?"Td(n) ":"";return a.tickers.length>1?t===a.tickers.length-1?i+="Pstart(5px) Pend(10px)":i+=0===t?"Bdendc($c-fuji-grey-c) Bdends(s) Bdendw(1px) Pend(8px)":"Bdendc($c-fuji-grey-c) Bdends(s) Bdendw(1px) Pstart(5px) Pend(8px)":i+="Pend(10px)",n?r.a.createElement("h3",{key:e,className:`Fw(b) Fz(s) C($c-fuji-blue-1-b) D(ib) ${i}`},A.a.decode(e||"")):r.a.createElement(le.a,{key:e,className:"D(ib) "+i,href:Object(f.e)("quote",{symbol:e,comscoreEnabled:!0}),i13nModel:{sec:s,slk:e,itc:0,elm:"qte",elmt:"link"}},r.a.createElement("h3",{className:"Fw(b) Fz(14px)"},A.a.decode(e||"")))})),i){const e=Object(f.p)(i,{uuid:a.id,title:a.title,device:m,site:"finance"},!a.hosted);if(n){let t;return a.imageSet.medium&&a.imageSet.medium.url&&(t=r.a.createElement("div",{className:"W(90px) Mstart(5px)"},r.a.createElement("img",{src:a.imageSet.medium.url,alt:A.a.decode(a.title||"")}))),r.a.createElement("li",{className:"P(20px) Mb(10px) Bxsh($boxAreaShadow) Bgc(white)"},r.a.createElement(le.a,{href:e,className:"Td(n) D(f) Jc(sb)",i13nModel:{sec:s,slk:a.title,itc:0,elm:"hdln",elmt:"link"}},r.a.createElement("div",null,d,r.a.createElement("h3",{className:"Fz(14px) Fw(b) Pend(10px) C(black) Mt(5px) LineClamp(4,72px)"},A.a.decode(a.title||""))),r.a.createElement("div",null,t)),r.a.createElement("footer",{className:"W(100%) Mt(10px)"},r.a.createElement("span",{className:"Fz(12px) C($c-fuji-grey-h)"},A.a.decode(a.provider_name||"")," ","•"," ",l(1e3*a.provider_publish_time))))}return r.a.createElement("li",{className:"Mb(15px)"},r.a.createElement("div",null,d,r.a.createElement("span",{className:"Fz(12px) C($c-fuji-grey-h)"},A.a.decode(a.provider_name||"")," ","•"," ",c(1e3*a.provider_publish_time,jr))),r.a.createElement(le.a,{href:e,className:"Td(n)",i13nModel:{sec:s,slk:a.title,itc:0,elm:"hdln",elmt:"link"}},r.a.createElement("h3",{className:"Fw(b) Fz(m) C($c-fuji-blue-4-b) C($c-fuji-blue-1-a):h D(ib)"},A.a.decode(a.title||""))))}if(o){if(n){let e;return a.image&&a.image.url&&(e=r.a.createElement("div",{className:"W(90px) Mstart(5px)"},r.a.createElement("img",{src:a.image.url,alt:A.a.decode(a.title||"")}))),r.a.createElement("li",{className:"P(20px) Mb(10px) Bxsh($boxAreaShadow) Bgc(white)"},r.a.createElement(J.I13nAnchor,{href:o,className:"Td(n) D(f) Jc(sb)",target:"_blank",rel:"noopener",i13nModel:{sec:s,slk:a.title,itc:0,elm:"hdln",elmt:"link"}},r.a.createElement("div",null,r.a.createElement("span",{className:"C($c-fuji-grey-h) Fw(500)"},A.a.decode(a.sponsoredByLabel||""))," ",r.a.createElement(Ce.Icon,{asset:Lr.a,height:"15",className:"Fill($c-fuji-grey-h)! Stk($c-fuji-grey-h)! Va(m)!"})," ",r.a.createElement("span",{className:"C($c-fuji-grey-h) Fz(s)"},A.a.decode(a.publisher||"")),r.a.createElement("h3",{className:"Fz(14px) Fw(b) Pend(10px) C(black) Mt(5px) LineClamp(4,72px)"},A.a.decode(a.title||""))),e))}return r.a.createElement("li",{className:"W(60%) Mb(15px)"},r.a.createElement(J.I13nAnchor,{href:o,className:"Td(n) D(ib)",target:"_blank",rel:"noopener",i13nModel:{sec:s,slk:a.title,itc:0,elm:"hdln",elmt:"link"}},r.a.createElement("span",{className:"W(100%)"},r.a.createElement("span",{className:"C($c-fuji-blue-1-a) Fw(500)"},A.a.decode(a.sponsoredByLabel||""))," ",r.a.createElement(Ce.Icon,{asset:Lr.a,height:"15",className:"Fill($c-fuji-grey-h)! Stk($c-fuji-grey-h)! Va(m)!"})," ",r.a.createElement("span",{className:"C($c-fuji-grey-h) Fz(xs)"},A.a.decode(a.publisher||""))),r.a.createElement("h3",{className:"Fw(b) Fz(m) C($c-fuji-blue-4-b) C($c-fuji-blue-1-a):h"},A.a.decode(a.title||""))))}return null};$r.displayName="PortfolioNewsItem",$r.propTypes={data:i.a.object.isRequired,rapidSec:i.a.string,isSmartphone:i.a.bool},$r.contextTypes={intl:i.a.object.isRequired,session:i.a.object.isRequired};var Vr=$r;function Hr(e,t,a){t=t||{};const s=Array.isArray(t.symbols)?t.symbols.join(","):t.symbols;if(!s){const e=u.a.http.badRequest("loadPortfolioNews: Missing symbols");return void(a&&a(e))}const r={count:t.count||20,symbols:s,start:t.startTime,sizelabels:"medium",widths:"90",heights:"90"};e.dispatch("SET_PORTFOLIO_NEWS_LOADING",{loading:!0}),Object(h.b)(e,{resource:"tachyon.news",params:r}).then(s=>{if(!s)throw u.a.http.badGateway("Empty response from server for loadPortfolioNews");t.initialLoad?e.dispatch("INITIAL_PORTFOLIO_NEWS_LOAD_SUCCESS",s):e.dispatch("ADDITIONAL_PORTFOLIO_NEWS_LOAD_SUCCESS",s),a&&a(null,s)}).catch(t=>{const s={error:t,event:"EVENT_LOAD_PORTFOLIO_NEWS_FAIL"};e.dispatch("LOAD_PORTFOLIO_NEWS_FAIL",s),a&&a(s)})}var zr=a(1584),qr=a.n(zr),Wr=a(1566),Ur=a.n(Wr);const Gr=20;function Yr(e,t,a){t=t||{},j.a.parallel([a=>{Hr(e,{startTime:t.startTime,symbols:t.symbols,count:t.count||20,initialLoad:t.initialLoad},a)},a=>{qr()(e,{id:t.adId||"nativead",count:t.adsCount||Gr,se:t.se,sponsorship_enabled:t.sponsorship_enabled||!1},()=>{const s=e.getStore(Ur.a),r=t.adId||"nativead",n=s.getAds(r);n&&e.dispatch("LOAD_PORTFOLIO_ADS_SUCCESS",n&&n.toJS()),a(null,n)})}],(t,s)=>{t&&(e.logger.error(t),"EVENT_LOAD_PORTFOLIO_NEWS_FAIL"===t.event)?a&&a(t):a&&a()})}var Qr=a(2038),Zr=a(636);const Kr=300,Xr=20;class Jr extends r.a.PureComponent{constructor(e,t){super(e,t),this.isSmartphone=Object(f.C)(t),this.rapidSec=Object(_.t)("PortfolioNewsStream"),this.onScroll=this.onScroll.bind(this)}componentDidMount(){const{infinite:e,symbols:t,newsCount:a,se:s}=this.props;e&&window.document&&window.document.addEventListener("scroll",this.onScroll),t.length&&this.loadNews({count:a,adsCount:Xr,symbols:t,se:s,initialLoad:!0})}componentWillReceiveProps(e){e.symbols.length&&!ct()(e.symbols,this.props.symbols)&&this.loadNews({count:e.newsCount,symbols:e.symbols,adsCount:Xr,se:e.se,initialLoad:!0})}componentWillUnmount(){const{infinite:e}=this.props;e&&window.document&&window.document.removeEventListener("scroll",this.onScroll)}onScroll(){const{isLoading:e,moreNewsCount:t}=this.props;if(e)return;const a=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,s=document.documentElement&&document.documentElement.scrollHeight||document.body.scrollHeight;a+(document.documentElement.clientHeight||window.innerHeight)>=s-Kr&&this.loadNews({count:t,symbols:this.props.symbols,startTime:this.props.startTime})}loadNews({count:e,adsCount:t,symbols:a,startTime:s,se:r,initialLoad:n}){s||!this.props.loadAds?this.context.executeAction(Hr,{count:e,symbols:a,startTime:s,initialLoad:n}):this.context.executeAction(Yr,{count:e,adsCount:t,symbols:a,se:r,adId:"nativead",initialLoad:n})}render(){const{className:e,newsData:t,hasError:a,showTitle:s}=this.props;if(a||!t||0===t.length)return null;const n=t.map((e,t)=>r.a.createElement(Vr,{key:t+e.title,data:e,rapidSec:this.rapidSec,isSmartphone:this.isSmartphone}));return r.a.createElement("section",{className:e,"data-yaft-module":"tdv2-applet-PortfolioNewsStream"},s&&r.a.createElement("header",null,r.a.createElement("h2",{className:"Fw(b) Fz(17px) Mb(15px) smartphone_D(n)"},r.a.createElement(X.FormattedMessage,{id:"PORTFOLIO_NEWS"}))),r.a.createElement("ul",null,n))}}Jr.displayName="PortfolioNewsStream",Jr.propTypes={className:i.a.string,symbols:i.a.array.isRequired,newsCount:i.a.number,moreNewsCount:i.a.number,loadAds:i.a.bool,newsData:i.a.array.isRequired,startTime:i.a.number,infinite:i.a.bool,isLoading:i.a.bool,hasError:i.a.bool,showTitle:i.a.bool,se:i.a.number},Jr.defaultProps={infinite:!0,className:"D(n)--print",loadAds:!0,newsCount:20,moreNewsCount:20,se:4492794,showTitle:!0},Jr.contextTypes={getStore:i.a.func.isRequired,session:i.a.object.isRequired,executeAction:i.a.func.isRequired};const en={Portfolios:Or,PortfolioNewsStream:K()(Jr,[Qr.a,o.a],(e,t)=>{const a=e.getStore(Sr.a).getCurrentRoute(),s=e.getStore(Qr.a),r=e.getStore(Zr.a).getConfig("app",["base"]),n=a.params||{};let i=[];if(n.pfId){const t=e.getStore(o.a).getLists(n.pfId);t&&(i=Object(x.X)(t))}else n.quotes&&n.quotes&&(i=n.quotes.toUpperCase().split(","));return{symbols:i,startTime:s.getMeta().next,newsData:s.getNewsData(),isLoading:s.isLoading(),hasError:s.hasError(),se:r&&r.getIn(["nativeAds","se"])}}),ExternalFeedback:a(725).a};t.controllerViews=en;t.meta={langBundle:"react-finance"}},1763:function(e,t){if(void 0===a)var a={};a["Moneyball-v2"]={name:"Moneyball-v2",height:24,width:24,path:"M5.636 4.222c-.39-.39-1.023-.39-1.414 0-.39.39-.39 1.024 0 1.414l.707.707c.39.39 1.022.39 1.414 0 .39-.39.39-1.023 0-1.414l-.708-.708zM4.93 17.658l-.708.707c-.39.39-.39 1.023 0 1.414.39.39 1.023.39 1.414 0l.707-.708c.39-.39.39-1.024 0-1.414-.39-.39-1.023-.39-1.414 0zm14.14 0c-.39-.39-1.023-.39-1.413 0-.39.39-.39 1.023 0 1.414l.707.707c.39.39 1.024.39 1.414 0 .39-.392.39-1.025 0-1.415l-.707-.707zm0-11.315l.708-.707c.39-.39.39-1.023 0-1.414-.39-.39-1.024-.39-1.414 0l-.707.707c-.39.39-.39 1.024 0 1.414.39.39 1.023.39 1.414 0zM22 11h-1c-.553 0-1 .448-1 1s.447 1 1 1h1c.552 0 1-.448 1-1s-.448-1-1-1zM10 9h5c.552 0 1-.448 1-1s-.448-1-1-1h-2c0-.55-.447-1-1-1-.553 0-1 .45-1 1H9.5C8.12 7 7 8.12 7 9.5v1C7 11.88 8.12 13 9.5 13H13c.552 0 1 .448 1 1s-.448 1-1 1H8c-.553 0-1 .448-1 1s.447 1 1 1h3c0 .55.447 1 1 1 .553 0 1-.45 1-1h.5c1.38 0 2.5-1.12 2.5-2.5v-1c0-1.38-1.37-2.5-3-2.5h-3c-.553 0-1-.448-1-1s.447-1 1-1zm2-5c.553 0 1-.448 1-1V2c0-.552-.447-1-1-1-.553 0-1 .448-1 1v1c0 .552.447 1 1 1zm-9 7H2c-.553 0-1 .448-1 1s.447 1 1 1h1c.552 0 1-.448 1-1s-.448-1-1-1zm9 9c-.553 0-1 .448-1 1v1c0 .552.447 1 1 1 .553 0 1-.448 1-1v-1c0-.552-.447-1-1-1z"},void 0!==e&&e.exports&&(e.exports=a["Moneyball-v2"])},1779:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(1841),r=a(688),n=a(1842),i=a(1843),o=a(1844),l=a(1845),c=a(1846),m=a(1847),d=a(357),p=a(1848),u=a(690),h=a(1849),f=a(1571),g=a(691);function b(){}function x(e){for(let t=e.length-1,a=e[t];~t;a=e[--t])if(a&&a.y)return a}let E;function y(e,a,y){e=d.copyIfUndefined({type:1,range:"1d",w:220,h:110,region:"US",lang:"en-US",radius:2.5,symbol:""},e);const{interval:N,range:C,period1:P,period2:w,partner:S}=e;if(!e.symbol&&!e.data)throw new Error("Missing symbol & data");function I(r,b){if(r)return y(r);let N,P;e.debug&&(N=Date.now(),console.log("Got data",b));try{(P=function(e,a,r){const{comparisons:b=[],debug:y,h:N,lang:C="en-US",radius:P=2.5,range:w="1d",zebra:S=!0,type:I=1,w:M,symbol:k,showPriceLabels:v=!0,formatMessage:T,errorMessage:F="This chart is not available.",disableWatermark:R}=r,D=[k].concat(b);let{crosshair:B,volume:_}=r;b.length&&(_=!1,B=!1);const O=d.copyIfUndefined({},t.DEFAULT_UI,r.ui);let{watermark:A}=O;if(A||!1===A||R||(E||((E=new Image).onload=function(){A&&n.default($,K,X,A)},E.src=n.WATERMARK_SRC),A=E),e||(e=r.data),y&&console.log("Starting drawing",r),!e)throw new Error("Data is required in Libra");let L,j=null;try{L=m.processPrices(e,d.getInterval(M,w))}catch(e){j=e}const{main:$,crosshair:V}=f.default(a,{canvas:O.canvas,crosshair:!j&&B,font:O.font,h:N,onHover:function(e){const{points:t,bars:a}=te;if(!V)return;if(d.reset(V,M,N,null),!e)return;const s=e.x/ae.step()|0;if(s>=t[k].length)return;const r=t[k][s],n={x:r.x,y:r.y};d.isNumber(n.x)&&d.isNumber(n.y)&&u.draw({ctx:V,h:X,lineHeight:H,radius:P,viewportW:K,w:M,x:n.x,xValue:Q(new Date(L.data[k][s].ts)),y:n.y,ui:O,yTickPadding:z,trend:a[s]?a[s].trend:null,yValue:Y(L.data[k][s].value),volume:_&&Z(L.data[k][s].volume),volumeY:_&&a[s].y})},w:M});if(j)throw h.default($,F,O.font,O.textColor),j;L.volumeExtent[0]||L.volumeExtent[1]||(_=!1);const H=1.2*d.extractFontSize(O.font),z=11,q=1e3*e.meta.gmtoffset,W=b.length>0?"percent":"decimal",U="percent"===W?2:e.meta.scale,G=o.xTickFormat(w,C,e.meta.exchangeTimezoneName,q),Y=o.yTickFormat(C,W,U),Q=o.timeFormat(w,C,e.meta.exchangeTimezoneName,q),Z=o.formatVolume(C,T),K=M-5-P-z-Math.max(d.estimateNumWidth($,Y(Math.max(Math.abs(L.extent[0]),Math.abs(L.extent[1])))),_?d.estimateNumWidth($,Z(Math.max(L.volumeExtent[0],L.volumeExtent[1]))):0),X=N-P-H,J=_?.8*X:X,ee=_?.2*X:0;y&&console.log("Done scaling canvas");const te=m.default({w:K,h:X,graphHeight:J,data:L,volumeHeight:ee,isCandle:3===I}),{xAxis:ae,yAxis:se}=te,re=i.getYTicks({format:Y,h:J,ticks:3,yAxis:se}),ne=i.getXTicks({exchangeTzOffset:q,format:G,range:w,tradingPeriods:e.meta.tradingPeriods,xAxis:ae});return{draw:function(){const{trend:t}=L,{yAxis:a,points:r,bars:n,candles:i}=te;if(d.reset($,M,N),y&&console.log("Done drawing watermark"),3===I?c.default({candles:i,type:I,ctx:$,w:K,h:X,points:D.map(e=>r[e]),trend:t,range:w,ui:O}):l.default({type:I,ctx:$,h:X,points:D.map(e=>r[e]),trend:t,range:w,ui:O}),_&&p.default({ctx:$,type:I,graphHeight:J,w:K,h:X,bars:n,ui:O}),y&&console.log("Done drawing graph"),s.xAxis($,{w:M,h:X,viewportW:K,ui:O,ticks:ne,tickPadding:H,zebra:S}),y&&console.log("Done drawing X Axis"),s.yAxis($,{w:K,h:J,ui:O,ticks:re,tickPadding:z}),y&&console.log("Done drawing Y Axis"),0===b.length){const e=x(r[k]);y&&console.log("Dot point should be",e.x,e.y),g.dot({w:K,ctx:$,fillStyle:O.dotColor,x:e.x,y:e.y,radius:P})}0===b.length&&"1d"===w&&d.isNumber(e.meta.previousClose)&&g.yLabel({ctx:$,w:M,x:K,y:a(e.meta.previousClose),yTickPadding:z,lineHeight:H,benchlineColor:O.benchlineColor,benchlineLabelColor:O.benchlineLabelColor,value:Y(e.meta.previousClose)}),v&&(D.forEach((e,s)=>{const n=r[e];if(!n)return;let i;D.length>1?i=O.comparisonColors[s%O.comparisonColors.length]:(i=O.graphLineColor)||1!==D.length||(i="1d"===w?t>0?O.trendUpColor:O.trendDownColor:O.multiDayAreaColor);const o=x(n);g.yLabel({ctx:$,w:M,x:K,y:o&&o.y,yTickPadding:z,lineHeight:H,backgroundColor:i,value:Y(a.invert(o&&o.y))})}),y&&console.log("Done drawing labels, all done"))},rawData:r.data,processedData:te}}(b,a,e)).draw()}catch(t){return e.debug&&(console.log("Error drawing libra"),console.error(t),console.log(t.stack)),y(t)}e.debug&&console.log(`Rendering ${e.symbol} - ${C} took ${Date.now()-N}ms`),y(null,P)}if(e.symbol=e.symbol.toUpperCase(),"function"!=typeof y&&(y=b),e.data)return I(null,e.data);let M={region:e.region,lang:e.lang,comparisons:e.comparisons,includePrePost:!1,interval:N||d.getInterval(e.w,C)};P&&w?(M.period1=P,M.period2=w):M.range=C,r.default({partner:S,path:`/v8/finance/chart/${e.symbol}`,query:M},(e,t)=>e?I(e,null):t&&t.chart&&Array.isArray(t.chart.result)&&t.chart.result.length?void I(null,t.chart.result[0]):I(new Error(`Malformed response from server ${JSON.stringify(t)}`),null))}t.DEFAULT_UI={graphLineColor:null,graphLineWidth:0,graphAreaColor:null,multiDayAreaColor:"rgb(0, 129, 242)",benchlineColor:"rgba(0, 0, 0, 0.35)",benchlineLabelColor:"#5b636a",dotColor:"#26282a",axisColor:"#d8dae3",textColor:"#464e56",trendUpColor:"#00b061",trendDownColor:"#f0162f",comparisonColors:["#1a9af9","#1ac567","#f0126f","#9552ff","#45e3ff","#ff7b12","#400090","#30d3b6","#e20081","#787d82","#000000","#ffb700"],font:"11px Helvetica Neue, Helvetica, Arial, sans-serif"},t.init=y,t.WATERMARK_SRC=n.WATERMARK_SRC;var N=a(1850);t.CHART_TYPES=N.CHART_TYPES,t.default=y},1781:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n);const o=({containerClassName:e,className:t,tickClassName:a,value:s})=>{if("number"!=typeof s)return null;let n;return n=s<=0?"3px":s>=1?"calc(100% - 7px)":100*s+"%",r.a.createElement("div",{className:"Pos(r) D(ib) Va(m) "+e},r.a.createElement("div",{className:"W(100%) H(8px) Bdrs(4px) Bgi($insightsValuationGradient) "+t},r.a.createElement("div",{className:"Pos(a) T(-2px) W(3px) H(12px) Bdrs(4px) Bgc(black) "+a,style:{left:n}})))};o.displayName="TrafficLight",o.propTypes={value:i.a.number.isRequired,containerClassName:i.a.string,className:i.a.string,tickClassName:i.a.string},o.defaultProps={containerClassName:"W(70px) Mt(5px) Mend(16px)",className:"Mb(2px)",tickClassName:""},t.a=o},1782:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(91),l=a.n(o),c=a(19),m=a(20);a.n(m);class d extends r.a.Component{constructor(e,t){super(e,t),this.onClose=this.onClose.bind(this),this.onSubmit=this.onSubmit.bind(this)}onClose(){this.context.executeAction(l.a.hide),"function"==typeof this.props.onClose&&this.props.onClose()}onSubmit(e){e.preventDefault(),"function"==typeof this.props.onSubmit&&(this.props.onSubmit(e),this.onClose())}render(){const{rapidSec:e,children:t,titleMessageId:a,subTitleMessage:s,submitMessageId:n,errorMessageId:i,submitI13nModel:o}=this.props;return r.a.createElement("section",{className:"Bxsh($boxAreaShadow) Bgc(white) P(25px) Pos(f) T(50%) Start(50%) Translate(-50%,-50%) Miw(400px) Miw(300px)--mobp","data-test":"fin-pfModal"},r.a.createElement("h2",{className:"Fz(17px) C(black) Mb(10px)"},r.a.createElement(c.FormattedMessage,{id:a})),s&&r.a.createElement("h3",{className:"Fz(m) Fw(500) C($c-fuji-grey-i) Mb(10px)"},s),i&&r.a.createElement("div",{className:"C($dataRed) Fw(500) Fz(s) Mb(5px)"},r.a.createElement(c.FormattedMessage,{id:i})),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",null,t),r.a.createElement("div",{className:"Bfc Mt(20px)"},r.a.createElement(m.I13nButton,{type:"submit",className:"Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(3px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px) O(n):f",i13nModel:Object.assign({},o,{sec:e,slk:"submit",itc:1,elm:"btn",elmt:"cl",rspns:"cl"})},r.a.createElement(c.FormattedMessage,{id:n})),r.a.createElement(m.I13nButton,{type:"button",className:"C($c-fuji-blue-1-b) Bd Bdc($c-fuji-blue-1-b) Bdc($actionBlueHover):h C($c-fuji-blue-1-b) C($actionBlueHover):h C($actionBlueHover):f Fw(500) Px(20px) Py(8px) Bdrs(3px) Fz(s) D(ib) Mstart(20px) Whs(nw) Miw(110px) O(n):f",i13nModel:{sec:e,slk:"cancel",itc:1,elm:"btn",elmt:"cl",rspns:"cl"},onClick:this.onClose},r.a.createElement(c.FormattedMessage,{id:"CANCEL"})))))}}d.displayName="PortfolioPopup",d.propTypes={rapidSec:i.a.string.isRequired,submitI13nModel:i.a.object,onSubmit:i.a.func.isRequired,onClose:i.a.func,titleMessageId:i.a.string.isRequired,subTitleMessage:i.a.string,submitMessageId:i.a.string.isRequired,errorMessageId:i.a.oneOfType([i.a.bool,i.a.string]),children:i.a.node},d.contextTypes={executeAction:i.a.func.isRequired},d.defaultProps={submitMessageId:"SUBMIT"},t.a=d},1789:function(e,t){if(void 0===a)var a={};a.delete={name:"delete",height:48,width:48,path:"M42.885 7.616h-9v-2c0-1.104-.896-2-2-2h-14c-1.104 0-2 .896-2 2v2h-9c-1.104 0-2 .896-2 2s.896 2 2 2h36c1.104 0 2-.896 2-2s-.897-2-2-2zM35.885 41.616h-22v-24h-4v26c0 1.104.896 2 2 2h26c1.104 0 2-.896 2-2v-26h-4v24z"},void 0!==e&&e.exports&&(e.exports=a.delete)},1805:function(e,t,a){"use strict";t.a=function(e,t){const{pfId:a,posIds:s}=t;if(!a)throw r.a.http.badRequest("deletePositions: missing `pfId`");if(!s)throw r.a.http.badRequest("deletePositions: missing `posIds`");const i=e.request.user.guid;if(!i)throw r.a.http.badRequest("deletePositions: Unable to fetch user guid");return Object(n.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:i,pfId:a},method:"update",body:{parameters:{userId:i,userIdType:"guid",pfId:a,fullResponse:!0},operations:s.map(e=>({operation:"position_delete",posId:e}))}}).then(()=>{e.dispatch("FIN_PF_LIST_DELETE_POSITIONS",{pfId:a,posIds:s}),e.executeAction(o.a.hide)}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:l.h}),t})};var s=a(26),r=a.n(s),n=a(88),i=a(91),o=a.n(i),l=a(246)},1806:function(e,t){if(void 0===a)var a={};a["plus-circle"]={name:"plus-circle",height:48,width:48,path:"M26 22v-6c0-1.104-.896-2-2-2-1.105 0-2 .896-2 2v6h-6c-1.104 0-2 .896-2 2 0 1.105.896 2 2 2h6v6c0 1.105.895 2 2 2 1.104 0 2-.895 2-2v-6h6c1.104 0 2-.895 2-2 0-1.104-.896-2-2-2h-6zm-2 20c9.94 0 18-8.06 18-18S33.94 6 24 6 6 14.06 6 24s8.06 18 18 18zm0 4C11.85 46 2 36.15 2 24S11.85 2 24 2s22 9.85 22 22-9.85 22-22 22z"},void 0!==e&&e.exports&&(e.exports=a["plus-circle"])},1807:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(1586),l=a(19),c=a(11),m=(a.n(c),a(1572)),d=a(1561),p=a(190),u=a(632),h=a.n(u),f=a(43),g=a(364),b=a.n(g);const x={BTN:"button",LINK:"link",NOMODAL:"nomodal"};class E extends r.a.PureComponent{constructor(e){super(e),this.rapidSec=e.rapidSec||Object(f.t)("AddSymbolBtn"),this.onAdd=this.onAdd.bind(this),this.setDropdownRef=this.setDropdownRef.bind(this)}setDropdownRef(e){e&&(this.listDropDown=e)}closeDropDown(){this.listDropDown&&this.listDropDown.closeMenu()}onAdd(e,t){Object(f.f)("add-symbol",this,{sec:this.props.rapidSec,subsec:this.props.subSec,slk:t,outcm:t+" added"}),this.context.executeAction(o.a,{symbols:t,pfId:this.props.pfId,silent:!1}),this.closeDropDown(),"function"==typeof this.props.onAdd&&this.props.onAdd(e,t)}renderDropdown({containerClass:e,inputClass:t="",resultClassName:a=""}){const{showTip:s,subSec:n,autoFocus:i}=this.props;let o,c=r.a.createElement(d.a,{inputClassNames:b.a.input+"Pend(30px) My(8px) W(100%) "+t,resultClassNames:"W(100%) T(38px) "+a,containerClassNames:"Bxz(bb) Z(2) "+e,submitButtonClassName:"D(n)!",searchIconClassNames:"Pos(a) Px(8px) T(15px) End(12px) Fz(m) H(15px) W(15px) Stk($c-fuji-blue-1-b)! Fill($c-fuji-blue-1-b)!",haveSubmitButton:!1,onEscape:this.onEscapeActive,onSubmit:this.onAdd,onSelect:this.onAdd,searchI13n:{subsec:n},placeholderKey:"AUTOCOMPLETE_PLACEHOLDER",showFooter:this.props.showFooter,resultsRowConfig:{type:"addSymbol"},autoToggleResults:!1,autoFocus:i});return s&&(o=r.a.createElement("div",{key:"tip",className:"Px(8px) C($c-fuji-grey-j) Pt(6px) Pb(10px)"},r.a.createElement("div",{className:"Mb(10px) Fw(500) Fz(14px)"},r.a.createElement(l.FormattedMessage,{id:"ENTER_SYMBOL_COMPANY"})),r.a.createElement("div",{className:"Mb(10px)"},r.a.createElement(l.FormattedMessage,{id:"LOOKUP_FOOTER_TIP"})),r.a.createElement("div",null,r.a.createElement(l.FormattedMessage,{id:"CASH_TIP"})))),[r.a.createElement(m.a,{key:"signin",signedInElement:c,wrapInDialog:!0}),o]}render(){const{menuClassName:e,arrowStyle:t,className:a,type:s}=this.props;let n,i,o,m;return s===x.NOMODAL?r.a.createElement("div",{className:"Pos(r) "+a},this.renderDropdown({inputClass:"Fz(m)",containerClass:"Px(8px)"})):(s===x.LINK?(n="add-sym-btn Td(n) Fz(s) D(ib) Bxz(bb) Py(7px) Px(0) C($c-fuji-blue-1-b) C($actionBlueHover):h Fw(500) ",i="H(13px) add-sym-btn:h_Fill($actionBlueHover)! add-sym-btn:h_Stk($actionBlueHover)! Mend(4px) Mt(-3px) Va(m)!",o="#0081f2",m="T(35px) "):(n="Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Pstart(10px) Pend(15px) Py(8px) Bdrs(3px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px)",i="Fill(white)! Stk(white)! Fw(b) Pend(6px) Mt(-3px) Va(m)!",o="#fff",m="Start(-45px) T(45px) "),r.a.createElement(p.a,{id:this.rapidSec,ref:this.setDropdownRef,content:this.renderDropdown({containerClass:"Py(0) Px(8px) W(300px) Maw(98%)",resultClassName:"Mx(-8px)"}),className:"M(0) D(ib) Bdrs(3px) Fz(s)",menuClassName:"Bd Bdrs(3px) Bdc($c-fuji-grey-c) Z(10) Bxsh($boxShadow) Bgc(white) W(300px) Ta(start) Cur(a) "+m+e,showClose:!1,showArrow:!0,arrowStyle:t},r.a.createElement("div",{className:n+a,"data-test":"add-symbol-btn"},r.a.createElement(c.Icon,{asset:h.a,height:13,color:o,className:i}),r.a.createElement(l.FormattedMessage,{id:"ADD_SYMBOL"}))))}}E.displayName="AddSymbolBtn",E.propTypes={showFooter:i.a.bool,type:i.a.oneOf(Object.keys(x).map(e=>x[e])),pfId:i.a.string,onAdd:i.a.func,className:i.a.string,menuClassName:i.a.string,arrowStyle:i.a.object,showTip:i.a.bool,subSec:i.a.string,autoFocus:i.a.bool,rapidSec:i.a.string},E.defaultProps={type:x.LINK,className:"",menuClassName:"End(0)",arrowStyle:{left:15},subSec:"",autoFocus:!1,showTip:!1},E.contextTypes={executeAction:i.a.func.isRequired},t.a=E},1821:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(43),l=a(30),c=a(1779),m=(a.n(c),a(90)),d=a.n(m),p=a(197),u=a(93),h=a.n(u),f=a(143),g=a(247),b=a(11),x=(a.n(b),a(1613)),E=a.n(x),y=a(78),N=a.n(y),C=a(19),P=a(1577),w=(a.n(P),a(20)),S=(a.n(w),a(190)),I=a(659),M=a.n(I),k=a(1851),v=a.n(k),T=a(682),F=a.n(T),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const D=["1d","5d","1m","6m","YTD","1y","5y","Max"],B={watermark:!1,benchlineColor:"rgba(0, 0, 0, 0.06)",font:"500 11px Helvetica Neue, Helvetica, Arial, sans-serif"},_=6e4,O={line:{type:c.CHART_TYPES.line,icon:v.a,msg:"LINE",ui:{graphLineWidth:2}},area:{type:c.CHART_TYPES.area,icon:M.a,msg:"AREA"},trendArea:{type:c.CHART_TYPES.trendArea,icon:M.a,msg:"RGAREA"},candle:{type:c.CHART_TYPES.candle,icon:F.a,msg:"CANDLE"}},A=["line","area","trendArea","candle"];class L extends r.a.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.onClick(this.props.rangeValue)}render(){const{displayText:e,isActive:t,className:a,isSmartphone:s}=this.props;let n;return t?(n=" C($c-fuji-blue-1-a) Fw(b)",s&&(n=" W(100%) Py(8px) Bgc($c-fuji-grey-l) C(white) Fw(500)")):(n=" C($c-fuji-blue-1-a):h C($c-fuji-grey-j) Fw(500)",s&&(n=" W(100%) Py(8px) Bgc($c-fuji-grey-b) C($c-fuji-grey-i) Fw(500)")),r.a.createElement("button",{className:a+n,onClick:this.onClick,"aria-pressed":t,"data-ylk":"elm:btn;elmt:ct;itc:1;sec:virgo-range"},e)}}L.displayName="RangeMapButton",L.propTypes={className:i.a.string,displayText:i.a.string.isRequired,rangeValue:i.a.oneOfType([i.a.number.isRequired,i.a.string.isRequired]),isActive:i.a.bool.isRequired,onClick:i.a.func.isRequired,isSmartphone:i.a.bool},L.defaultProps={className:"Fz(s) M(0) P(0) Tt(u) Bd(0) ",isSmartphone:!1};class j extends r.a.Component{constructor(e,t){super(e,t),this.state={width:300,range:e.range,type:"trendArea"},this.onRangeClick=this.onRangeClick.bind(this),this.onResize=this.onResize.bind(this),this.setContainerRef=this.setContainerRef.bind(this),this.onLineChartChange=this.onLineChartChange.bind(this),this.onAreaChartChange=this.onAreaChartChange.bind(this),this.onRGAreaChartChange=this.onRGAreaChartChange.bind(this),this.onCandleChartChange=this.onCandleChartChange.bind(this),this.onChartClick=this.onChartClick.bind(this);const a=t.session&&t.session.dimensions&&t.session.dimensions.device||"desktop";this.isDesktop="desktop"===a||"desktop-lite"===a,this.isSmartphone=Object(l.C)(t),this.crumb=t.getStore(f.a).getCrumb()}componentDidMount(){const e=d.a.getSub("PRF","qct",p.a)||null;e&&e!==this.state.type&&this.setState({type:e}),this.container&&(this.onResize(),this.unsubscribeResize=Object(P.subscribe)("resize",this.onResize))}componentWillUnmount(){this.unsubscribeResize&&this.unsubscribeResize(),this.polling&&clearInterval(this.polling)}onResize(){const e=this.container.getBoundingClientRect().width;this.state.width!==e&&this.setState({width:e})}componentDidUpdate(){const{symbol:e}=this.props;this.container&&this.onResize(),e&&this.renderLibra()}setChartTypeChange(e){this.setState({type:e}),function(e){d.a.setSub("PRF","qct",e,p.a)}(e)}onLineChartChange(){this.setChartTypeChange("line")}onAreaChartChange(){this.setChartTypeChange("area")}onRGAreaChartChange(){this.setChartTypeChange("trendArea")}onCandleChartChange(){this.setChartTypeChange("candle")}onRangeClick(e){this.setState({range:e})}onChartClick(){const{symbol:e}=this.props;Object(o.e)(this.context,{elm:"img",sec:"virgo",slk:"chart-click",c10:e,outcm:"fullscreen",rspns:"nav",itc:0});const t=Object(o.i)("chart",{symbol:e});this.context.executeAction(h.a,{type:"click",url:t})}setContainerRef(e){this.container=e,this.polling=setInterval(this.renderLibra.bind(this),_)}renderLibra(){if(!this.container)return;const{width:e,range:t,type:a}=this.state,{height:s,symbol:r,quoteType:n,chartConfig:i,font:l}=this.props,m=this.context.getStore(g.a).getState().getIn(["price","regularMarketTime"]),d=this.context.session&&this.context.session.dimensions||{},p=Object.assign({},B,O[a].ui,{font:l}),u=Object.assign({w:e,h:s,range:t,symbol:r,type:O[a].type,crosshair:!0,watermark:!0,radius:3,partner:"finance",ui:p,region:d.region,lang:d.lang,crumb:this.crumb},i);let h,f,b,x=!0;if("MUTUALFUND"===n)"d"!==t[t.length-1]&&"mo"!==t.slice(-2)||(h="1d");else if("INDICATOR"===n&&(h="1mo",x=!1,"max"!==t&&m)){const e=parseInt(t.replace(/[^\d.]/g,""));f=Object(o.p)(m,12*e),b=m}const E=Object.assign({},u,{interval:h,period1:f,period2:b,volume:x});Object(c.init)(E,this.container)}renderChartMenu(){const{type:e}=this.state,t={line:this.onLineChartChange,candle:this.onCandleChartChange,area:this.onAreaChartChange,trendArea:this.onRGAreaChartChange};return r.a.createElement("ul",null,A.map(a=>{let s;return s=a!==e?r.a.createElement(w.I13nButton,{className:"chartTypeBut Fz(s) M(0) Px(15px) Py(4px) W(100%) Ta(start) C($c-fuji-blue-1-b):h Bd(0)",i13nModel:{sec:"qsp-chart-slct",slk:a,itc:1,elm:"btn",elmt:"mu",outcm:a+"-slt"},onClick:t[a]},r.a.createElement(b.Icon,{className:"Va(m)! Mend(6px) Mb(1px) chartTypeBut:h_Stk($c-fuji-blue-1-b)! chartTypeBut:h_Fill($c-fuji-blue-1-b)!",asset:O[a].icon,height:16,color:"#000"}),r.a.createElement(C.FormattedMessage,{id:O[a].msg})):r.a.createElement("div",{className:"C($c-fuji-blue-1-b) Px(15px) Py(5px) W(100%) Ta(start)"},r.a.createElement(b.Icon,{className:"Va(m)! Mend(6px) Mb(1px) Stk($c-fuji-blue-1-b)! Fill($c-fuji-blue-1-b)! Cur(a)!",asset:O[a].icon,height:16}),r.a.createElement(C.FormattedMessage,{id:O[a].msg})),r.a.createElement("li",{key:a,className:"D(b) P(0) M(0) Bgc($extraLightBlue):h"},s)}))}renderChartSelector(){let e,t="",a={top:-9,left:70},s="Z(6) Bxsh($boxShadow) Bd Bdc($c-fuji-grey-c) Bdrs(3px) End(-30px) T(30px) smartphone_Start(0px) smartphone_T(28px) Bgc(white) Maw(250px) Miw(150px) Ta(start) Cur(a) O(n):f Py(6px)";return this.isSmartphone&&(t=" Py(12px) Pend(12px)",e=r.a.createElement("span",{className:"Mstart(4px) C($c-fuji-blue-1-b) Fz(s) Fw(500) Va(m)"},r.a.createElement(C.FormattedMessage,{id:O[this.state.type].msg})),s="Z(6) Bxsh($boxShadow) Bd Bdc($c-fuji-grey-c) Bdrs(3px) Start(0px) T(28px) Bgc(white) Maw(250px) Miw(150px) Ta(start) Cur(a) O(n):f Py(6px)",a={top:-9,left:10}),r.a.createElement(S.a,{id:"qsp-chart-slct",content:this.renderChartMenu(),className:"M(0) O(n):f D(ib) Bdrs(3px) C($c-fuji-grey-j) Fz(s) "+t,menuClassName:s,showClose:!1,showArrow:!0,arrowStyle:a},r.a.createElement(b.Icon,{className:"Va(m)! Stk($c-fuji-blue-1-b)! Fill($c-fuji-blue-1-b)!",asset:O[this.state.type].icon,height:16,color:"#0081f2"}),e)}renderRangeMap(){const{rangeMap:e}=this.props,{range:t}=this.state;if(!e)return r.a.createElement("ul",{key:"empty-rangeMap"});let a,s="",n={};const i=D.filter(t=>!!e[t]);this.isSmartphone?(s=" Mt(15px) W(100%) Bgc($c-fuji-grey-b)",n={width:(100/i.length).toFixed(2)+"%"}):a=r.a.createElement("li",{key:"chartType",className:"Va(b) Pstart(10px) Bdstartw(1px) Bdstarts(s) Bdc($finLightGray) D(ib)"},this.renderChartSelector());const o="D(ib) Va(b) Bxz(bb) "+(this.isSmartphone?"":"Mend(15px)"),l=i.map((a,s)=>{const l=t===e[a];let c,m=o+(l?" Fw(b)! ":"");return s===i.length-1&&(c="Fz(s) M(0) P(0) Bd(0) ",this.isSmartphone||(m+=" Mend(10px)!")),r.a.createElement("li",{key:a,className:m,style:n},r.a.createElement(L,{className:c,displayText:a,rangeValue:e[a],isActive:l,onClick:this.onRangeClick,isSmartphone:this.isSmartphone}))});return r.a.createElement("ul",{key:"rangeMap",className:"D(ib) Fz(xs) Mb(10px) Whs(nw) "+s},l,a)}render(){const{symbol:e,quoteType:t,id:a,height:s,className:n,showFullChartLink:i,followFullChartLink:c,dataSource:m,config:d,containerClassName:p}=this.props;if(Object(l.A)(this.context))return r.a.createElement("div",{id:a,className:"qsp-2col-chart Bxz(bb) D(ib) Mt(3px) T(0) End(0) W(100%) H(50px) H(270px)--lgv2 Pos(a)--lgv2 Mb(0)--lgv2 W(420px)--lgv2 smartphone_Mt(0px)"},r.a.createElement("div",{className:"C($gray) Fz(s) Fw(500) Ta(c) P(120px)--lgv2"},r.a.createElement(C.FormattedMessage,{id:"CHART_NOT_SUPPORTED"})));const u=e+"-"+a,h={sec:"virgo",slk:"fullscreen",c10:e,outcm:"fullscreen",itc:0},f=this.isDesktop?{onClick:this.onChartClick,tabIndex:1}:{};let g,x;if(i){let t="Ta(end) Pos(a) End(0) Z(1) Fz(s) Fw(500) O(n)";this.isSmartphone&&(t="Z(1) Fz(s) Fw(500) O(n) Py(12px) Pstart(12px)"),g=r.a.createElement(N.a,{key:"fullscreen-link",className:t,href:Object(o.i)("chart",{symbol:e}),i13nModel:h,followLink:c},r.a.createElement(b.Icon,{asset:E.a,height:12,className:"Td(n) Pend(5px) Fill($c-fuji-blue-1-b)! Stk($c-fuji-blue-1-b)! Va(m)!"}),r.a.createElement("span",{className:"Va(m)"},r.a.createElement(C.FormattedMessage,{id:"FULL_SCREEN"})))}"INDICATOR"===t&&m&&(x=r.a.createElement("div",{className:"Pos(a) B(10px) Start(0px) Fz(11px) C($c-fuji-grey-h) smartphone_Mstart(20px)"},r.a.createElement(C.FormattedMessage,{id:"DATA_PROVIDED_BY",values:{dataSource:m}})));let y=r.a.createElement("div",R({key:"chartcontainer",id:u,ref:this.setContainerRef,className:p,style:{height:s}},f)),P=this.renderRangeMap(),w=[];if(this.isSmartphone){let e;d.hideToolbar||(e=r.a.createElement("div",{key:"toolbar",className:"Fl(start)"},this.renderChartSelector(),g)),w=[e,y,P,x]}else w=[P,g,y,x];return r.a.createElement("div",{id:a,className:n},w)}}j.displayName="Chart",j.propTypes={containerClassName:i.a.string,symbol:i.a.string.isRequired,quoteType:i.a.string.isRequired,width:i.a.number,height:i.a.number,range:i.a.string,id:i.a.string,className:i.a.string,rangeMap:i.a.object,showFullChartLink:i.a.bool,followFullChartLink:i.a.bool,dataSource:i.a.string,config:i.a.object,chartConfig:i.a.object,font:i.a.string},j.defaultProps={containerClassName:"smartphone_Mt(40px)",font:"500 11px Helvetica Neue, Helvetica, Arial, sans-serif",height:160,range:"",className:"",showFullChartLink:!0,followFullChartLink:!1,config:{},chartConfig:{}},j.contextTypes={getStore:i.a.func.isRequired,session:i.a.object.isRequired,executeAction:i.a.func.isRequired},t.a=j},1835:function(e,t,a){"use strict";var s=a(68),r=a.n(s);class n extends r.a{constructor(e){super(e),this.initialize()}initialize(){this.performance=null,this.meta=null,this.loading=!1,this.errorList=[]}setLoading(e){this.loading=!!e.loading,this.emitChange()}setError(e){e&&e.error&&(e.ignoreLoading||(this.loading=!1),this.errorList.push(e.error),e.silent||this.emitChange())}loadPerformance(e){if(!e)return;this.loading=!1,this.errorList=[];const{performance:t,meta:a}=e;t&&(a&&(this.meta=a),this.performance&&!e.clear||(this.performance={}),this.performance=Object.assign({},this.performance,t),e.silent||this.emitChange())}updateMeta(e){e&&e.meta&&(this.meta&&!e.clear||(this.meta={}),this.meta=Object.assign({},this.meta,e.meta),e.silent||this.emitChange())}isLoading(){return this.loading}getPerformance(e){return this.performance?e?this.performance[e]:this.performance:null}getMeta(){return this.meta||{}}getError(){return this.errorList||[]}hasError(e){return!!this.errorList.length&&(e?-1!==this.errorList.indexOf(e):!!this.errorList.length)}dehydrate(){return{performance:this.performance,meta:this.meta,loading:this.loading,errorList:this.errorList}}rehydrate(e){this.performance=e.performance,this.loading=e.loading,this.errorList=e.errorList,this.meta=e.meta}}n.storeName="PortfolioPerformanceStore",n.handlers={FIN_PF_PERF_LOAD:"loadPerformance",FIN_PF_PERF_META_UPDATE:"updateMeta",SET_FIN_PF_PERF_LOADING:"setLoading",SET_FIN_PF_PERF_ERROR:"setError"},t.a=n},1839:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(20),l=a(365),c=a(687),m=a(11),d=a(19),p=a(78),u=a.n(p),h=a(1587),f=a(1541),g=a(667),b=a(1594),x=a(1564),E=a(1588),y=a(1602),N=a(91),C=a.n(N),P=a(1553),w=a(43),S=a(647),I=a(355),M=a.n(I);const k={Bullish:"Bgc($c-fuji-green-1-b) Bdc($c-fuji-green-1-b)",Bearish:"Bgc($c-fuji-red-2-b) Bdc($c-fuji-red-2-b)",Neutral:"Bgc($c-fuji-orange-a) Bdc($c-fuji-orange-a)"},v={Increased:"C($c-fuji-green-1-b)",Decreased:"C($c-fuji-red-2-b)",Maintained:"C($c-fuji-grey-j)",Initiation:"C($c-fuji-grey-j)"};class T extends r.a.PureComponent{constructor(){super(),this.showModal=this.showModal.bind(this),this.rapidSec=Object(w.t)("Research")}showModal(e){const{data:t,type:a,index:s,numItems:r}=this.props;if(a===S.a.IDEAS&&e&&e.target&&"A"===e.target.tagName)return;const n=a===S.a.REPORTS?"T(260px)":"T(215px)";Object(w.e)(this,{sec:this.rapidSec,subsec:(a||"").concat("-list"),slk:t.head_html,elm:"itm",elmt:"modal",itc:1,cpos:s}),this.context.executeAction(P.a,{pageParams:{pd:"modal"}});const i={type:a};this.context.executeAction(C.a.show,{component:E.a,componentProps:{rapidSec:this.rapidSec,numItems:r,childComponent:y.a,childProps:i,selectedIndex:s,containerClass:"Bxsh($boxAreaShadow) Bgc(white) Pos(a) Mt($researchOverlayTopMargin) Start(50%) T(50%) W($modalWidth) Mstart(-425px) Bdrs(4px)",arrowButtonPosClassName:n},wrapperClass:"Bgc($modalBackground) Ovy(a)"})}renderReportContent(){const{data:e}=this.props,t=e.investment_rating,a=t&&!!k[e.investment_rating],s=e.change_in_investment_rating&&e.change_in_target_price&&e.change_in_earnings_per_share_estimate,n="Bdrs(20px) Bd(1px) Bdw(1px) Bds(s) Ta(c) Fz(xs) Fw(b) W(48px) C(white) "+(k[t]?k[t]:""),i="Fz(s) Fw(b) Mstart(10px) "+(v[e.change_in_target_price]?v[e.change_in_target_price]:""),o="Fz(s) Fw(b) Mstart(10px) "+(v[e.change_in_earnings_per_share_estimate]?v[e.change_in_earnings_per_share_estimate]:""),l="Fz(s) Fw(b) Mstart(10px) "+(v[e.change_in_investment_rating]?v[e.change_in_investment_rating]:"");return r.a.createElement("div",{className:"res-report-itm Cur(p)",onClick:this.showModal,title:e.head_html||""},e.snapshot_url?r.a.createElement("img",{className:"IbBox W(70px) Pend(15px)",src:e.snapshot_url,alt:e.head_html}):null,r.a.createElement("div",{key:"content",className:"IbBox Maw(350px)"},r.a.createElement("div",{className:"W(100%) Whs(nw)"},r.a.createElement("h2",{key:"report-h2-head",className:"D(ib) Fw(b) Fz(s) C($c-fuji-blue-1-b) res-report-itm:h_C($actionBlueHover) Mb(6px) Ell"},e.head_html),a?r.a.createElement("div",{className:"D(ib) Mstart(10px) Va(t)"},r.a.createElement("div",{className:n},t)):null),s?[r.a.createElement("div",{key:"report-div-change_in_investment_rating",className:"C($c-fuji-grey-j)"},r.a.createElement(d.FormattedMessage,{id:"RATING"}),":",r.a.createElement("span",{className:l},e.change_in_investment_rating)),r.a.createElement("div",{key:"report-div-change_in_target_price",className:"My(5px) C($c-fuji-grey-j)"},M.a.TARGET_PRICE+":",r.a.createElement("span",{className:i},e.change_in_target_price)),r.a.createElement("div",{key:"report-div-change_in_earnings_per_share_estimate",className:"C($c-fuji-grey-j)"},M.a.EARNINGS_ESTIMATE+":",r.a.createElement("span",{className:o},e.change_in_earnings_per_share_estimate))]:r.a.createElement("p",{key:"report-p-title",className:"Fz(s) C($c-fuji-grey-j) Whs(n) LineClamp(3,50px)"},e.report_title||"")))}renderIdeaContent(){const{data:e}=this.props;if(!e.ticker)return null;const t=e.image_url||"",a=e.trade_idea_title||"";return r.a.createElement("div",{className:"Cur(p) Pend(25px)",onClick:this.showModal,title:a},r.a.createElement("div",{className:"D(ib) W(2/5) Ta(c) Lh(90px)"},t?r.a.createElement("img",{className:"Va(m) W(100px) H(50px)",src:t,alt:a}):null),r.a.createElement("div",{key:"content",className:"IbBox W(3/5) H(90px)"},r.a.createElement(u.a,{key:"quote",href:Object(w.i)("quote",{symbol:e.ticker,comscoreEnabled:!0}),title:e.company_name||"",followLink:!1,className:"Fw(600)",i13nModel:{itc:0,elm:"qte",elmt:"link",sec:this.rapidSec}},e.ticker),r.a.createElement("div",{className:"C($c-fuji-grey-g) Fz(xs) Whs(n) Ell"},e.company_name||""),r.a.createElement("p",{className:"Mt(10px) Fz(s) Fw(b) C($c-fuji-grey-k) Whs(n) LineClamp(2,34px) Ell"},a)))}render(){const{data:e,type:t}=this.props;return e?t===S.a.IDEAS?this.renderIdeaContent():this.renderReportContent():null}}T.displayName="ResearchCardItem",T.propTypes={data:i.a.object.isRequired,type:i.a.string.isRequired,index:i.a.number.isRequired,numItems:i.a.number},T.contextTypes={executeAction:i.a.func.isRequired};var F=T,R=a(1570),D=a(30),B=a(653),_=a(89),O=a.n(_),A=a(1582),L=a.n(A),j=a(67),$=a.n(j),V=a(367),H=a.n(V),z=a(249),q=a.n(z),W=a(1576),U=a.n(W),G=a(117),Y=a.n(G),Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const Z={ORIG:0,ASC:1,DESC:2},K={Buy:"BULLISH",Sell:"BEARISH",Hold:"SENTIMENT_MSG_N"},X={Buy:"C($c-fuji-green-1-b)",Sell:"C($c-fuji-red-2-b)",Hold:"C($c-fuji-orange-a)"},J="Whs(nw) Ta(end) Pstart(15px)",ee="Ta(end) Pstart(15px)",te={firstColumnSticky:!0,isSortable:!0,isSelectable:!0,isDeletable:!1,isFullWidth:!0,alternateColor:!0,showFooter:!1,showDashes:!1,quoteStreaming:!1},ae={firstColumnSticky:!1,isSortable:!1,isSelectable:!1,isDeletable:!1,alternateColor:!0,showFooter:!1,showDashes:!1,quoteStreaming:!1,isFullWidth:!0},se="C(black) Fw(500)",re="Va(b)! W(14px) H(14px) Fill(black)! Stk(black)! ",ne={longName:"companyName",shortName:"companyName",industryName:"companyName",companyName:"companyName",regularMarketPrice:"change",preMarketPrice:"change",postMarketPrice:"change",regularMarketTime:"marketTime",epssurprisepct:"colorChange",regularMarketChange:"colorChange",change:"colorChange",percentChange:"colorChange",regularMarketPercentChange:"colorChange",regularMarketChangePercent:"colorChange",ticker:"quoteLink",symbol:"quoteLink",symbolTrade:"symbolTrade",startdatetimetype:"dateTimeType",startdatetime:"dateTime",filingdate:"ipodate",regularMarketDayRange:"dayRange",fiftyTwoWeekRange:"52weekRange","52weekRange":"52weekRange",sparkline_3m:"sparkline_3m",sparkline:"sparkline",volumeInCurrency:"volumeInCurrency",dividendDate:"dateTime",exDividendDate:"dateTime",regularMarketVolume:"change",marketCap:"change",bid:"change",bidSize:"change",ask:"change",askSize:"change",regularMarketDayHigh:"change",regularMarketDayLow:"change",fiftyTwoWeekHighChange:"colorChange",fiftyTwoWeekHighChangePercent:"colorChange",fiftyTwoWeekLowChange:"colorChange",fiftyTwoWeekLowChangePercent:"colorChange",preMarketChange:"colorChange",preMarketChangePercent:"colorChange",postMarketChangePercent:"colorChange",postMarketChange:"colorChange",fiftyDayAverageChange:"colorChange",fiftyDayAverageChangePercent:"colorChange",twoHundredDayAverageChange:"colorChange",twoHundredDayAverageChangePercent:"colorChange",earningsDate:"earningsDate",tradeDateDisplay:"tradeDate",tradeDate:"tradeDate",highLimit:"highLimit",lowLimit:"lowLimit",trailingAnnualDividendYield:"percent",currentMarketValue:"currentMarketValue",totalGain:"totalGain",totalPercentGain:"totalPercentGain",dailyGain:"dailyGain",dayGain:"dayGain",dailyPercentGain:"dailyPercentGain",totalGainAndPercent:"totalGainAndPercent",comment:"comment",annualGain:"annualGain",numberOfLots:"numberOfLots",tradeButton:"tradeButton"},ie={symbol:"TD_SYMBOL",symbolTrade:"TD_SYMBOL",companyName:"COMPANY",regularMarketPrice:"SCREENER_FIELD_intradayprice",change:"TD_CHANGE",regularMarketChange:"TD_CHANGE",percentChange:"TD_PERCENT_CHANGE",regularMarketChangePercent:"TD_PERCENT_CHANGE",volume:"TD_VOLUME",regularMarketVolume:"TD_VOLUME",volumeInCurrency:"TD_VOLUME_IN_CURRENCY",averageDailyVolume3Month:"AVG_VOL_3_MONTH",marketCap:"MARKET_CAP",trailingPE:"PE_RATIO",forwardPE:"FORWARD_PE",regularMarketDayRange:"SCREENER_FIELD_regularMarketDayRange",regularMarketTime:"TD_MARKET_TIME",fiftyTwoWeekRange:"TD_52_WK_RANGE","52weekRange":"TD_52_WK_RANGE",exDividendDate:"EX_DIVIDEND_DATE",dividendYield:"FORWARD_ANNUAL_DIVIDEND_YIELD",dividendRate:"FORWARD_ANNUAL_DIVIDEND_RATE",trailingAnnualDividendRate:"TRAILING_ANNUAL_DIVIDEND_RATE",trailingAnnualDividendYield:"TRAILING_ANNUAL_DIVIDEND_YIELD",regularMarketPreviousClose:"SCREENER_FIELD_intradayprice",fiftyDayAverage:"TD_50_DAY_AVERAGE",twoHundredDayAverage:"TD_200_DAY_AVERAGE",trailingThreeMonthReturns:"TD_THREE_MONTH",ytdReturn:"TD_YEAR_TO_DATE",underlyingSymbol:"SCREENER_FIELD_underlying_symbol",shortName:"NAME",strike:"STRIKE",expireDate:"SCREENER_FIELD_expire_date",bid:"TD_BID",ask:"ASK",null:"",openInterest:"SCREENER_FIELD_open_interest",transactionDate:"DATE",quantity:"SHARES",shares:"SHARES",proceeds:"PROCEEDS",transactionDetails:"TRANSACTION_DATAILS",industryName:"INDUSTRY"},oe={symbol:"ticker",companyName:"companyshortname",regularMarketPrice:"intradayprice",regularMarketChange:"intradaypricechange",regularMarketChangePercent:"percentchange",regularMarketVolume:"dayvolume",volumeInCurrency:"dayvolume",marketCap:"intradaymarketcap",trailingPE:"peratio",regularMarketPreviousClose:"intradayprice",underlyingSymbol:"underlying_symbol",strike:"strike_price",expireDate:"expire_date",openInterest:"open_interest",transactionDate:"transactiondate"},le={symbolTrade:"Ta(start)! Pstart(0px)! Pend(10px) Maw(150px)",symbol:"Ta(start)!",longName:"Ta(start)!",comment:"Ta(start)!",regularMarketPrice:"Fw(600)",regularMarketChange:"Fw(600)",regularMarketChangePercent:"Fw(600)",purchasePrice:"Fw(600)",currentMarketValue:"Fw(600)",totalGain:"Fw(600)",totalPercentGain:"Fw(600)",dailyGain:"Fw(600)",tradeButton:"Us(n)",dailyPercentGain:"Fw(600)"},ce={symbolTrade:"Ta(start)! Pstart(15px)!",symbol:"Ta(start)!",tradeButton:"Us(n)",comment:"Ta(start)!",longName:"Ta(start)!"},me="-",de="N/A";function pe(e,t="",a="en-US"){if(!e)return me;const s={minimumFractionDigits:2,maximumFractionDigits:2};return t&&(s.style=t),Intl.NumberFormat(a,s).format(e)}const ue={Expected:"startdatetime",Priced:"startdatetime",Filed:"filingdate",Amended:"amendeddate",Withdrawn:"withdrawaldate"};function he(e){if(!e||!e.length||8===!e.length)return null;const t=new Date(`${e.substr(0,4)}-${e.substr(4,2)}-${e.substr(6,2)}`);return t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3),t}const fe=({className:e,children:t,isDeletable:a,rapidSec:s,onDeleteSinglePosition:n,isSelectable:i})=>r.a.createElement("tr",{className:"simpTblRow "+e},t,a&&i&&r.a.createElement("td",{className:"Pos(a) Start(100%) H(32px) V(h) simpTblRow:h_V(v)"},r.a.createElement(o.I13nButton,{className:"P(0) M(0)",i13nModel:{sec:s,slk:"delete",elm:"icn",elmt:"ct",itc:1,outcm:"delete-pos"},onClick:n},r.a.createElement(m.Icon,{asset:$.a,color:"black",className:"Py(8px)",height:16}))));fe.displayName="SimpleDataTableRow",fe.propTypes={className:i.a.string,children:i.a.array,isDeletable:i.a.bool,rapidSec:i.a.string,onDeleteSinglePosition:i.a.func,isSelectable:i.a.bool};const ge=Object(R.SortableElement)(fe),be=Object(R.SortableContainer)(({children:e})=>r.a.createElement("tbody",null,e));be.displayName="SimpleDataTableSortableBody",be.propTypes={children:i.a.array};class xe extends r.a.Component{constructor(e,t){super(e,t),this.rapidSec=e.rapidSec||Object(D.o)("DataTable"),this.isLightweightBrowser=Object(D.A)(t),this.selectedRows=[],this.onAllCheckboxSelect=this.onAllCheckboxSelect.bind(this),this.onCheckboxSelect=this.onCheckboxSelect.bind(this),this.onReorderEnd=this.onReorderEnd.bind(this),this.columnHeaders=[],this.state={rows:e.rows,allSelected:!1,sortState:e.sortState,sortColumn:e.sortColumn},this.getCellContent=function({fieldId:e,row:t,columnType:a},s){const{quoteStreaming:n,showDashes:i}=this.props.config.ui,l=this.context.session.dimensions.lang||"en-US",c=t,p=c[e]||{},E=("object"==typeof p?p.raw:p)||0,y=("object"==typeof p?p.fmt:p)||"";let N=a;"dateTimeType"===N&&"TAS"===E&&(N="dateTime");const C=c.underlyingSymbol||c.symbol||c.ticker||"";switch(N){case"symbolTrade":case"quoteLink":{const e=Object(D.v)(this.context,"yahooapp"),t=O.a.decode(c.longName||c.shortName||"");if(t||c.quoteType){const a=e?Object(D.e)("quoteLeaf",{symbol:C,suffix:"details"}):Object(D.e)("quote",{symbol:C,comscoreEnabled:!0}),n=[c.coinImageUrl&&r.a.createElement("img",{key:"logo",src:c.coinImageUrl,className:"W(20px) H(20px) Mend(5px)",alt:t}),r.a.createElement(u.a,{key:"quote",href:a,title:t,followLink:!1,className:"Fw(600)",i13nModel:{itc:0,elm:"qte",elmt:"link",sec:this.rapidSec,cpos:s}},C)];if("quoteLink"===N)return n;let i;const{enable:o,useDummyBroker:l}=this.props.config&&this.props.config.trading||{};c.tradeable&&o&&(i=r.a.createElement(x.a,{className:"D(ib) Fl(end) Pstart(10px) Pb(10px)",type:"trade-button",isMini:!0,symbol:C,companyName:t,quoteType:c.quoteType,currentUrl:this.props.currentUrl,useDummyBroker:l,rapidSec:"pf-trd-btn"}));const m="object"==typeof c.regularMarketChange?c.regularMarketChange.raw:c.regularMarketChange;let d="Bgc(t)";return m<0?d="Bgc($c-fuji-red-2-b)":m>0&&(d="Bgc($bgGreen)"),[r.a.createElement("div",{key:"indicator",className:"Fl(start) W(5px) H(58px) "+d}),r.a.createElement("div",{key:"content",className:"Py(10px) Pstart(15px)"},n,i,r.a.createElement("div",{title:t,className:"C($c-fuji-grey-j) Fz(s) Mt(5px) Ell"},t))]}return r.a.createElement("div",{title:t,className:"Fw(500) D(ib) Va(m) Ell "+("symbolTrade"===N?" Pstart(15px)":"")},C)}case"multiQuoteLink":{let e=c.ticker||c.symbols;if(e){let t,a,n,i=e;return"string"==typeof e&&(i=e.split(",")),1===i.length?(t=Object(D.e)("quote",{symbol:i[0],comscoreEnabled:!0}),a={itc:0,elm:"qte",elmt:"link",sec:this.rapidSec,cpos:s},n=i[0]):(t=Object(D.e)("quotes",{symbol:i.join(",")}),a={slk:"mlti-qte",itc:0,elm:"itm",elmt:"link",sec:this.rapidSec,cpos:s},n=i.join(",")),this.props.disableLinks?r.a.createElement("span",{key:"quote",className:"Fw(b)"},n):r.a.createElement(u.a,{key:"quote",href:t,followLink:!1,className:"Fw(600) Lh(1.2) LineClamp(2,32px) Tov(e)",i13nModel:a},n)}break}case"companyName":return O.a.decode(c.longName||c.shortName||"");case"change":case"colorChange":if(y&&!isNaN(E))return r.a.createElement(f.a,{className:"colorChange"===N?"Fw(600)":"",symbol:C,field:e,value:E,textColor:"colorChange"===N,config:{priceHint:c.priceHint},streamingEnabled:n},y);break;case"array":if(p&&Array.isArray(p))return p.join(",");break;case"arrayEllipsis":if(p&&Array.isArray(p))return r.a.createElement("div",{className:" Lh(1.2) LineClamp(2,32px) Tov(e)"},p.join(","));break;case"dayRange":case"52weekRange":{const e="dayRange"===N?{low:c.regularMarketDayLow,current:c.regularMarketPrice,high:c.regularMarketDayHigh,open:c.regularMarketOpen}:{low:c.fiftyTwoWeekLow,current:c.regularMarketPrice,high:c.fiftyTwoWeekHigh,open:c.regularMarketOpen};return this.props.isTableDense?(e.low&&e.low.fmt||de)+" "+me+" "+(e.high&&e.high.fmt||de):r.a.createElement(h.a,{style:{width:"90px"},symbol:C||"-",lowRaw:e.low&&e.low.raw||0,lowFmt:e.low&&e.low.fmt||de,highRaw:e.high&&e.high.raw||0,highFmt:e.high&&e.high.fmt||de,currRaw:e.current&&e.current.raw||0,currFmt:e.current&&e.current.fmt||de,openRaw:e.open&&e.open.raw||0,openFmt:e.open&&e.open.fmt||de})}case"sparkline_3m":case"sparkline":{let e=C;Array.isArray(C)&&C.length>0&&(e=C[0]);const t=Object(D.e)("chart",{symbol:e,comscoreEnabled:!0}),a=r.a.createElement(d.FormattedMessage,{id:"VIEW_CHART"});return r.a.createElement(u.a,{target:"_blank",rel:"noopener",href:t,"data-symbol":e,i13nModel:Object(D.u)("link",{elm:"img",slk:e,sec:this.rapidSec,cpos:s})},this.props.isTableDense?a:r.a.createElement(g.a,{range:"sparkline_3m"===N?"3mo":"1d",interval:"sparkline_3m"===N?"1d":"5m",symbol:e,errorMessage:a}))}case"longDateTime":if(E&&"string"==typeof E){const e=Date.parse(E),t=c.exchangeTimezoneShortName||c.timeZoneShortName||"EST";return[r.a.createElement(d.FormattedDate,{key:"date",value:Object(D.k)(e,c.gmtOffsetMilliSeconds||0),month:"short",day:"2-digit",year:"numeric",hour:"numeric"}),r.a.createElement("span",{key:"timezone",className:"Mstart(5px)"},t)]}break;case"ipodate":case"dateTimeString":case"dateTime":{let e=E;if("ipodate"===N){const t=c.dealtype;e=c[ue[t]||"startdatetime"]}if(e||y){let t=y&&"string"==typeof y?y:e;if("string"==typeof t?(-1!==t.indexOf("T")&&(t=t.substr(0,10)),t=new Date(t).getTime()):isNaN(t)&&(t*=1e3),!isNaN(t))return r.a.createElement(d.FormattedDate,{value:Object(D.k)(t,c.gmtOffsetMilliSeconds||0),year:"numeric",month:"short",day:"2-digit"})}break}case"timeMinute":if(E&&"string"==typeof E){const e=Date.parse(E);return B.a.date.format({timeZoneShort:c.exchangeTimezoneShortName||c.timeZoneShortName||"EST",gmtOffSetMilliseconds:c.gmtOffsetMilliSeconds||0},e,"%l:%M%p %Z")}break;case"marketTime":if(E&&y){const t=c.gmtOffSetMilliseconds||0,a=c.exchangeTimezoneShortName||c.timeZoneShortName||"EST";return r.a.createElement(f.a,{symbol:C,field:e,value:E,textColor:!1,transform:({raw:e})=>B.a.date.format({timeZoneShort:a,gmtOffSetMilliseconds:t},1e3*e,"%l:%M%p %Z"),streamingEnabled:n},y)}break;case"dateTimeType":return r.a.createElement(d.FormattedMessage,{key:"datetimeType",id:"EVENT_TIME_TYPE_"+E});case"boolStringShort":return!0===E||"true"===E?"Y":"N";case"volumeInCurrency":if(c.regularMarketVolume&&c.regularMarketVolume.fmt)return c.regularMarketVolume.fmt;break;case"earningsDate":if(c.earningsTimestampStart&&c.earningsTimestampEnd)return[r.a.createElement(d.FormattedDate,{key:"from",value:Object(D.k)(1e3*c.earningsTimestampStart.raw,0),year:"numeric",month:"short",day:"2-digit"})," - ",r.a.createElement(d.FormattedDate,{key:"to",value:Object(D.k)(1e3*c.earningsTimestampEnd.raw,0),year:"numeric",month:"short",day:"2-digit"})];if(c.earningsTimestamp)return r.a.createElement(d.FormattedDate,{value:Object(D.k)(1e3*c.earningsTimestamp.raw,0),year:"numeric",month:"short",day:"2-digit"});break;case"tradeDate":if(c.lots&&c.lots.length>0){const e=[];for(let t=0;t<c.lots.length;t++){const a=c.lots[t];a.tradeDate&&e.push({quantity:a.quantity,tradeDate:he(a.tradeDate)})}if(1===e.length&&e[0].tradeDate)return r.a.createElement(d.FormattedDate,{value:e[0].tradeDate,year:"numeric",month:"short",day:"2-digit"});if(e.length>1){const t=r.a.createElement("ul",{className:"List(n) M(0) P(0)"},e.map((e,t)=>r.a.createElement("li",{key:t,className:""},r.a.createElement("span",{className:"Fw(b) Mend(5px) Tt(l)"},e.quantity||"-"," ",r.a.createElement(d.FormattedMessage,{id:"SHARES"})),r.a.createElement("span",{className:"C($grey6)"},r.a.createElement(d.FormattedDate,{value:e.tradeDate,year:"numeric",month:"short",day:"2-digit"})))));return r.a.createElement(b.a,{content:t},r.a.createElement("span",{className:"C($c-fuji-blue-1-b) Cur(p) Tt(l)"},e.length," ",r.a.createElement(d.FormattedMessage,{id:"DATES"})))}}break;case"highLimit":if(c.lots&&c.lots.length>0){const e=[];for(let t=0;t<c.lots.length;t++){const a=c.lots[t];a.highLimit&&e.push({quantity:a.quantity,tradeDate:he(a.tradeDate),highLimit:a.highLimit})}if(1===e.length)return pe(e[0].highLimit,"",l);if(e.length>1){const t=r.a.createElement("ul",{className:"List(n) M(0) P(0)"},e.map((e,t)=>r.a.createElement("li",{key:t,className:""},r.a.createElement("span",{className:"Fw(b) Mend(5px) Tt(l)"},e.quantity||"-"," ",r.a.createElement(d.FormattedMessage,{id:"SHARES"})),e.tradeDate&&r.a.createElement("span",{className:"C($grey6)"},r.a.createElement(d.FormattedDate,{value:e.tradeDate,year:"numeric",month:"short",day:"2-digit"})),r.a.createElement("div",null,e.highLimit))));return r.a.createElement(b.a,{content:t},r.a.createElement("span",{className:"C($c-fuji-blue-1-b) Cur(p) Tt(l)"},e.length," ",r.a.createElement(d.FormattedMessage,{id:"LIMITS"})))}}break;case"lowLimit":if(c.lots&&c.lots.length>0){const e=[];for(let t=0;t<c.lots.length;t++){const a=c.lots[t];a.lowLimit&&e.push({quantity:a.quantity,tradeDate:he(a.tradeDate),lowLimit:a.lowLimit})}if(1===e.length)return pe(e[0].lowLimit,"",l);if(e.length>1){const t=r.a.createElement("ul",{className:"List(n) M(0) P(0)"},e.map((e,t)=>r.a.createElement("li",{key:t,className:""},r.a.createElement("span",{className:"Fw(b) Mend(5px) Tt(l)"},e.quantity||"-"," ",r.a.createElement(d.FormattedMessage,{id:"SHARES"})),e.tradeDate&&r.a.createElement("span",{className:"C($grey6)"},r.a.createElement(d.FormattedDate,{value:e.tradeDate,year:"numeric",month:"short",day:"2-digit"})),r.a.createElement("div",null,e.lowLimit))));return r.a.createElement(b.a,{content:t},r.a.createElement("span",{className:"C($c-fuji-blue-1-b) Cur(p) Tt(l)"},e.length," ",r.a.createElement(d.FormattedMessage,{id:"LIMITS"})))}}break;case"currentMarketValue":if(!isNaN(c.quantity)&&c.currentMarketValue&&c.regularMarketPrice){const e=("object"==typeof c.currentMarketValue?c.currentMarketValue.raw:c.currentMarketValue)/("object"==typeof c.regularMarketPrice?c.regularMarketPrice.raw:c.regularMarketPrice);return r.a.createElement(f.a,{symbol:C,field:"regularMarketPrice",value:E,textColor:!1,config:{priceHint:c.priceHint,transform:t=>t*e},streamingEnabled:n},y)}break;case"totalGainAndPercent":case"totalGain":case"totalPercentGain":{let e,t;if(!isNaN(c.quantity)&&c.currentMarketValue&&c.regularMarketPrice&&c.totalGain){const a="object"==typeof c.currentMarketValue?c.currentMarketValue.raw:c.currentMarketValue,s="object"==typeof c.regularMarketPrice?c.regularMarketPrice.raw:c.regularMarketPrice,i="object"==typeof c.totalGain?c.totalGain.raw:c.totalGain,o=a/s,l=a-i;if("totalGainAndPercent"===N||"totalPercentGain"===N){const t="object"==typeof c.totalPercentGain?c.totalPercentGain.raw:c.totalPercentGain;if(e=r.a.createElement(f.a,{key:"percentgain",symbol:C,field:"regularMarketPrice",value:t,textColor:!0,config:{priceHint:c.priceHint,transform:e=>(e*o-l)/l,style:"percent"},streamingEnabled:n},y),"totalPercentGain"===N)return e}return"totalGainAndPercent"!==N&&"totalGain"!==N||(t=r.a.createElement(f.a,{key:"gain",symbol:C,field:"regularMarketPrice",value:i,textColor:!0,config:{priceHint:c.priceHint,transform:e=>e*o-l},streamingEnabled:n},y),"totalGain"!==N)?[e,r.a.createElement("br",{key:"break"}),t]:t}break}case"dayGain":case"dailyPercentGain":case"dailyGain":{let e,t;if(!isNaN(c.quantity)&&c.currentMarketValue&&c.regularMarketPrice&&c.dailyGain&&c.priceHint){const a="object"==typeof c.currentMarketValue?c.currentMarketValue.raw:c.currentMarketValue,s="object"==typeof c.regularMarketPrice?c.regularMarketPrice.raw:c.regularMarketPrice,i="object"==typeof c.dailyGain?c.dailyGain.raw:c.dailyGain,o=a/s,l=a-i;if(("dailyGain"===N||"dayGain"===N)&&(e=r.a.createElement(f.a,{key:"gain",symbol:C,field:"regularMarketPrice",value:i,textColor:!0,config:{priceHint:c.priceHint,transform:e=>e*o-l},streamingEnabled:n},y),"dailyGain"===N))return e;if(("dailyPercentGain"===N||"dayGain"===N)&&c.dailyPercentGain){const e="object"==typeof c.dailyPercentGain?c.dailyPercentGain.raw:c.dailyPercentGain;if(t=r.a.createElement(f.a,{key:"percentGain",symbol:C,field:"regularMarketChangePercent",value:e,textColor:!0,config:{priceHint:c.priceHint},streamingEnabled:n},y),"dailyPercentGain"===N)return t}return[t,r.a.createElement("br",{key:"break"}),e]}break}case"comment":if(c.lots&&c.lots.length>0){const e=[];for(let t=0;t<c.lots.length;t++){const a=c.lots[t];a.comment&&e.push({quantity:a.quantity,tradeDate:he(a.tradeDate),comment:a.comment})}if(1===e.length)return e[0].comment;if(e.length>1){const t=r.a.createElement("ul",{className:"List(n) M(0) P(0)"},e.map((e,t)=>r.a.createElement("li",{key:t,className:""},r.a.createElement("span",{className:"Fw(b) Mend(5px) Tt(l)"},e.quantity||"-"," ",r.a.createElement(d.FormattedMessage,{id:"SHARES"})),e.tradeDate&&r.a.createElement("span",{className:"C($grey6)"},r.a.createElement(d.FormattedDate,{value:e.tradeDate,year:"numeric",month:"short",day:"2-digit"})),r.a.createElement("div",null,e.comment))));return r.a.createElement(b.a,{content:t},r.a.createElement("span",{className:"C($c-fuji-blue-1-b) Cur(p) Tt(l)"},e.length," ",r.a.createElement(d.FormattedMessage,{id:"TD_NOTES"})))}}break;case"numberOfLots":if(c.lots&&c.lots.length)return c.lots.length;break;case"annualGain":if(c.lots&&c.lots.length>0){let t=0,a=0;for(let e=0;e<c.lots.length;e++){const s=c.lots[e];isNaN(s.quantity)||void 0===s.annualGainPercentage||(a+=s.quantity,t+=s.quantity*s.annualGainPercentage)}if(a>0){const s=t/a;return r.a.createElement(f.a,{symbol:C,field:e,value:s,textColor:!0,streamingEnabled:!1},this.context.intl.formatNumber(s/100,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}))}}break;case"tradeButton":{const{enable:e,useDummyBroker:t}=this.props.config&&this.props.config.trading||{};if((c.tradeable||c.is_tradeable)&&e)return this.props.disableLinks?r.a.createElement("span",{className:"Pos(r) Va(c) Fz(s) Bdrs(4px) Bdc($c-fuji-grey-c) Bds(s) Bdw(1px) Px(8px) Py(2px) C($c-fuji-blue-1-a) Bgc(white) D(n)--print Us(n)"},r.a.createElement(d.FormattedMessage,{id:"TRADE"})):r.a.createElement(x.a,{className:"D(ib) D(n)--print Us(n)",type:"trade-button",symbol:C,companyName:O.a.decode(c.longName||c.shortName||""),quoteType:c.quoteType,currentUrl:this.props.currentUrl,useDummyBroker:t,rapidSec:"pf-trd-btn"});break}case"rangeShareWorth":case"rangePriceTo":{const e="rangeShareWorth"===N?c.old_share_worth:c.pricefrom;if(E&&e)return Number(e).toFixed(2)+" - "+Number(E).toFixed(2);break}case"reportCardItem":if(c)return r.a.createElement(F,{data:c,type:"reports",index:s,numItems:this.props.rows.length});break;case"tradeCardItem":if(c)return r.a.createElement(F,{data:c,type:"trade-ideas",index:s,numItems:this.props.rows.length});break;case"rating":if(c&&c.rating){const e=c.rating;return r.a.createElement("div",{className:"Fw(b) Fz(14px) "+(X[e]?X[e]:"")},K[e]?r.a.createElement(d.FormattedMessage,{id:K[e]}):e)}break;case"percent":return pe(E,"percent",l);case"outlook":if(c&&c.ror){const{formatNumber:e}=this.context.intl,t=c.ror;return[r.a.createElement(f.a,{key:"research-outlook",className:"Fw(b) Fz(14px)",value:t,textColor:!0,streamingEnabled:!1},e(t,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2})),r.a.createElement("div",{key:"research-term",className:"C($c-fuji-grey-g) Fz(xs) Mt(5px)"},c.term?c.term:"")]}break;case"lastPrice":if(c&&c.current_price)return r.a.createElement("span",{className:"Fw(b) Fz(14px) C($c-fuji-grey-k)"},c.current_price);break;case"priceTarget":if(c&&c.price_target)return[r.a.createElement("div",{key:"research-price-target",className:"Fw(b) Fz(14px) C($c-fuji-grey-k)"},c.price_target),r.a.createElement("div",{key:"research-term",className:"C($c-fuji-grey-g) Fz(xs) Mt(5px)"},c.term?c.term:"")];break;case"download":return c.pdf_url?r.a.createElement(o.I13nAnchor,{href:c.pdf_url,i13nModel:{sec:this.rapidSec,slk:"download-report",itc:0,elm:"btn",elmt:"link"},target:"_blank",rel:"noopener noreferrer"},r.a.createElement(m.Icon,{asset:U.a,className:"C($c-fuji-grey-j)! C($finDarkLinkHover):h!",height:16})):null}return y||(i?me:r.a.createElement(d.FormattedMessage,{id:"NA"}))}.bind(this)}onReorderEnd({oldIndex:e,newIndex:t}){this.setState({rows:Object(R.arrayMove)(this.state.rows,e,t)})}componentWillReceiveProps(e){const t={};e.sortState!==this.state.sortState&&(t.sortState=e.sortState),e.sortColumn!==this.state.sortColumn&&(t.sortColumn=e.sortColumn),e.rows!==this.props.rows&&(t.rows=e.rows),this.props.isReordering&&!e.isReordering&&(t.sortState=Z.ORIG,t.sortColumn=null,t.rows=e.rows),Object.keys(t).length>0&&this.setState(t)}onHeaderClick(e,t){const a=t.target.nodeName.toUpperCase();if("INPUT"===a||"SVG"===a||"PATH"===a)return;const s={[Z.DESC]:"revert-srt",[Z.ORIG]:"asc-srt",[Z.ASC]:"dsc-srt"};let r={sec:this.rapidSec,slk:e.column+"-thd",elm:"btn",elmt:"ct",itc:1,outcm:s[e.sortState]};if(Object(D.b)(this,r),"function"!=typeof this.props.onHeaderClick)if(e.sortState===Z.DESC)this.setState({rows:this.props.rows,sortState:Z.ORIG,sortColumn:null});else{let t;t=e.sortState===Z.ORIG?this.getSortedRows(e):this.state.rows.reverse(),this.setState({rows:t,sortState:e.sortState+1,sortColumn:e.column})}else this.props.onHeaderClick(e,t)}getSortedRows(e){const t=this.props.rows.slice(),a=e.sortData;return t.sort((e,t)=>{const s=[e,t].map(e=>{let t;switch(a){case"companyName":t=e.longName||e.shortName||"";break;default:t=e[a]}if(void 0===t||null===t)return 0;if("object"==typeof t){if(!isNaN(t.raw))return t.raw;if(t.fmt)return t.fmt}return t});return"string"==typeof s[0]&&"string"==typeof s[1]?s[0].localeCompare(s[1]):s[0]-s[1]})}onClearCheckbox(){this.selectedRows=[],this.state.allSelected?this.setState({allSelected:!1}):this.forceUpdate()}onCheckboxSelect(e,t){this.selectedRows[e.index]=e.checked;const{onCheckboxSelect:a}=this.props;Object(D.b)(this,{sec:this.rapidSec,slk:e.value+"-select",elm:"inpt",elmt:"fltr",itc:1,outcm:e.checked?"slctd":"unslctd"}),"function"==typeof a&&a(e,t),this.forceUpdate()}onAllCheckboxSelect(e,t){if(e.checked)for(let t=0;t<e.value.length;t++)this.selectedRows[t]=!0;else this.selectedRows=[];this.setState({allSelected:!this.state.allSelected}),Object(D.b)(this,{sec:this.props.rapidSec,slk:"table-all-select",elm:"inpt",elmt:"fltr",itc:1,outcm:e.checked?"slctd":"unslctd",c10:e.value});const{onAllCheckboxSelect:a}=this.props;"function"==typeof a&&a(e,t)}renderHeader({isSortable:e,isSelectable:t,firstColumnSticky:a,isFullWidth:s}){const{isTableDense:n}=this.props,i=this.props.config.col||{},o=i.className||ee,c=this.props.config.sortClassName||se,p=this.props.config.iconClassName||re,{sortableColumns:u,columns:h,rowId:f}=this.props,{sortState:g,sortColumn:b,rows:x}=this.state,E=h.length;let y=0;const N=[];let C;g===Z.ASC?C=r.a.createElement(m.Icon,{className:p,asset:H.a}):g===Z.DESC&&(C=r.a.createElement(m.Icon,{className:p,asset:q.a}));let P=0;const w=[];if(t)for(;P<x.length;P++)w[P]=x[P][f];const S=this.context.getStore(Y.a).getStrings();for(;y<E;y++){const s=h[y];let m=o;i[y]&&(m=i[y].headerClassName||i[y].className||m);const p={className:m+" Bgc(white) Fz(xs) Va(m) Py(5px)! ",style:{}};let f;const x=oe[s.raw]||s.raw;e&&(u&&-1===u.indexOf(x)||(p.onClick=this.onHeaderClick.bind(this,{colIndex:y,column:x,sortData:s.raw,sortState:g}),p.className+=" Cur(p) Bgc($extraLightBlue):h ")),x===b||b===s.raw?(f=C,p.className+=c):p.className+=" Fw(400)!",0===y&&(p.className+=" Ta(start) Start(0) Pend(10px)"+(a?" Pos(st) Bgc(white) ":"")),ce[x]?p.className+=" "+ce[x]:ce[s.raw]&&(p.className+=" "+ce[s.raw]),n&&(-1!==p.className.indexOf("Ta(start)")?p.style.paddingRight="10px":p.style.paddingLeft="10px");let E=s.fmt;E||(E=void 0===ie[s.raw]?"SCREENER_FIELD_"+s.raw:ie[s.raw]),this.columnHeaders[y]=S&&S[E],N[y]=r.a.createElement("th",Q({key:s.raw+String(y)},p),e&&0===y&&t&&r.a.createElement(l.a,{className:"Ta(c) Pos(r) Va(tb) Pend(5px) D(n)--print",value:w,onChange:this.onAllCheckboxSelect,checked:this.state.allSelected}),""===E?E:M.a[E]?M.a[E]:r.a.createElement(d.FormattedMessage,{id:E}),f,0===y&&a&&r.a.createElement("div",{className:"W(3px) Pend(5px) Pos(a) Start(100%) T(0) H(100%) Bg($pfColumnFakeShadowGradient) Pe(n)"}))}return r.a.createElement("tr",{className:"C($c-fuji-grey-j) BdB Bdbc($finLightGrayAlt)"},N,!s&&r.a.createElement("th",{className:"W(100%) Bgc(white)"}))}renderRows(){const{columns:e,rowId:t,isTableDense:a,config:s}=this.props,{rows:n}=this.state,i=s.col||{},o=i.className||J,{alternateColor:c,isSelectable:d,isDeletable:p,isFullWidth:u,firstColumnSticky:h}=s.ui,f=s.row||{};let g,b=[],x=0;const E=e.length,y=n.length,N=f.className||"Bgc($extraLightBlue):h BdB Bdbc($finLightGrayAlt) Bdbc($tableBorderBlue):h "+(a?"H(20px)":"H(32px)");for(;x<y;x++){const s=n[x],y=s[t],C=[],P=this.selectedRows[x];let w=" Bgc(white) ";for(P?w=" Bgc($extraLightBlue) ":c&&x%2!=0&&(w=" Bgc($altRowColor) "),g=0;g<E;g++){const t=e[g].raw;let n=i[g]&&i[g].className||o;const c=e[g].type||i[g]&&i[g].type||ne[t],p={},u=this.getCellContent({fieldId:t,row:s,columnType:c},x);0===g&&(n+=" Start(0) Pend(10px) simpTblRow:h_Bgc($extraLightBlue) "+(h?" Pos(st) Bgc(white) ":"")+w),le[t]&&(n+=" "+le[t]),a&&(-1!==n.indexOf("Ta(start)")?p.paddingRight="10px":p.paddingLeft="10px"),-1===n.indexOf("Fz")&&(n+=" Fz(s)"),C[g]=r.a.createElement("td",{key:t+String(g),className:"Va(m) "+n,style:p,"aria-label":this.columnHeaders[g]},d&&0===g&&(this.props.isReordering?r.a.createElement(m.Icon,{className:"Ta(c) Va(tb) Pend(5px)",asset:L.a,color:"#23787D82",height:16}):r.a.createElement(l.a,{className:"Ta(c) Pos(r) Va(tb) Pend(5px) D(n)--print",value:y,index:x,onChange:this.onCheckboxSelect,checked:P})),u,0===g&&h&&r.a.createElement("div",{className:"W(3px) Pos(a) Start(100%) T(0) H(100%) Bg($pfColumnFakeShadowGradient) Pe(n) Pend(5px)"}))}const S=f[x]&&f[x].className||"";let I;"function"==typeof this.props.onDeleteSinglePosition&&(I={onDeleteSinglePosition:()=>{this.props.onDeleteSinglePosition(s.posId)}}),b[x]=r.a.createElement(ge,Q({disabled:!this.props.isReordering,isDeletable:p,index:x,key:y+String(x),className:N+w+S,rapidSec:this.rapidSec},I,{isSelectable:d}),C,!u&&r.a.createElement("td",{className:"W(100%)"}))}return b}render(){const{pageData:e,config:t,containerClassNames:a}=this.props,{rows:s}=this.state;this.props.readOnly||this.isLightweightBrowser?t.ui=ae:t.ui=Object.assign({},te,t.ui),t.trading=Object.assign({},{enable:!1,useDummyBroker:!1},t.trading);const{isSortable:n,isSelectable:i,firstColumnSticky:o,isFullWidth:l,showFooter:m}=t.ui;let d,p;return m&&(d=this.props.onPaginate,"string"==typeof e.startIndex&&(e.startIndex=Number(e.startIndex)),p=r.a.createElement(c.a,{sec:this.rapidSec,onPaginate:d,totalItems:e.totalItems||s.length,startIndex:e.startIndex,itemsPerPage:e.itemsPerPage})),r.a.createElement("div",{className:`Pos(r) ${a}`,id:this.props.id},r.a.createElement("div",{className:"Ovx(s) Ovy(h)"},r.a.createElement("table",{className:"W(100%)"},r.a.createElement("thead",null,this.renderHeader({isSortable:n,isSelectable:i,firstColumnSticky:o,isFullWidth:l})),r.a.createElement(be,{onSortEnd:this.onReorderEnd},this.renderRows()))),p,r.a.createElement("div",{className:"W(3px) Pos(a) End(0) T(0) H(100%) Z(2) Bg($pfColumnFakeShadowGradientReverse) Pe(n)"}))}}xe.displayName="SimpleDataTable",xe.contextTypes={intl:i.a.object.isRequired,session:i.a.object.isRequired,getStore:i.a.func.isRequired},xe.propTypes={className:i.a.string,containerClassNames:i.a.string,disableLinks:i.a.bool,rows:i.a.array.isRequired,columns:i.a.array.isRequired,rowId:i.a.string,rapidSec:i.a.string,sortableColumns:i.a.array,sortState:i.a.number,sortColumn:i.a.string,readOnly:i.a.bool,config:i.a.object,pageData:i.a.object,id:i.a.string,onPaginate:i.a.func,onHeaderClick:i.a.func,onCheckboxSelect:i.a.func,onAllCheckboxSelect:i.a.func,isReordering:i.a.bool,isTableDense:i.a.bool,onDeleteSinglePosition:i.a.func,currentUrl:i.a.string},xe.defaultProps={columns:[],className:"Bdcl(c) BdB Bdc($c-fuji-grey-c)",containerClassNames:"",config:{},rows:[],rowId:"symbol",sortState:Z.ORIG,sortColumn:"symbol",id:"data-table",readOnly:!1,pageData:{}};t.a=xe},1841:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xAxis=function(e,t){const{h:a,tickPadding:s=5,ticks:r,w:n,viewportW:i=n,zebra:o=!0,ui:l}=t;let c,m;if(e.lineWidth=1,e.strokeStyle=l.axisColor,e.beginPath(),e.moveTo(0,a),e.lineTo(i,a),e.stroke(),e.moveTo(0,0),e.lineTo(i,0),e.stroke(),o)for(e.fillStyle="rgba(0, 0, 0, 0.04)",c=0,m=r.length;c<m;c+=2)c===m-1?e.fillRect(r[c].x,0,i-r[c].x,a):e.fillRect(r[c].x,0,r[c+1].x-r[c].x,a);else for(e.strokeStyle=l.axisColor,c=0,m=r.length;c<m;c++)e.beginPath(),e.moveTo(r[c].x,0),e.lineTo(r[c].x,a),e.stroke();for(e.fillStyle=l.textColor,c=0,m=r.length;c<m;c++)e.fillText(r[c].label,r[c].x,a+s)},t.yAxis=function(e,t){const{h:a,tickPadding:s=0,ticks:r,w:n,ui:i}=t;e.strokeStyle=i.axisColor,e.beginPath(),e.moveTo(n,0),e.lineTo(n,a),e.stroke(),e.strokeStyle="rgba(0, 0, 0, 0.06)",r.forEach(({y:t})=>{e.beginPath(),e.moveTo(0,t),e.lineTo(n,t),e.stroke()}),e.fillStyle=i.textColor,r.forEach(({y:t,label:a},i)=>{switch(i){case 0:e.textBaseline="top";break;case r.length-1:e.textBaseline="bottom";break;default:e.textBaseline="middle"}e.fillText(a,n+s,t)}),e.textBaseline="alphabetic"}},1842:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WATERMARK_SRC="data:image/svg+xml,%3Csvg version='1.1' id='Yahoo_finance_watermark' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 224 89' enable-background='new 0 0 224 89' xml:space='preserve'%3E%3Csymbol id='New_Symbol' viewBox='-36 -11.6 72 23.1'%3E%3Cpolygon fill='%2300CD7A' points='36,-11.6 -36,-11.6 -36,11.6 36,11.6 '/%3E%3Ctext transform='matrix(1 0 0 -1 -11.2236 -3.9648)' fill='%23FFFFFF' font-family='Helvetica-Bold' font-size='11'%3EWatch%3C/text%3E%3Cpolygon fill='%23FFFFFF' points='-24,5.5 -18.5,0 -24,-5.5 '/%3E%3C/symbol%3E%3Cpath fill='%23000000' fill-opacity='1' d='M214.1,40.4c0.2,0,0.5,0,0.7,0.1h0c0.4,0.1,0.8,0.2,1.2,0.4c0.1-0.5,0.2-1.3,0.4-2.3c0.6-3.3,1.7-9.4,3.7-17.7c0.8-3.2,3.8-16.1,3.8-16.1c0-0.1,0-0.2,0.1-0.3c0.1-0.5,0.1-1,0-1.4c-0.1-0.4-0.3-0.8-0.5-1.1c-0.2-0.3-0.6-0.6-0.9-0.8c-0.4-0.2-0.8-0.3-1.3-0.4h0c-0.5-0.1-1-0.1-1.4,0c-0.4,0.1-0.8,0.2-1.1,0.5c-0.3,0.2-0.6,0.5-0.8,0.9c-0.2,0.4-0.4,0.8-0.5,1.3c0,0,0,0.2,0,0.2c0,0.1-0.1,0.5-0.1,0.5c-0.4,4.9-1.1,13-1.4,16.1c-0.7,8.5-1.5,14.6-2,18c-0.1,1.1-0.2,1.9-0.3,2.4C213.8,40.5,213.9,40.4,214.1,40.4z M207.1,16.1c-1.2-2.9-3-5.4-5.3-7.4c-2.2-2-5-3.6-8.1-4.6c-3.1-1.1-6.6-1.6-10.4-1.6c-3.7,0-7.2,0.5-10.3,1.6c-0.4,0.1-0.8,0.3-1.2,0.4c-2.6,1-5,2.4-6.9,4.2c-2.2,2-4,4.5-5.3,7.4c-1.2,2.9-1.9,6.3-1.9,10c0,3.7,0.6,7.1,1.9,10c1.2,2.9,3,5.4,5.3,7.4c2.2,2,5,3.5,8.1,4.5c3.1,1,6.6,1.5,10.3,1.5c3.8,0,7.3-0.5,10.4-1.5c0.2-0.1,0.4-0.1,0.6-0.2c0.1,0,0.1,0,0.2-0.1c2.8-1,5.3-2.4,7.4-4.3c2.2-2,4-4.5,5.3-7.4c1.2-2.9,1.9-6.3,1.9-10C209,22.4,208.3,19,207.1,16.1z M200.8,35.4c-0.9,2.6-2.3,4.8-4,6.6c-1.1,1.2-2.4,2.1-3.8,2.9c-0.7,0.4-1.4,0.7-2.1,1c-2.3,0.8-4.8,1.3-7.4,1.3c-2.6,0-5.1-0.4-7.4-1.3c-2.3-0.8-4.3-2.1-6-3.8c-1.7-1.7-3-3.9-4-6.6c-1-2.6-1.4-5.8-1.4-9.4c0-3.6,0.5-6.8,1.4-9.4c0.9-2.6,2.3-4.8,4-6.6c1-1,2.1-1.9,3.4-2.6c0.8-0.5,1.7-0.9,2.6-1.2c2.3-0.8,4.8-1.2,7.4-1.2c2.7,0,5.2,0.4,7.4,1.2c2.3,0.8,4.3,2.1,6,3.8c1.7,1.7,3,3.9,4,6.6c1,2.6,1.4,5.8,1.4,9.4C202.2,29.6,201.7,32.8,200.8,35.4z M153.7,17.2c-1.1-2.6-2.6-4.8-4.6-6.6c-1.9-1.8-4.3-3.2-7-4.1c-2.7-0.9-5.7-1.4-9-1.4c-3.2,0-6.2,0.5-8.9,1.4c-2.7,0.9-5.1,2.3-7,4.1c-1.9,1.8-3.5,4-4.5,6.6c-1.1,2.6-1.6,5.6-1.6,9c0,3.3,0.5,6.3,1.6,8.9c1.1,2.6,2.6,4.8,4.5,6.6c1.9,1.8,4.3,3.2,7,4c2.7,0.9,5.7,1.3,8.9,1.3c3.3,0,6.3-0.4,9-1.3c2.7-0.9,5.1-2.2,7-4c1.9-1.8,3.5-4,4.6-6.6c1.1-2.6,1.6-5.6,1.6-8.9C155.4,22.8,154.8,19.8,153.7,17.2z M147.5,34.5c-0.8,2.3-1.9,4.3-3.3,5.8c-1.4,1.5-3,2.7-4.9,3.4c-1.9,0.7-3.9,1.1-6.1,1.1c-2.1,0-4.2-0.4-6-1.1c-1.9-0.7-3.5-1.9-4.9-3.4c-1.4-1.5-2.5-3.5-3.3-5.8c-0.8-2.3-1.2-5.1-1.2-8.3c0-3.2,0.4-6,1.2-8.4c0.8-2.3,1.9-4.3,3.3-5.8c1.4-1.5,3-2.7,4.9-3.4c1.9-0.7,3.9-1.1,6-1.1c2.2,0,4.2,0.4,6.1,1.1c1.9,0.7,3.5,1.9,4.9,3.4c1.4,1.5,2.5,3.5,3.3,5.8c0.8,2.3,1.2,5.1,1.2,8.4C148.7,29.3,148.3,32.1,147.5,34.5z M34.3,10.8c0.6-1,1.2-2,1.6-2.8c1.6-2.7,2.9-4.8,3.7-6c0.5-0.8,0.9-1.3,1.3-2C41,0.1,41,0,41,0c0,0-0.1,0-0.1,0c-1,0.3-2.2,0.4-3.3,0.4c-1.2,0-2.3-0.1-3.3-0.4c0,0-0.1,0-0.1,0l0,0c-2.1,3.7-7.6,12.8-10.9,18.2c-1.5,2.5-2.6,4.4-2.8,4.7h-0.1c-0.1-0.3-1.3-2.2-2.8-4.7C14.4,12.8,8.9,3.9,6.8,0c0,0-0.1,0.1-0.1,0.1c-1,0.3-2.1,0.4-3.3,0.4C2.3,0.5,1.1,0.3,0.1,0C0,0,0,0,0,0c0,0,0,0,0,0c0.4,0.6,0.8,1.2,1.3,2C2.1,3.2,3.5,5.4,5,8c0.5,0.8,1,1.8,1.6,2.8c1.1,1.8,2.3,3.8,3.2,5.4c1.3,2.3,2.9,5.1,4.5,7.8c1.3,2.2,2.3,4.1,3.3,5.8l0,0.1l0,2c0,2.7-0.1,5.6-0.2,8.1c0,1.2-0.1,3.2-0.1,5.4c-0.1,2.6-0.1,5.4-0.2,6.7c1-0.3,2.2-0.5,3.3-0.5c1.2,0,2.3,0.2,3.4,0.4c-0.1-1.4-0.1-4.1-0.2-6.8c-0.1-2.2-0.1-4.2-0.1-5.4c-0.1-2.5-0.2-5.4-0.2-8.1l0-1.9l0-0.1c1-1.7,2-3.6,3.2-5.8c1.6-2.8,3.2-5.6,4.5-7.8C32.1,14.6,33.3,12.6,34.3,10.8z M105.7,46.1c-1.2,0-2.3,0.2-3.4,0.5l0-0.1c0.1-2.5,0.2-5,0.3-7.5c0.1-2.5,0.2-5.1,0.2-7.7l0-3.8l0,0c-1.8,0-3.5-0.1-5.2-0.1c-2,0-4.1,0-6.2,0c-2.1,0-4.2,0-6.2,0c-1.7,0-3.5,0-5.2,0.1l0,0l0,3.8c0,2.6,0.1,5.2,0.2,7.7c0.1,2.5,0.2,5,0.3,7.5l0,0.1c-1.1-0.3-2.2-0.5-3.4-0.5c-1.2,0-2.3,0.1-3.4,0.5c0.1-2.3,0.2-4.7,0.3-7.5c0.1-2.5,0.1-5.1,0.1-7.7V21.1c0-2.6,0-5.2-0.1-7.7c0-0.9-0.1-1.9-0.1-2.9c-0.1-1.7-0.1-3.4-0.2-5c1.1,0.3,2.2,0.5,3.4,0.5c1.2,0,2.3-0.2,3.4-0.5l0,0.9c-0.1,2.4-0.2,4.9-0.3,7.1c-0.1,2.5-0.1,5.1-0.1,7.7l0,3.5l0,0c1.5,0,3,0.1,4.5,0.1l0.7,0c2,0,4.1,0.1,6.2,0.1c2.1,0,4.2,0,6.2-0.1l0.7,0c1.5,0,4.5-0.1,4.5-0.1l0,0v-3.5c0-2.6-0.1-5.2-0.2-7.7c-0.1-2.2-0.2-4.6-0.3-7l-0.1-1v0c1.1,0.3,2.2,0.5,3.4,0.5c1.2,0,2.3-0.2,3.4-0.5c-0.1,1.6-0.1,3.4-0.2,5c0,1-0.1,2-0.1,2.9c-0.1,2.5-0.1,5.1-0.1,7.7v10.2c0,2.6,0,5.2,0.1,7.7c0.1,2.7,0.2,5.3,0.3,7.5C108,46.2,106.9,46.1,105.7,46.1z M70.5,45.4c-4.4-8.5-13.7-31.5-16.6-39c0,0-0.3-0.7-0.4-0.9h0c0,0,0,0,0,0c-0.7,0.3-1.5,0.4-2.4,0.4c-0.8,0-1.5-0.1-2.2-0.4c0,0-0.1,0-0.2-0.1c-0.1,0.2-0.2,0.5-0.3,0.7c-3.2,8.2-4.4,11-5.2,12.9c-3.2,8-8.1,19.5-11.5,26.2c-0.2,0.4-0.5,1-0.6,1.2c1.1-0.3,2.2-0.5,3.4-0.5c1.1,0,2.2,0.1,3.2,0.4l0.1,0c0.2-0.6,1.1-2.8,2.3-5.7c0.8-1.9,1.6-4,2.5-6.3l0,0c0.3,0,0.5,0,0.8,0c0.8,0,1.6,0,2.4-0.1c1.3,0,3.9,0,5.2,0h0.1c1.3,0,3.8,0,5.2,0c0.7,0,1.5,0,2.3,0.1c0.3,0,0.6,0,0.8,0l0,0c0.9,2.3,1.7,4.3,2.5,6.2c1.2,3,2.1,5.2,2.3,5.8c1.1-0.3,2.2-0.5,3.4-0.5c1.2,0,2.3,0.2,3.4,0.5C71,46.3,70.7,45.7,70.5,45.4z M58.4,31.7c-1.3,0.1-6,0.2-7.3,0.2c-1.3,0-6-0.1-7.3-0.2l0,0c4.6-11.5,7-17.8,7.3-19.3l0-0.1l0,0.1C51.5,13.8,53.9,20.1,58.4,31.7L58.4,31.7z M217.2,49.5c-0.1,0.5-0.2,1-0.5,1.3c-0.2,0.4-0.5,0.7-0.9,0.9c-0.3,0.2-0.7,0.4-1.2,0.4c-0.2,0-0.4,0.1-0.6,0.1c-0.2,0-0.5,0-0.8-0.1c-0.5-0.1-0.9-0.2-1.3-0.4c0,0-0.1-0.1-0.1-0.1c-0.1,0-0.1,0-0.2-0.1c-0.4-0.2-0.7-0.5-1-0.8c-0.2-0.3-0.4-0.7-0.5-1.1c-0.1-0.4-0.1-0.9,0-1.4c0.1-0.5,0.2-1,0.5-1.3c0.2-0.4,0.5-0.7,0.8-0.9c0.3-0.2,0.7-0.4,1.2-0.5c0.2,0,0.4-0.1,0.7-0.1c0.2,0,0.5,0,0.7,0.1c0.5,0.1,0.9,0.2,1.3,0.4c0,0,0,0,0,0c0.1,0,0.2,0.1,0.3,0.1c0.4,0.2,0.7,0.5,1,0.8c0.2,0.3,0.4,0.7,0.5,1.1C217.3,48.5,217.3,49,217.2,49.5z M41.8,61.5v2.3H29.1v8.8h11.2v2.3H29.1v13.4h-6.6V61.5H41.8z M47.5,61.5h6.6v26.8h-6.6V61.5z M61,61.5h4.2l15.3,17v-17h4.1v27.2h-2.8L65.1,69.9v18.4H61V61.5z M103.8,60.9h-2.8L87.9,88.3h4.5l3.5-7.3h10.4l3.4,7.3h6.7L103.8,60.9z M97.1,78.5l4.1-8.6l4,8.6H97.1z M119.6,61.5h4.2l15.3,17v-17h4.1v27.2h-2.8l-16.6-18.8v18.4h-4.2V61.5z M155.9,74.9c0,1.7,0.3,3.3,0.8,4.6c0.5,1.3,1.2,2.4,2.1,3.4c0.9,0.9,1.9,1.6,3,2.1c1.1,0.5,2.3,0.7,3.5,0.7c0.9,0,1.8-0.2,2.6-0.5c0.8-0.3,1.6-0.8,2.3-1.3c0.7-0.5,1.4-1.2,2-1.9c0.6-0.7,1.2-1.5,1.8-2.3l2.7,2c-0.6,1-1.3,1.9-2.1,2.7c-0.8,0.9-1.8,1.7-2.8,2.3c-1,0.7-2.2,1.2-3.4,1.6c-1.2,0.4-2.5,0.6-3.9,0.6c-2.3,0-4.4-0.3-6.4-1c-1.9-0.7-3.6-1.6-5-2.9c-1.4-1.2-2.5-2.7-3.3-4.4c-0.8-1.7-1.2-3.6-1.2-5.7c0-1.4,0.2-2.6,0.5-3.9c0.3-1.2,0.8-2.4,1.5-3.4c0.6-1,1.4-2,2.3-2.8c0.9-0.8,1.9-1.5,3.1-2.1c1.1-0.6,2.4-1,3.8-1.4c1.4-0.3,2.8-0.5,4.3-0.5c1.5,0,3,0.2,4.2,0.5c1.3,0.4,2.5,0.9,3.5,1.5c1,0.6,2,1.4,2.8,2.3c0.8,0.9,1.5,1.9,2.2,2.9l-2.8,1.9c-0.6-0.8-1.2-1.6-1.8-2.3c-0.7-0.7-1.4-1.3-2.1-1.9c-0.8-0.5-1.5-1-2.4-1.3c-0.8-0.3-1.7-0.5-2.6-0.5c-1.2,0-2.4,0.2-3.5,0.7c-1.1,0.5-2.1,1.1-2.9,2.1c-0.8,0.9-1.5,2-2,3.4C156.2,71.6,155.9,73.1,155.9,74.9z M202.2,61.5v2.3h-13.4v8.8h11.2v2.3h-11.2v10.6h13.4v2.7h-20V61.5H202.2z'/%3E%3C/svg%3E",t.default=function(e,t,a,s){const r=a/3,n=r*(s.width/s.height);e.globalAlpha=.03,e.drawImage(s,(t-n)/2,(a-r)/2,n,r),e.globalAlpha=1}},1843:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(357),r=72e5;function n(e){const t=new Date(e);return t.getMinutes()>0&&t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.getTime()}function i(e,t=0){const a=new Date(e+s.TZ_OFFSET_IN_MS+t);return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.getTime()}function o(e,t){let a=0;for(;a<e.length&&e[a]<t;a++);return e[a]}t.getXTicks=function(e){const{exchangeTzOffset:t,format:a,range:l,tradingPeriods:c,xAxis:m}=e,d=m.domain(),p=d[0],u=d[d.length-1],h=u-p,f=[];let g,b,x;switch(l){case"1d":let e;const E=Math.max(r,h/4);for(g=0,e=n(p);g<4&&e<=u;g++,e=n(e+E))f.push({x:m(o(d,e)),label:a(new Date(e))});break;case"5d":c.forEach(e=>{const t=o(d,1e3*e[0].start);f.push({x:m(t),label:a(new Date(t))})});break;case"1mo":for(x=h/(b=3),g=0;g<b;g++){const e=o(d,g>0?i(p+x*g,t):p+s.TZ_OFFSET_IN_MS+t);f.push({x:m(e),label:a(new Date(e))})}break;default:for(x=h/(b=2),g=0;g<b;g++){const e=o(d,g>0?i(p+x*g,t):p+s.TZ_OFFSET_IN_MS+t);f.push({x:m(e),label:a(new Date(e))})}}return f},t.getYTicks=function(e){const{format:t,h:a,ticks:s,yAxis:r}=e,n=[],i=a/s;for(let e=0;e<=s;e++)n.push({y:i*e,label:t(r.invert(i*e))});return n}},1844:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(359),r=a(357),n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function o(e,t){const a=new Date(e.getTime()+r.TZ_OFFSET_IN_MS+t).getHours();return 12===a?`${a}PM`:a<12?`${a}AM`:`${a-12}PM`}t.timeFormat=function(e="max",t="en",a="America/New_York",l=r.TZ_OFFSET_IN_MS){const c=a;return a=>{switch(e){case"1d":return s.formatDateTime?s.formatDateTime(a,t,{timeZone:c,hour:"2-digit",minute:"2-digit"}):o(a,l);case"5d":return s.formatDateTime?s.formatDateTime(a,t,{timeZone:c,month:"short",day:"2-digit",weekday:"short",hour:"2-digit",minute:"2-digit"}):n[a.getDay()];default:return s.formatDateTime?s.formatDateTime(a,t,{timeZone:c,month:"short",day:"numeric",year:"2-digit"}):`${i[a.getMonth()]}, ${a.getDate()} ${a.getFullYear()}`}}},t.xTickFormat=function(e="max",t="en",a="America/New_York",l=r.TZ_OFFSET_IN_MS){const c=a;return a=>{switch(e){case"1d":return s.formatDateTime?s.formatDateTime(a,t,{timeZone:c,hour:"2-digit"}):o(a,l);case"5d":return s.formatDateTime?s.formatDateTime(a,t,{timeZone:c,weekday:"short"}):n[a.getDay()];case"1mo":return s.formatDateTime?s.formatDateTime(a,t,{timeZone:c,day:"numeric",month:"short"}):`${i[a.getMonth()]}, ${a.getDate()}`;default:return s.formatDateTime?s.formatDateTime(a,t,{timeZone:c,month:"short",day:"numeric",year:"2-digit"}):`${i[a.getMonth()]}, ${a.getDate()} ${a.getFullYear()}`}}},t.yTickFormat=function(e="en",t="decimal",a=2){return r=>s.formatNumber?s.formatNumber(r,e,{style:t,minimumFractionDigits:2,maximumFractionDigits:a}):"percent"===t?`${(100*r).toFixed(a)}%`:r.toFixed(a)},t.formatVolume=function(e="en",t){return a=>s.formatNumberShort(a,e,t)}},1845:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{type:t,points:a,ui:{trendDownColor:s,trendUpColor:r,comparisonColors:n,graphLineColor:i,graphLineWidth:o,graphAreaColor:l,multiDayAreaColor:c},ctx:m,h:d,trend:p}=e;let u=l;u||1!==a.length||2===t||(u=1===t?p>0?r:s:c),a.forEach((e,s)=>{if(!e)return;let r=i;2===t?r=c:r||(r=a.length>1?n[s%n.length]:null),function(e){const{ctx:t,points:a,h:s,fillStyle:r,strokeStyle:n,lineWidth:i}=e;let o,l;r&&(t.fillStyle=r),n&&(t.strokeStyle=n),t.beginPath(),a.forEach(({x:e,y:a})=>{"number"==typeof a&&("number"!=typeof o?(o=e,t.moveTo(o,a)):t.lineTo(e,a),l=e)}),i&&(t.lineWidth=i),n&&t.stroke(),r&&(t.fillStyle=r,t.lineTo(l,s),t.lineTo(o,s),t.fill()),1!==t.lineWidth&&(t.lineWidth=1)}({points:e,h:d,ctx:m,lineWidth:o,fillStyle:u,strokeStyle:r})})}},1846:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{candles:t,points:a,ui:{trendDownColor:s,trendUpColor:r,graphLineWidth:n},ctx:i,w:o,h:l}=e;a.forEach(e=>{!function(e){const{candles:t,ctx:a,points:s,trendDownColor:r,trendUpColor:n,strokeStyle:i,w:o}=e;i&&(a.strokeStyle=i);const l=o/t.length,c=Math.max(1,l-1);s.forEach(({x:e,y:s},i)=>{if("number"!=typeof s)return;const o=t[i],m=Math.abs(o.open-o.close);let d,p,u;o.trend>0?(u=n,d=o.close,p=o.open):o.trend<0?(u=r,d=o.open,p=o.close):u="#000",a.beginPath(),a.lineWidth=1,a.moveTo(e,o.high),a.lineTo(e,d),a.stroke(),a.fillStyle=u,a.fillRect(e-l/2,d,c,m),a.beginPath(),a.lineWidth=1,a.moveTo(e,p),a.lineTo(e,o.low),a.stroke()})}({candles:t,points:e,w:o,h:l,ctx:i,lineWidth:n,trendDownColor:s,trendUpColor:r})})}},1847:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(646),r=a(357);function n(e,t,a){const s=(e[1]-e[0])*t,r=(e[1]+e[0])/2;return[Math.max(r-s/2,"number"==typeof a?a:Number.NEGATIVE_INFINITY),r+s/2]}function i(e,t){return t&&r.isNumber(e)?(e-t)/t:null}const o={"1m":60,"2m":120,"5m":300,"15m":900,"30m":1800,"60m":3600,"1h":3600,"90m":5400,"1d":86400,"1wk":604800,"1mo":2592e3};t.processPrices=function(e,t){const{indicators:{quote:[{open:a,close:s,high:n,low:l,volume:c}]},meta:{chartPreviousClose:m,tradingPeriods:d,symbol:p,dataGranularity:u=t},timestamp:h}=e;if(!(a&&s&&n&&l&&c&&h))throw new Error("Data is malformed!");let{meta:{currentTradingPeriod:{regular:{start:f,end:g}}}}=e;Array.isArray(d)&&Array.isArray(r.last(d))&&(r.isNumber(r.last(r.last(d)).end)&&(g=r.last(r.last(d)).end),r.isNumber(r.last(r.last(d)).start)&&(f=r.last(r.last(d)).start));const b=(e.comparisons||[]).filter(e=>e.close&&e.close.length);let x=b.length?[0,0]:[r.isNumber(m)?m:Number.MAX_VALUE,r.isNumber(m)?m:Number.MIN_VALUE],E=[Number.MAX_VALUE,0];const y=h.slice();if(o[u])for(let e=Math.max(r.last(y),f)+o[u];e<=g;e+=o[u])y.push(e);const N={[p]:[]},C=r.isNumber(m)?m:s[0],P=function(e){for(let t=e.length-1,a=e[t];~t;a=e[--t]){if(r.isNumber(a))return a;if(a&&r.isNumber(a.value))return a}}(s)-C;return y.forEach((e,t)=>{const o=b.length?i(s[t],C):s[t];N[p].push({ts:1e3*e,value:o,open:a[t],close:s[t],high:n[t],low:l[t],volume:c[t]||null,trend:r.isNumber(s[t])&&r.isNumber(a[t])?s[t]-a[t]:null}),c[t]&&(E=[Math.min(E[0],c[t]),Math.max(E[1],c[t])]),b.length?r.isNumber(o)&&(x=[Math.min(x[0],o),Math.max(x[1],o)]):x=[r.isNumber(l[t])?Math.min(x[0],l[t]):x[0],r.isNumber(n[t])?Math.max(x[1],n[t]):x[1]]}),E[0]===Number.MAX_VALUE&&(E[0]=0),b.length&&b.forEach(e=>{const t=e.previousClose||e.chartPreviousClose||function(e){for(let t=0,a=e[0];t<e.length;a=e[++t]){if(r.isNumber(a))return a;if(a&&r.isNumber(a.value))return a}}(e.close);N[e.symbol]=y.map((a,s)=>{const n=r.isNumber(e.close[s])?i(e.close[s],t):null;return r.isNumber(n)&&(x=[Math.min(x[0],n),Math.max(x[1],n)]),{ts:1e3*a,value:n,volume:null,trend:0}})}),{data:N,extent:x,volumeExtent:E,trend:P}},t.default=function(e){const{w:t,h:a,graphHeight:i,volumeHeight:o=0,isCandle:l,data:{data:c,volumeExtent:m,extent:d}}=e;let p=[],u=[];const h=Object.keys(c);h.forEach(e=>{c[e].forEach(e=>{p.push(e.value),u.push(e.volume)})});const f=s.scaleLinear().domain(n(d,1.25,h.length>1?null:0)).range([i,0]).nice();let g;o&&(g=s.scaleLinear().domain(n(m,1.25)).range([a,i]));const b=c[h[0]].map(({ts:e})=>e),x=s.scalePoint().domain(b).range([0,t]);let E=[];const y=[],N=h.reduce((e,t)=>{const a=c[t];return e[t]=a.map(e=>{const t=x(e.ts);return g&&E.push({x:t,y:r.isNumber(e.volume)?g(e.volume):null,trend:e.trend}),l&&y.push({x:t,y:r.isNumber(e.value)?f(e.value):null,high:r.isNumber(e.high)?f(e.high):null,low:r.isNumber(e.low)?f(e.low):null,open:r.isNumber(e.open)?f(e.open):null,close:r.isNumber(e.close)?f(e.close):null,trend:e.trend}),{x:t,y:r.isNumber(e.value)?f(e.value):null}}),e},{});return{xAxis:x,yAxis:f,points:N,bars:E,candles:y}}},1848:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(357),r="rgba(255, 255, 255, 0.7)";t.default=function(e){const{h:t,w:a,bars:n,ctx:i,graphHeight:o,ui:l,type:c}=e,m=a/n.length,d=Math.max(1,m-1),p=0===c||1===c;i.beginPath(),p&&(i.fillStyle=r),n.forEach(({trend:e,x:a,y:r},o)=>{s.isNumber(a)&&s.isNumber(r)&&(p||(i.fillStyle=e>0?l.trendUpColor:l.trendDownColor),o===n.length-1?i.fillRect(a-m/2,r,d/2,t-r):i.fillRect(a-m/2,r,d,t-r))}),i.strokeStyle=l.axisColor,i.beginPath(),i.moveTo(a,o),i.lineTo(a,t),i.stroke()}},1849:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(357),r=a(202);t.default=function(e,t,a,n){if(null==a||null==n)throw new Error("Font and font color must be provided");const{width:i,height:o}=e.canvas;e.fillStyle="white",e.rect(0,0,i,o),e.fill(),e.font=a,e.fillStyle=n,e.textBaseline="middle";const{width:l}=e.measureText(t),c=r.calculateRatio(e);e.fillText(t,(i-l*c)/(2*c),(o-s.extractFontSize(a)*c)/(2*c))}},1850:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.area=0]="area",e[e.trendArea=1]="trendArea",e[e.line=2]="line",e[e.candle=3]="candle"}(t.CHART_TYPES||(t.CHART_TYPES={}))},1851:function(e,t){if(void 0===a)var a={};a["chart-line"]={name:"chart-line",height:24,width:24,path:"M11.132 18.496c.422.74 1.517.646 1.808-.154l3.262-8.972 2.93 5.126c.442.774 1.598.627 1.833-.233l3-11c.145-.532-.17-1.082-.702-1.228-.533-.145-1.082.17-1.228.702l-2.365 8.67-2.802-4.903c-.422-.74-1.517-.646-1.808.155l-3.262 8.97-2.93-5.126c-.406-.71-1.45-.66-1.782.09l-3.408 7.67-1.97-1.97c-.39-.39-1.025-.39-1.415 0-.39.39-.39 1.023 0 1.413l3 3c.496.497 1.336.34 1.62-.3l3.2-7.196 3.02 5.286z"},void 0!==e&&e.exports&&(e.exports=a["chart-line"])},1859:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(19),l=a(1603);const c=e=>{const t=new Date,a=new Date(1956,0,1),s=new Date;t.setDate(t.getDate()+1),s.setMonth(s.getMonth()-2);let{fromDate:n,toDate:i}=e,c=r.a.createElement(o.FormattedMessage,{id:e.defaultString}),m="#464e56",d=" C($c-fuji-grey-j) datePickerBtn:h_C($c-fuji-blue-1-a)";return n&&i?(e.showSelectedDate&&(c=function(e,t){return[r.a.createElement(o.FormattedDate,{key:"fromDate",value:e,year:"numeric",month:"short",day:"2-digit"})," - ",r.a.createElement(o.FormattedDate,{key:"toDate",value:t,year:"numeric",month:"short",day:"2-digit"})]}(n,i)),d=" C($c-fuji-blue-1-a)",m="#188fff"):(n=s,i=new Date),r.a.createElement(l.a,{config:{isDateRange:!0,showCaretDownIcon:!1,showButtons:!0},text:c,className:"D(ib) M(0) datePickerBtn",dropDownClsName:e.dropDownContainerClass,dateRangeDropDownMenuCls:e.dropDownClass,selected:{fromDate:n,toDate:i},maxDate:t,minDate:a,textClassName:"Mstart(6px) Fw(500) D(n)--tab768"+d,inputClass:"Bxsh(n)",textIconCls:"H(15px) W(16px) Va(t)! datePickerBtn:h_Fill($c-fuji-blue-1-a)! datePickerBtn:h_Stk($c-fuji-blue-1-a)!",textIconColor:m,arrowStyle:e.arrowStyle,onApply:e.onApply,setDropDownRef:e.setDropDownRef})};c.displayName="DateRange",c.propTypes={toDate:i.a.instanceOf(Date),fromDate:i.a.instanceOf(Date),showSelectedDate:i.a.bool,onApply:i.a.func,defaultString:i.a.string.isRequired,dropDownClass:i.a.string,arrowStyle:i.a.object,dropDownContainerClass:i.a.string,setDropDownRef:i.a.func},c.defaultProps={defaultString:"",showSelectedDate:!0,arrowStyle:{top:-10,left:5},dropDownContainerClass:"M(0) Fz(s) ",dropDownClass:"Mt(10px) Bxsh($boxShadow1) Miw(476px)"},t.a=c},1861:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(1601),l=a(116),c=a.n(l),m=a(19),d=a(20),p=(a.n(d),a(1590)),u=a(626);class h extends r.a.PureComponent{constructor(){super(),this.onCancel=this.onCancel.bind(this),this.onSubmit=this.onSubmit.bind(this),this.setInputRef=this.setInputRef.bind(this),this.setCurrencyRef=this.setCurrencyRef.bind(this),this._requestPending=!1}setInputRef(e){e&&(this.inputNode=e,e.focus())}setCurrencyRef(e){e&&(this.currencySelect=e)}componentWillReceiveProps(e){const{meta:t,hasError:a,onCreate:s}=e;if(this._requestPending){const{lastCreatedList:e}=t;!a&&e&&e.pfName===this.inputNode.value&&(this.inputNode.value="","function"==typeof s&&s({pfName:e.pfName,pfId:e.id})),this._requestPending=!1}}onSubmit(e){e.preventDefault();const t=this.inputNode.value;if(t.trim()){const e=this.currencySelect&&this.currencySelect.getValue();this._requestPending=!0,this.context.executeAction(o.a,{silent:!1,pfName:t,baseCurrency:e})}}onCancel(e){"function"==typeof this.props.onCancel&&this.props.onCancel(e)}render(){const{className:e,showCurrency:t,currencies:a,hasError:s,rapidSec:n}=this.props,i=this.context.intl.formatMessage,o=t&&a&&a.map(e=>({data:e.symbol,content:e.longName+" ("+e.symbol+")"}));let l;s&&(l=r.a.createElement("div",{className:"C($c-fuji-red-2-b) Fw(500) Fz(s) Mb(5px)"},r.a.createElement(m.FormattedMessage,{id:"CREATE_PF_ERROR"})));const c=o&&t;return r.a.createElement("section",{className:e,"data-test":"fin-create-pfModal"},r.a.createElement("h2",{className:"Fz(17px) C(black) Mb(10px)"},r.a.createElement(m.FormattedMessage,{id:"CREATE_PORTFOLIO"})),l,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",null,r.a.createElement("input",{required:!0,className:"Fz(s) H(34px) Bdc($c-fuji-grey-c) Bdc($c-fuji-blue-1-b):f W(100%) Pstart(6px) Fw(500) "+(c?" Mb(20px)":""),placeholder:i({id:"ENTER_PORTFOLIO_NAME"}),autoFocus:!0,ref:this.setInputRef})),r.a.createElement("div",null,c?r.a.createElement(p.a,{name:"currency-select",className:"H(36px) D(b) W(100%)",iconClassName:"H(100%) W(8px) Va(m)! Mstart(8px)",options:o,selected:"USD",ref:this.setCurrencyRef}):null),r.a.createElement("div",{className:"Bfc Mt(20px)"},r.a.createElement(d.I13nButton,{type:"submit",className:"Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Fw(500) Px(20px) Py(9px) Bdrs(3px) Bd(0) Fz(s) D(ib) Whs(nw) Miw(110px) O(n):f",title:i({id:"SUBMIT"}),i13nModel:{sec:n,slk:"submit",itc:0,elm:"btn",elmt:"done",rspns:"nav"}},r.a.createElement(m.FormattedMessage,{id:"SUBMIT"})),r.a.createElement(d.I13nButton,{type:"button",className:"C($c-fuji-blue-1-b) Bd Bdc($c-fuji-blue-1-b) Bdc($actionBlueHover):h C($c-fuji-blue-1-b) C($actionBlueHover):h C($actionBlueHover):f Fw(500) Px(20px) Py(8px) Bdrs(3px) Fz(s) D(ib) Mstart(20px) Whs(nw) Miw(110px) O(n):f",title:i({id:"CANCEL"}),i13nModel:{sec:n,slk:"cancel",itc:1,elm:"btn",elmt:"cl",rspns:"cl"},onClick:this.onCancel},r.a.createElement(m.FormattedMessage,{id:"CANCEL"})))))}}h.displayName="CreatePortfolio",h.propTypes={className:i.a.string,rapidSec:i.a.string.isRequired,showCurrency:i.a.bool,meta:i.a.object,isLoading:i.a.bool,hasError:i.a.bool,currencies:i.a.array,onCreate:i.a.func,onCancel:i.a.func},h.contextTypes={executeAction:i.a.func.isRequired,getStore:i.a.func.isRequired,intl:i.a.object.isRequired},h.defaultProps={className:"Bxsh($boxAreaShadow) Bgc(white) P(25px) Pos(f) T(50%) Start(50%) Translate(-50%,-50%) Miw(400px) Miw(300px)--mobp",rapidSec:"fin-creat-pf",showCurrency:!0},t.a=c()(h,[u.a],(e,t)=>{const a=e.getStore(u.a);return{meta:a.getMeta(),isLoading:a.isLoading(),currencies:a.getCurrencies(),hasError:a.hasError("PORTFOLIO_CREATE_FAIL")}})},1892:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(11),l=(a.n(o),a(78)),c=a.n(l),m=a(19),d=a(680),p=a.n(d),u=a(628),h=a.n(u),f=a(363),g=a(43),b=a(355);a.n(b);const x="mini",E="mini-sub",y="trial",N="pf-premium-teaser",C=({className:e,type:t,rapidSec:a,pfPrefix:s,viewPrefix:n,innerClassName:i,pfId:l,isHighValueUser:d,alignClassName:u,description:C,hasHoldings:P})=>{if(d&&(!l||P))return null;const w=Object(g.i)("premium-marketing",{ncid:f.a.USER_PROFILE.parent}),S=l?`/${s}/${l}/${n}/v2`:"/";let I;switch(t){case x:{let e,t,s,n=b.PREMIUM_PORTFOLIO_HEADER_TEXT,i=b.PREMIUM_PORTFOLIO_HEADER_TITLE;d&&!P?(e=S,t=b.UPDATE_YOUR_HOLDINGS,s="update-holdings"):(e=w,t=r.a.createElement(m.FormattedMessage,{id:"LEARN_MORE"}),s="learn-more"),I=r.a.createElement("div",{className:u},r.a.createElement("h3",{className:"Fw(b) Fz(m) Mb(10px)"},i),r.a.createElement("p",{className:"Fz(s) Fw(400) Mb(10px) C($c-fuji-grey-j)"},n),r.a.createElement(c.a,{className:"D(ib) Bdrs(25px) Td(n) Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Px(15px) Py(10px) Fw(b) Miw(120px) Ta(c)",href:e,i13nModel:{elm:"itm",elmt:"link",itc:0,sec:a,slk:s,subsec:N}},t),r.a.createElement("div",{className:"Pos(a) End(0) B(0)"},r.a.createElement("svg",{viewBox:"0 0 289 130",className:"Op(0.4) H(110px)--mv2 H(90px)"},r.a.createElement("title",null,"Portfolio Analytics"),r.a.createElement("desc",null,"Portfolio Analytics"),r.a.createElement("defs",null,r.a.createElement("radialGradient",{id:"c",cy:"0%",r:"122.88%",gradientTransform:"translate(.5) scale(.3391 1) rotate(90) translate(-.5)"},r.a.createElement("stop",{stopColor:"#45EEB4",stopOpacity:".2",offset:"0"}),r.a.createElement("stop",{stopColor:"#21D87D",stopOpacity:"0",offset:"1"})),r.a.createElement("path",{id:"b",d:"m97.5 108c-27.338 0-49.5-22.162-49.5-49.5s22.162-49.5 49.5-49.5c27.338 0 49.5 22.162 49.5 49.5s-22.162 49.5-49.5 49.5zm0-26.788c12.543 0 22.712-10.168 22.712-22.712s-10.168-22.712-22.712-22.712c-12.543 0-22.712 10.168-22.712 22.712s10.168 22.712 22.712 22.712z"}),r.a.createElement("filter",{id:"e",x:"-15.7%",y:"-14.6%",width:"131.3%",height:"131.3%"},r.a.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.a.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"5"}),r.a.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.08 0"})),r.a.createElement("path",{id:"a",d:"m11.419 4.7645e-13l95.862-4.7734e-13c3.0928-1.705e-14 5.6 2.5072 5.6 5.6v43.595c0 3.0928-2.5072 5.6-5.6 5.6h-95.862c-3.0928 0-5.6-2.5072-5.6-5.6v-15.099c0-0.55629-0.22072-1.0899-0.61372-1.4836l-3.724-3.7308c-0.81829-0.81979-0.81829-2.1473 0-2.9671l3.724-3.7308c0.393-0.39372 0.61372-0.92728 0.61372-1.4836v-15.099c0-3.0928 2.5072-5.6 5.6-5.6z"}),r.a.createElement("filter",{id:"d",x:"-7.6%",y:"-15.5%",width:"116.1%",height:"134.7%"},r.a.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.a.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"3"}),r.a.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0"}))),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(-1012 -252)"},r.a.createElement("g",{transform:"translate(1010 252)"},r.a.createElement("path",{transform:"translate(144.5 49) scale(1 -1) translate(-144.5 -49)",d:"m0 36.581c26.279 0 38.966-36.581 59.463-36.581 13.191 1.1987e-12 25.116 36.581 50.66 36.581 20.629 0 41.681 14.185 63.655 14.185 12.272 0 27.371-16.82 50.587-14.185 18.395 2.0886 39.06 37.766 64.635 37.766 0 3.3219-0.19422 11.206-0.58266 23.652h-288.42v-61.419z",fill:"url(#c)"}),r.a.createElement("path",{transform:"translate(146.5 78) scale(1 -1) translate(-146.5 -78)",d:"m4 28c26.27 0 32.564 26.316 53.053 26.316 13.186 0 30.387 38.443 55.922 38.443 20.622 0 36.386 14.906 58.352 14.906 12.268 0 27.362-17.677 50.57-14.906 18.389 2.1949 41.536 35.241 67.103 35.241",stroke:"#1AC567",strokeLinecap:"round",strokeWidth:"2.8"}),r.a.createElement("use",{fill:"black",filter:"url(#e)",href:"#b"}),r.a.createElement("use",{fill:"#fff",fillRule:"evenodd",href:"#b"}),r.a.createElement("g",{transform:"translate(62 22)"},r.a.createElement("g",{strokeWidth:"23.8"},r.a.createElement("path",{d:"m36.075 72.283c19.924 0 36.075-16.181 36.075-36.141 0-19.96-16.151-36.141-36.075-36.141-14.916 0-27.718 9.0695-33.211 22.004-1.844 4.3423-2.8642 9.1202-2.8642 14.137 0 15.129 9.2793 28.087 22.447 33.474 4.2047 1.7199 8.8058 2.6677 13.628 2.6677z",stroke:"#FFD333"}),r.a.createElement("path",{d:"m2.8642 22.004c-1.844 4.3423-2.8642 9.1202-2.8642 14.137 0 15.129 9.2793 28.087 22.447 33.474 4.2047 1.7199 8.8058 2.6677 13.628 2.6677",stroke:"#00B061"}),r.a.createElement("path",{d:"m18.387 67.647c5.2266 2.9515 11.261 4.6354 17.689 4.6354 14.211 0 26.503-8.2324 32.384-20.197",stroke:"#11D3CD"}),r.a.createElement("path",{d:"m66.383 55.752c3.649-5.6485 5.7676-12.382 5.7676-19.611 0-19.96-16.151-36.141-36.075-36.141",stroke:"#0F69FF"})),r.a.createElement("g",{transform:"translate(68.078 5.2463)"},r.a.createElement("use",{fill:"black",filter:"url(#d)",href:"#a"}),r.a.createElement("use",{fill:"#fff",fillRule:"evenodd",href:"#a"}),r.a.createElement("g",{transform:"translate(15.128 9.9097)"},r.a.createElement("path",{d:"m39.566 0h45.082c2.0957 0 3.7946 1.7007 3.7946 3.789 0 2.0926-1.6966 3.789-3.7946 3.789h-45.082v-7.578z",fill:"#E0E4E9",opacity:".6"}),r.a.createElement("path",{d:"m3.23e-15 3.789c0-2.0926 1.6942-3.789 3.7953-3.789h50.595c2.0961 0 3.7953 1.7007 3.7953 3.789 0 2.0926-1.6942 3.789-3.7953 3.789h-50.595c-2.0961 0-3.7953-1.7007-3.7953-3.789z",fill:"#21D87D"}),r.a.createElement("path",{d:"m30.257 13.99h54.391c2.0961 0 3.7953 1.7007 3.7953 3.789 0 2.0926-1.6942 3.789-3.7953 3.789h-54.391v-7.578z",fill:"#E0E4E9",opacity:".6"}),r.a.createElement("path",{d:"m-3.2461e-15 17.779c0-2.0926 1.7002-3.789 3.7912-3.789h31.402c2.0938 0 3.7912 1.7007 3.7912 3.789 0 2.0926-1.7002 3.789-3.7912 3.789h-31.402c-2.0938 0-3.7912-1.7007-3.7912-3.789z",fill:"#FF4D52"}),r.a.createElement("path",{d:"m20.365 27.98h64.296c2.0885 0 3.7815 1.7007 3.7815 3.789 0 2.0926-1.6998 3.789-3.7815 3.789h-64.296v-7.578z",fill:"#E0E4E9",opacity:".6"}),r.a.createElement("path",{d:"m-2.0187e-16 31.769c0-2.0926 1.6899-3.789 3.7885-3.789h21.516c2.0923 0 3.7885 1.7007 3.7885 3.789 0 2.0926-1.6899 3.789-3.7885 3.789h-21.516c-2.0923 0-3.7885-1.7007-3.7885-3.789z",fill:"#0F69FF"}))))))))));break}case E:I=[r.a.createElement("div",{key:"icon",className:"M(a) Ta(c) Mb(5px)"},r.a.createElement(o.Icon,{className:"Va(m)! Cur(a)! Mb(2px) Fill($premiumAppCarrot)! Stk($premiumAppCarrot)!",asset:p.a,height:"20"})),r.a.createElement("div",{key:"msg"},r.a.createElement(c.a,{className:"Td(n) C($c-fuji-blue-1-b) Fz(14px) Fw(b)",href:w,i13nModel:{elm:"itm",elmt:"link",itc:0,sec:a,slk:"subscribe",subsec:N}},b.SUBSCRIBE),r.a.createElement("span",{className:"Mstart(4px) Fz(14px) C($c-fuji-grey-j) Fw(b)"},b.SUBSCRIBE_TO_VIEW_SUBSTR))];break;case y:{let e,t,s,n,i,l,m;d&&!P?(e=S,t=b.UPDATE_YOUR_HOLDINGS,i=b.UPDATE_YOUR_HOLDINGS_MSG,l=b.NO_HOLDINGS_MSG,s=h.a,m="update-holdings",n="Fill($warningYellow)! Stk($warningYellow)!"):(e=w,t=b.FREE_TRIAL,l=C||b.EXCLUSIVE_REPORTS_MSG,i=b.SUBSCRIBE_TO_VIEW,s=p.a,n="Fill($premiumAppCarrot)! Stk($premiumAppCarrot)!",m="start-trial"),I=[r.a.createElement("div",{key:"icon",className:"M(a) Ta(c) Mb(10px)"},r.a.createElement(o.Icon,{className:"Va(m)! Mend(4px) Cur(a)! "+n,asset:s,height:"30"})),r.a.createElement("div",{key:"msg",className:"Ta(c)"},r.a.createElement("h3",{className:"Fw(b) Fz(16px) Mb(10px)"},i),r.a.createElement("p",{className:"Fz(14px) Fw(400) Mb(15px) C($c-fuji-grey-j)"},l),r.a.createElement("div",null,r.a.createElement(c.a,{className:"D(ib) Bdrs(25px) Td(n) Bgc($c-fuji-blue-1-b) Bgc($actionBlueHover):h C(white) Px(15px) Py(10px) Fw(b)",href:e,i13nModel:{elm:"itm",elmt:"link",itc:0,sec:a,slk:m,subsec:N}},t)))];break}}return r.a.createElement("div",{className:e},r.a.createElement("div",{className:i},I))};C.displayName="PfPremiumTeaserModal",C.propTypes={className:i.a.string,type:i.a.oneOf([x,y,E]),rapidSec:i.a.string,alignClassName:i.a.string,innerClassName:i.a.string,description:i.a.string,isHighValueUser:i.a.bool,pfPrefix:i.a.string,viewPrefix:i.a.string,pfId:i.a.string,hasHoldings:i.a.bool},C.defaultProps={type:y,rapidSec:"pf-premium-mod",pfPrefix:"portfolio",viewPrefix:"view",description:"",alignClassName:"Ta(start)",className:"Bgc($panelBackground) Ta(c) Miw(984px)",isHighValueUser:!1,innerClassName:"M(a) smartphone_P(10px) smartphone_Start(0)"},t.a=C},1920:function(e,t,a){"use strict";var s=a(26),r=a.n(s),n=a(88),i=a(2),o=a.n(i);const l=30;function c(e,t,a){const s=t&&t.size||l,i=o()(e,["request","user","guid"]);i?Object(n.b)(e,{resource:"tachyon.topNTicker",params:{userId:i,count:s,quoteType:"EQUITY",market:"us_market"}}).then(t=>{if(!t||!Array.isArray(t))throw r.a.http.badGateway("Wrong top N tickers data");e.dispatch("PORTAL_LOAD_SYMBOLS",t),a&&a(null,t)}).catch(t=>{e.dispatch("SET_PORTAL_STORE_ERROR",{event:"PORTAL_LOAD_SYMBOLS_FAIL",error:t}),a&&a(t)}):a&&a()}c.displayName="loadTopNTickers",t.a=c},1941:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(26),l=a.n(o),c=a(88),m=a(91),d=a.n(m),p=a(246);function u(e,t){const{pfId:a,pfName:s}=t;if(!a)throw l.a.http.badRequest("renamePortfolio: missing `pfId`");if(!s)throw l.a.http.badRequest("renamePortfolio: missing `pfName`");const r=e.request.user.guid;if(!r)throw l.a.http.badRequest("renamePortfolio: Unable to fetch user guid");return Object(c.b)(e,{resource:"tachyon.portfolioUpdate",params:{action:"update",userId:r,pfId:a},method:"update",body:{parameters:{userId:r,userIdType:"guid",pfId:a,fullResponse:!0},operations:[{operation:"portfolio_update",pfName:s}]}}).then(t=>{if(!t)throw l.a.http.internalServerError("renamePortfolio: No list received");delete t.positions,e.dispatch("FIN_PF_LIST_UPDATE",{pfId:a,list:t}),e.executeAction(d.a.hide)}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:p.u}),t})}var h=a(1782),f=a(116),g=a.n(f),b=a(626),x=a(19);class E extends r.a.Component{constructor(){super(),this.onSubmit=this.onSubmit.bind(this),this.setInputRef=this.setInputRef.bind(this)}setInputRef(e){e&&(this.inputRef=e,e.focus())}onSubmit(){this.context.executeAction(u,{pfId:this.props.pfId,pfName:this.inputRef.value})}render(){const{hasError:e,pfName:t}=this.props,a=this.context.intl.formatMessage;return r.a.createElement(h.a,{rapidSec:"fin-rename-pf",onSubmit:this.onSubmit,titleMessageId:"RENAME_PORTFOLIO",errorMessageId:e&&"RENAME_PORTFOLIO_ERROR",submitMessageId:"SAVE"},r.a.createElement("p",{className:"M(0) Mb(10px) P(0) Fz(s)"},r.a.createElement(x.FormattedMessage,{id:"RENAME_MODAL_MESSAGE",values:{pfName:t}})),r.a.createElement("input",{required:!0,className:"Fz(s) H(34px) Bdc($c-fuji-grey-c) Bdc($c-fuji-blue-1-b):f W(100%) Pstart(6px) Fw(500)",placeholder:a({id:"ENTER_PORTFOLIO_NAME"}),defaultValue:t,ref:this.setInputRef}))}}E.displayName="RenamePortfolioPopup",E.propTypes={pfId:i.a.string,pfName:i.a.string,hasError:i.a.bool},E.defaultProps={pfName:""},E.contextTypes={executeAction:i.a.func.isRequired,intl:i.a.object.isRequired};t.a=g()(E,[b.a],(e,t)=>{return{hasError:e.getStore(b.a).hasError(p.u)}})},1942:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(26),l=a.n(o),c=a(88),m=a(91),d=a.n(m),p=a(93),u=a.n(p),h=a(246);function f(e,t){const{pfId:a}=t;if(!a)throw l.a.http.badRequest("deletePortfolio: missing `pfId`");const s=e.request.user.guid;if(!s)throw l.a.http.badRequest("deletePortfolio: Unable to fetch user guid");return Object(c.b)(e,{resource:"tachyon.portfolioDelete",params:{userId:s,pfId:a},method:"delete"}).then(()=>{e.executeAction(d.a.hide),e.executeAction(u.a,{url:"/portfolios"})}).catch(t=>{throw e.dispatch("SET_FIN_PF_LIST_ERROR",{error:h.g}),t})}var g=a(1782),b=a(116),x=a.n(b),E=a(626),y=a(19);class N extends r.a.PureComponent{constructor(){super(),this.onSubmit=this.onSubmit.bind(this),this.state={errorMessage:null}}onSubmit(e){this.context.executeAction(f,{pfId:this.props.pfId})}render(){const{hasError:e,pfName:t}=this.props;return r.a.createElement(g.a,{rapidSec:"fin-delete-pf",onSubmit:this.onSubmit,titleMessageId:"DELETE_PORTFOLIO_TITLE",errorMessageId:e&&"DELETE_PORTFOLIO_ERROR",submitMessageId:"CONFIRM",submitI13nModel:{slk:"submit",itc:0,elm:"btn",elmt:"done",rspns:"nav"}},r.a.createElement("p",{className:"M(0) Mb(10px) P(0) Fz(s)"},r.a.createElement(y.FormattedMessage,{id:"CONFIRM_DELETE_MSG",values:{pfName:t}})))}}N.displayName="DeletePortfolioPopup",N.propTypes={pfId:i.a.string,pfName:i.a.string,hasError:i.a.bool},N.defaultProps={pfName:""},N.contextTypes={executeAction:i.a.func.isRequired};t.a=x()(N,[E.a],(e,t)=>{return{hasError:e.getStore(E.a).hasError(h.g)}})},2001:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(26),l=a.n(o),c=a(246),m=a(39),d=a.n(m),p=a(43),u=a(2002),h=a(1835);const f={LOAD:"load",ADD:"add",REMOVE:"remove"};function g(e){if(!e)return{meta:{},quotes:[],isEmpty:!0};const t=[],{performance:a,timestamp:s}=e;for(let e=0;e<s.length;e++)t.push({Date:new Date(s[e]).toISOString().substr(0,10),DayReturn:a.dayReturn[e],MarketValue:a.endMarketValue[e],Close:100*a.totalReturn[e]});return{meta:{start:s[0],end:s[s.length-1]},quotes:t}}function b(e,t,a){const{symbol:s,comparison:r=[],range:n="ytd",start:i,end:o,operation:m=f.LOAD}=t;if(!s&&m===f.LOAD){const e=l.a.http.badRequest("loadMultiPerformanceCharts: missing `symbol` for load operation");return void(a&&a(e))}if(!(r&&0!==r.length||m!==f.ADD&&m!==f.REMOVE)){const e=l.a.http.badRequest("loadMultiPerformanceCharts: missing `comparison` for add/remove operation");return void(a&&a(e))}const b=e.getStore(h.a),x=b.getMeta(),E=b.getPerformance();if(m===f.REMOVE){const s=x&&x.comparison||[];return r.forEach(e=>{for(let t=0;t<s.length;t++)if(s[t]===e)return void s.splice(t,1)}),e.dispatch("FIN_PF_PERF_META_UPDATE",{meta:{comparison:s},silent:t.silent,clear:t.clear}),void(a&&a())}const y=[s,...r];if(x&&E){let l=!1;if(i&&o?x.start===i&&x.end===o&&(l=!0):n===x.range&&(l=!0),l){let n=!0;for(let e=0;e<y.length;e++)if(y[e]&&!E[y[e]]){n=!1;break}if(n){const n={};return m===f.ADD?n.comparison=(x.comparison||[]).concat(r):(n.symbol=s,n.comparison=r),e.dispatch("FIN_PF_PERF_META_UPDATE",{meta:n,silent:t.silent,clear:t.clear}),void(a&&a())}}}e.dispatch("SET_FIN_PF_PERF_LOADING",{loading:!0});const N={};y.forEach(t=>{if(!t)return;const a={forceLoad:!0,dispatch:!1,range:n,start:i,end:o};"$"===t[0]?a.pfId=t.substr(1):a.symbol=t,N[t]=p.c.bind(this,u.a,e,a)}),d.a.auto(N,(l,d)=>{const p=m===f.ADD?(x&&x.comparison||[]).concat(r):r,u={meta:{range:n,symbol:s,comparison:p,isCustom:!(!i||!o)},performance:{},clear:t.clear,silent:t.silent};for(let t in d)if(d.hasOwnProperty(t)&&t){if(d[t]&&d[t].err)return e.dispatch("SET_FIN_PF_PERF_ERROR",{error:c.p}),void(a&&a(d[t].err));const r=g(d[t]);if(t===s&&(u.meta.isEmpty=!!r.isEmpty,r.isEmpty))break;u.performance[t]=r.quotes,t===s&&(u.meta.start=r.meta.start,u.meta.end=r.meta.end)}e.dispatch("FIN_PF_PERF_LOAD",u),a&&a()})}b.displayName="loadMultiPerformanceCharts";var x=b,E=a(1614),y=a(2003),N=a(11),C=a(19),P=a(190),w=a(1561),S=a(20),I=a(116),M=a.n(I),k=a(626),v=a(1806),T=a.n(v),F=a(633),R=a.n(F),D=a(89),B=a.n(D),_=a(355),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const A=[{name:"DOW",symbol:"^DJI"},{name:"NASDAQ",symbol:"^IXIC"},{name:"S&P 500",symbol:"^GSPC"}],L=({rapidSec:e,className:t,disabled:a,name:s,symbol:n,onClick:i,type:o})=>{let l={},c="",m="";return a?(l={disabled:!0},c="Cur(a)! Fill($c-fuji-grey-j)! Stk($c-fuji-grey-j)!",m="C($c-fuji-grey-j)"):(c="compareItemBtn:h_Fill($actionBlueHover)! compareItemBtn:h_Stk($actionBlueHover)",m="C($c-fuji-blue-1-b) compareItemBtn:h_C($actionBlueHover)"),r.a.createElement(S.I13nButton,O({className:"compareItemBtn Ta(start) Whs(nw) "+t,onClick:function(e){"function"==typeof i&&i(e,{type:o,symbol:n,name:s})},i13nModel:{sec:e,subsec:"portfolio"===o?"perf-comp-pf":"perf-comp-symbol",itc:1,elm:"itm",elmt:"mu",slk:s}},l),r.a.createElement(N.Icon,{key:"icon",className:"H(16px) W(16px) Mend(5px) Va(m)! "+c,asset:T.a,color:"#0081f2",height:16}),r.a.createElement("div",{className:"Ell Fz(s) Fw(500) D(ib) Va(m) "+m},s))};L.displayName="PerformanceCompareItem",L.propTypes={symbol:i.a.string,name:i.a.string,rapidSec:i.a.string.isRequired,className:i.a.string,type:i.a.string,disabled:i.a.bool,onClick:i.a.func},L.defaultProps={type:"default",disabled:!1,className:"W(100%) Fz(s) P(0) Fw(500)"};class j extends r.a.PureComponent{constructor(){super(),this.onItemSelect=this.onItemSelect.bind(this),this.onAutocompleteSelect=this.onAutocompleteSelect.bind(this),this.setDropDownRef=this.setDropDownRef.bind(this)}setDropDownRef(e){this.dropDown=e}onItemSelect(e,{type:t,symbol:a,name:s}){"function"==typeof this.props.onSymbolChange&&this.props.onSymbolChange({type:t,symbol:a,name:s}),this.dropDown&&this.dropDown.closeMenu()}onAutocompleteSelect(e,t){if(!t)return;const a=t.split(",")[0].toUpperCase();this.onItemSelect(e,{type:"default",symbol:a,name:a})}renderPortfolioList(){const{rapidSec:e,portfolioList:t}=this.props;return t&&0!==t.length?r.a.createElement("div",{key:"pf-list",className:"Mt(25px) Mx(20px)"},r.a.createElement("h5",{className:"Fw(b) Fz(m)"},r.a.createElement(C.FormattedMessage,{id:"MY_PORTFOLIOS"})),r.a.createElement("ul",{className:"Mt(10px) List(n)"},t.map(t=>{const a=t.pfId;return r.a.createElement("li",{key:a,className:"M(0) P(0) Va(m) Mb(15px)"},r.a.createElement(L,{key:a,disabled:a===this.props.pfId,onClick:this.onItemSelect,symbol:a,name:B.a.decode(t.pfName||""),type:"portfolio",rapidSec:e}))}))):null}renderIndexRow(e){const{rapidSec:t}=this.props;return r.a.createElement("ul",{key:"indexrow","aria-label":"nav",className:"Mt(15px) Fz(14px) Fw(500) H(20px) Mx(20px)"},e.map((e,a)=>{const s=e.symbol||"";return r.a.createElement("li",{key:s,className:"M(0) P(0) D(ib) Va(m) W(1/3)"},r.a.createElement(L,{key:s,onClick:this.onItemSelect,symbol:s,name:e.name||e.symbol,type:"default",rapidSec:t}))}))}renderComparatorMenu(){return[r.a.createElement(w.a,{key:"lookup",resultClassNames:"W(100%) Pt(5px) Pos(s)! Bxsh(n)! Bd(n)!",showFooter:!1,autoFocus:!0,inputClassNames:"Mstart(0) Pend(0px)! Pstart(25px)! Bgc(white) Bd(0) W(100%) H(32px)! Lh(32px)! Bdbw(1px) Bdbc($c-fuji-grey-e) Bdbs(s) Bdc($c-fuji-grey-e)!",placeholderKey:"SEARCH_SYMBOL_COMPANY",submitButtonClassName:"H(32px)! Lh(n)! Va(m) Pos(a) Start(-6px)",submitButtonValue:r.a.createElement(N.Icon,{asset:R.a,height:17,className:"Fill($c-fuji-blue-1-a)! Stroke($c-fuji-blue-1-a)! Cur(d)!"}),onSubmit:this.onAutocompleteSelect,onSelect:this.onAutocompleteSelect,containerClassNames:"Mt(20px) Mx(20px) C($c-fuji-grey-j)",returnResults:!0}),this.renderIndexRow(A),this.renderPortfolioList()]}render(){const{className:e}=this.props;return r.a.createElement(P.a,{id:"comparators",ref:this.setDropDownRef,containerClassName:"Pos(r) D(ib) O(n):f seriesComparisonBtn",content:this.renderComparatorMenu(),className:e,menuClassName:"Z(5) Bxsh($boxShadow1) Bd Bdc($c-fuji-grey-c) Bdrs(3px) Mt(10px) Bgc(white) W(375px) Ta(start) Pb(25px) Cur(a) O(n):f",showClose:!1,showArrow:!0,arrowStyle:{top:-10,left:5}},r.a.createElement(N.Icon,{className:"H(16px) W(16px) seriesComparisonBtn:h_Fill($c-fuji-blue-1-a)! seriesComparisonBtn:h_Stk($c-fuji-blue-1-a)!",asset:T.a,color:"#464e56",height:16}),r.a.createElement("span",{className:"Fw(500) Fz(s) Mstart(5px) C($c-fuji-grey-j) seriesComparisonBtn:h_C($c-fuji-blue-1-a)"},_.ADD_TO_COMPARE))}}j.displayName="PerformanceCompare",j.propTypes={rapidSec:i.a.string,portfolioList:i.a.array,pfId:i.a.string,className:i.a.string,onSymbolChange:i.a.func},j.defaultProps={className:"D(ib) Va(m)"},j.contextTypes={getStore:i.a.func.isRequired};var $=M()(j,[k.a],(e,t)=>{const a=e.getStore(k.a).getLists(),s=[];return Object.keys(a).forEach(e=>{a[e].following||s.push({pfId:e,pfName:a[e].pfName})}),{portfolioList:s}}),V=a(1892),H=a(189),z=a(263),q=a.n(z),W=a(193),U=a(191),G=a.n(U),Y=a(260),Q=a.n(Y),Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const K="day",X=1,J="https://s.yimg.com/uc",ee=["#1ac567","#f0126f","#9552ff","#45e3ff","#ff7b12","#400090","#30d3b6","#e20081","#787d82","#000","#ffb700"];function te(e,t){if(e&&window.finChart&&window.finChart.stxx&&window.finChart.stxx.layout&&window.finChart.stxx.layout.symbolMap){const a="$"+e;window.finChart.stxx.layout.symbolMap[a]=t||a}}class ae extends r.a.PureComponent{constructor(){super(),this.onMetricChange=this.onMetricChange.bind(this),this.onRangeChange=this.onRangeChange.bind(this),this.onCustomRange=this.onCustomRange.bind(this),this.onComparison=this.onComparison.bind(this),this.onRemoveComparison=this.onRemoveComparison.bind(this),this.onChartReady=this.onChartReady.bind(this)}componentDidMount(){this.fetchAllCharts({range:"ytd"})}componentWillReceiveProps(e){G()(e.comparison,this.props.comparison)&&this.props.pfId===e.pfId||this.fetchAllCharts({pfId:e.pfId,comparison:e.comparison})}componentDidUpdate(e){const{meta:t}=this.props;if(t&&e.performance!==this.props.performance||e.meta!==t){const e={};if(t.isCustom){const a=new Date(t.start),s=new Date(t.end);let r;if(window.YFinChartSDK&&window.YFinChartSDK.PERIODICITIES&&(r=window.YFinChartSDK.PERIODICITIES[Object(W.k)(a,s)]),!r)return;const n={interval:r.interval||K,period:r.period||X};r.timeUnit&&(n.timeUnit=r.timeUnit),e.range={dtLeft:a,dtRight:s,periodicity:n}}else e.span=c.y[t.range||"ytd"];this.redrawChart(e)}}clearStaleComparison(e){const t=Object.keys(window.finChart.stxx.chart.series||{});Q()(t,e).forEach(e=>window.finChart.removeComparison(e))}redrawChart(e={}){const t="$"+this.props.pfId,{performance:a,meta:s}=this.props,r=s.comparison||this.props.comparison;window.finChart&&a&&a[t]&&(te(this.props.pfId,B.a.decode(this.props.pfName||"")),window.finChart.drawChart(t,e=>{e?Object(p.a)(this.context,"error","performanceChart:redraw",{message:e.responseText,symbol:this.props.pfId,code:e.status}):(this.clearStaleComparison(r),r.forEach((e,s)=>{if(e===t)return;const r=ee[s%ee.length];window.finChart.addComparison(e,{data:a[e],shareYAxis:!0,color:r})}))},e,a[t]))}fetchAllCharts({pfId:e,comparison:t,range:a,start:s,end:r}){const n="$"+(e||this.props.pfId),i=t||this.props.comparison;this.context.executeAction(x,{symbol:n,comparison:i,range:a,start:s,end:r})}onMetricChange(e,t){}onRangeChange(e,{range:t}){this.fetchAllCharts({range:t,comparison:this.props.meta.comparison})}onChartReady(e){if(e){const e=this.props.meta&&this.props.meta.range||"ytd";this.redrawChart({span:c.y[e]}),window.finChart&&window.finChart.stxx&&window.finChart.stxx.addEventListener(["symbolChange"],this.onRemoveComparison)}}onCustomRange({fromDate:e,toDate:t}){this.fetchAllCharts({start:e.getTime(),end:t.getTime()})}onComparison({type:e,symbol:t,name:a}){let s=t;"portfolio"===e&&t&&(s="$"+t,te(t,a)),this.context.executeAction(x,{comparison:[s],operation:"add",range:this.props.meta&&this.props.meta.range||"ytd"})}onRemoveComparison({stxx:e,symbol:t,symbolObject:a,action:s}){"remove-series"===s&&this.props.meta&&this.props.meta.comparison&&-1!==this.props.meta.comparison.indexOf(t)&&this.context.executeAction(x,{comparison:[t],operation:"remove"})}render(){const{className:e,pfId:t,pfName:a,userId:s,comparison:n,chartClassName:i,chartContainerClass:o,type:l,showSelectOptions:c,modalInnerContentClass:m,showCustomRange:d,rapidSec:p,showComparator:u,showSelectedDates:h,isLoading:f,hasError:g,teaserType:b,meta:x}=this.props,P="mini"===l,w={chart:{urlImagePrefix:J,isChartTab:!0,toolBarItems:[],rightBarItems:[],feedConfig:{userId:s},layout:{chartFamily:"pfPerformance",symbolMap:{["$"+t]:B.a.decode(a||"")||t}}}};let S;u&&(S=[r.a.createElement($,{key:"compare",rapidSec:p,pfId:t,className:"D(ib) Va(m) Mstart(20px)",onSymbolChange:this.onComparison})]);const I=r.a.createElement(y.a,{key:"toolbar",optionTitle:_.METRIC,options:[{data:"pf-returns",content:_.UNREALIZED_PORTFOLIO_RETURN}],selected:"pf-returns",rapidSec:"pf-chrt-toolbar",startDate:x&&x.start,endDate:x&&x.end,controls:S,showSelectedDates:h&&!P,showSelectOptions:c,showCustomRange:d,onCustomRange:this.onCustomRange,onOptionChange:this.onMetricChange,onRangeChange:this.onRangeChange});let M;const k="Pos(a) W(100%) H(100%) Mah(500px) Start(0) Z(5) Bgc($panelBackground) Bdrs(3px) Bd Bdc($finLightGrayAlt) "+(P?"T(0)":"T(35px)"),v="C($c-fuji-grey-j) Fz(m) Fw(b) Ta(c) Px(20px) "+m;f?M=r.a.createElement("div",{className:k},r.a.createElement("div",{className:v},r.a.createElement(H.a,{key:"spinner",type:"fuji",spinnerClass:"Mx(a)! My(0px)! Bgc(t)"}),r.a.createElement(C.FormattedMessage,{key:"msg",id:"LOADING_FULL_CHART"}))):g&&(M=r.a.createElement("div",{className:k},r.a.createElement("div",{className:v},r.a.createElement(N.Icon,{asset:q.a,className:"D(b) Mx(a) Mb(15px)",height:21,color:"#464e56"}),r.a.createElement(C.FormattedMessage,{id:"CHART_NOT_AVAILABLE"}))));const T=x&&x.isEmpty,F="mini"===b?{alignClassName:"Ta(c) Whs(n)",className:"Pt(100px)--mv2 Pt(50px) Pb(78px) Ta(c)",innerClassName:"M(a)"}:{className:"Bgc($panelBackground) Py(80px) Bdrs(3px) Bd Bdc($finLightGrayAlt)",innerClassName:"M(a) P(10px)--mobp P(10px)--mobl P(10px)--tab768 Whs(n)"},R=T?[r.a.createElement(V.a,Z({key:"teaser",type:b,pfId:t,hasHoldings:!1,isHighValueUser:!0},F))]:[r.a.createElement(E.a,{key:"chart",className:i,symbol:"$"+t,chartExpanded:!0,updateHash:!1,isStaticChart:!0,comparisonSymbols:n,componentConfig:w,restoreChart:!1,onChartReady:this.onChartReady,chartContainerClass:o})];return P?R.push(I):R.unshift(I),r.a.createElement("section",{className:"Pos(r) "+e+(T?" H(a)!":""),"data-yaft-module":"pf-detail-perf-chart"},M,R)}}ae.displayName="PerformanceChart",ae.propTypes={pfId:i.a.string.isRequired,pfName:i.a.string,teaserType:i.a.string,userId:i.a.string.isRequired,comparison:i.a.array,rapidSec:i.a.string.isRequired,chartClassName:i.a.string,chartContainerClass:i.a.string,modalInnerContentClass:i.a.string,showSelectOptions:i.a.bool,showCustomRange:i.a.bool,showSelectedDates:i.a.bool,showComparator:i.a.bool,type:i.a.string,performance:i.a.object,meta:i.a.object,isLoading:i.a.bool,hasError:i.a.bool,className:i.a.string},ae.defaultProps={rapidSec:"portfolio",className:"H(535px) Mb(30px)",teaserType:"trial",showSelectedDates:!0,showSelectOptions:!0,showComparator:!0,isLoading:!1,hasError:!1,performance:{},meta:{},chartClassName:"H(535px)",modalInnerContentClass:"Mt(200px)--mv2 Mt(90px)",type:"default",chartContainerClass:"Pos(r) Z(3) H(500px)"},ae.contextTypes={executeAction:i.a.func.isRequired,beacon:i.a.func.isRequired};t.a=M()(ae,[h.a],(e,t)=>{const a=e.getStore(h.a),s=a.getPerformance()||{},r=a.getMeta()||{};return{isLoading:a.isLoading(),hasError:a.hasError(),meta:r,performance:s}})},2002:function(e,t,a){"use strict";var s=a(26),r=a.n(s),n=a(88),i=a(246),o=a(626);const l="perfChart";function c(e,t,a){const{symbol:s,pfId:c,range:m="ytd",forceLoad:d,start:p,end:u,dispatch:h=!0}=t;if(!c&&!s){const e=r.a.http.badRequest("loadPerformanceChart: Missing `pfId` and `symbol`");return void(a&&a(e))}const f=e.request.user.guid;if(!f){const e=r.a.http.badRequest("loadPerformanceChart: Unable to fetch user guid");return void(a&&a(e))}const g=e.getStore(o.a).getLists(c);if(g&&g[l]&&!d)return void(a&&a());let b=p,x=u;if(!b||!x){const e=Object(i.T)(m);b=e.start,x=e.end}const E={params:{userId:f,start:b,end:x}};s?(E.resource="tachyon.quotePerformanceChart",E.params.symbol=s):(E.resource="tachyon.portfolioPerformanceChart",E.params.pfId=c),Object(n.b)(e,E).then(r=>{const n=s||c;h&&e.dispatch("FIN_PF_LIST_PARTIAL_UPDATE",{pfId:c,key:l,value:{[n]:{symbol:n,totalReturn:r&&r.performance&&r.performance.totalReturn||[],timestamp:r&&r.timestamp||[]}},silent:t.silent}),a&&a(null,r)}).catch(t=>{h&&e.dispatch("SET_FIN_PF_LIST_ERROR",{error:i.n}),a&&a(t)})}c.displayName="loadPerformanceChart",t.a=c},2003:function(e,t,a){"use strict";var s=a(1),r=a.n(s),n=a(0),i=a.n(n),o=a(1590),l=a(1859),c=a(20),m=(a.n(c),a(19)),d=a(246);const p=[{raw:"1m",fmt:"1M"},{raw:"6m",fmt:"6M"},{raw:"ytd",fmt:"YTD"},{raw:"1y",fmt:"1Y"},{raw:"5y",fmt:"5Y"},{raw:"max",fmt:"Max"}];class u extends r.a.Component{constructor(e){super(e),this.onRangeChange=this.onRangeChange.bind(this),this.onOptionChange=this.onOptionChange.bind(this),this.onCustomRange=this.onCustomRange.bind(this),this.state={range:"ytd",dateRange:e.dateRange}}onRangeChange(e,t){this.setState({range:e,dateRange:null}),"function"==typeof this.props.onRangeChange&&this.props.onRangeChange(t,{range:e,span:d.y[e]})}onOptionChange(e,{value:t}){"function"==typeof this.props.onOptionChange&&this.props.onOptionChange(e,t)}onCustomRange(e,t){this.setState({range:"custom",dateRange:{fromDate:e,toDate:t}}),"function"==typeof this.props.onCustomRange&&this.props.onCustomRange({fromDate:e,toDate:t})}render(){const{className:e,optionTitle:t,options:a,rapidSec:s,selected:n,showSelectOptions:i,showCustomRange:d,showSelectedDates:u,controls:h,startDate:f,endDate:g}=this.props,{range:b}=this.state,{fromDate:x,toDate:E}=this.state.dateRange||{};return r.a.createElement("div",{className:e},i&&[r.a.createElement("div",{key:"title",className:"D(ib) Va(m)"},t+":"),r.a.createElement("div",{key:"select",className:"D(ib) Va(m)"},r.a.createElement(o.a,{name:"pf-perf-chart-metric",className:"Bd(0)! D(b)",selected:n,onChange:this.onOptionChange,options:a}))],h&&h.map(e=>e),r.a.createElement("ul",{className:"List(n) M(0) P(0) Fl(end)--mv2 Ta(c)"},u&&f&&g&&r.a.createElement("li",{className:"D(ib) Bxz(bb) Va(m) Mend(10px) C($c-fuji-blue-1-a) Fw(500)"},r.a.createElement(m.FormattedDate,{value:f,year:"numeric",month:"short",day:"2-digit"}),r.a.createElement("span",{className:"Mx(4px)"},"-"),r.a.createElement(m.FormattedDate,{value:g,year:"numeric",month:"short",day:"2-digit"})),d&&r.a.createElement("li",{className:"D(ib) Bxz(bb) Va(m) Mend(15px)"},r.a.createElement(l.a,{onApply:this.onCustomRange,showSelectedDate:!1,fromDate:x||null,toDate:E||null,arrowStyle:{top:-10,left:40},dropDownClass:"Start(-150px) T(25px)",defaultString:"DATE_RANGE"})),p.map(e=>{let t;return t=e.raw===b?r.a.createElement("span",{className:"Fw(b) Fz(s) P(5px)--mobp P(5px)--mobl P(5px)--tab768 Fz(14px)--mobp Fz(14px)--mobl Fz(14px)--tab768"},e.fmt):r.a.createElement(c.I13nButton,{className:"Bd(0) P(0) P(5px)--mobp P(5px)--mobl P(5px)--tab768 M(0) Fz(s) Fz(14px)--mobp Fz(14px)--mobl Fz(14px)--tab768 C($c-fuji-grey-j) C($c-fuji-blue-1-a):h",i13nModel:{sec:s,slk:e.raw,itc:1,elm:"btn",elmt:"mu"},onClick:this.onRangeChange.bind(this,e.raw)},e.fmt),r.a.createElement("li",{key:e.raw,className:"D(ib) Bxz(bb) Va(m) Mend(15px)"},t)})))}}u.displayName="PerformanceToolbar",u.propTypes={className:i.a.string,rapidSec:i.a.string.isRequired,options:i.a.array,controls:i.a.oneOfType([i.a.array,i.a.node,i.a.string]),optionTitle:i.a.string,selected:i.a.string,showSelectOptions:i.a.bool,showSelectedDates:i.a.bool,showCustomRange:i.a.bool,startDate:i.a.number,endDate:i.a.number,dateRange:i.a.object,onOptionChange:i.a.func,onCustomRange:i.a.func,onRangeChange:i.a.func},u.defaultProps={className:"H(35px) Bxz(bb)",showCustomRange:!0,showSelectedDates:!0,showSelectOptions:!0},t.a=u},2038:function(e,t,a){"use strict";var s=a(68),r=a.n(s);const n=2,i=5;class o extends r.a{constructor(e){super(e),this.initialize()}initialize(){this.newsData=[],this.ads=[],this.meta={},this.errorList=[],this.loading=!1}setLoading(e){e&&e.loading&&(this.loading=e.loading,this.emitChange())}setError(e){e&&e.error&&(this.errorList.push(e),this.loading=!1,this.emitChange())}initialNewsLoadSuccess(e){e&&e.Content&&e.Content.result&&e.Meta&&e.Meta.result&&e.Meta.result.length&&(this.loading=!1,this.errorList=[],this.newsData=e.Content.result,this.meta=e.Meta.result[0],this.emitChange())}additionalNewsLoadSuccess(e){e&&e.Content&&e.Content.result&&e.Meta&&e.Meta.result&&e.Meta.result.length&&(this.loading=!1,this.errorList=[],this.newsData=this.newsData.concat(e.Content.result),this.meta=e.Meta.result[0],this.emitChange())}adsLoadSuccess(e){e&&(this.ads=e)}isLoading(){return this.loading}getNewsData(){let e=this.newsData.slice();if(this.ads.length)for(let t=0,a=n;a<=e.length;t++,a+=i)e.splice(a,0,this.ads[t%this.ads.length]);return e}getMeta(){return this.meta}hasError(){return this.errorList&&this.errorList.length>0}dehydrate(){return{newsData:this.newsData,ads:this.ads,meta:this.meta,errorList:this.errorList,loading:this.loading}}rehydrate(e){this.newsData=e.newsData,this.ads=e.ads,this.meta=e.meta,this.errorList=e.errorList,this.loading=e.loading}}o.storeName="NewsStore",o.handlers={INITIAL_PORTFOLIO_NEWS_LOAD_SUCCESS:"initialNewsLoadSuccess",ADDITIONAL_PORTFOLIO_NEWS_LOAD_SUCCESS:"additionalNewsLoadSuccess",LOAD_PORTFOLIO_ADS_SUCCESS:"adsLoadSuccess",SET_PORTFOLIO_NEWS_LOADING:"setLoading",LOAD_PORTFOLIO_NEWS_FAIL:"setError"},t.a=o},2081:function(e,t,a){"use strict";var s=a(26),r=a.n(s),n=a(246),i=a(88),o=a(626);const l="premiumSummary";function c(e,t,a){const{pfId:s}=t;if(!s)return void(a&&a(r.a.http.badRequest("loadPfPremiumSummary: Missing `pfId`")));const c=e.request.user.guid;if(!c)return void(a&&a(r.a.http.badRequest("loadPfPremiumSummary: Unable to fetch user guid")));const m=e.getStore(o.a).getLists(s);m&&m[l]?a&&a():Object(i.b)(e,{resource:"tachyon.portfolioPremiumSummary",params:{userId:c,pfId:s}}).then(n=>{if(!n)throw r.a.http.internalServerError("loadPfPremiumSummary: No data received");e.dispatch("FIN_PF_LIST_PARTIAL_UPDATE",{pfId:s,key:l,value:n,silent:t.silent}),a&&a(null,n)}).catch(t=>{e.dispatch("SET_FIN_PF_LIST_ERROR",{error:n.F}),a&&a(t)})}c.displayName="loadPfPremiumSummary",t.a=c},2183:function(e,t){if(void 0===a)var a={};a.reorder={name:"reorder",height:24,width:24,path:"M14.707 8.12c-.39.392-1.023.392-1.414 0-.39-.39-.39-1.022 0-1.413L17 3l3.707 3.707c.195.194.293.45.293.707 0 .256-.098.512-.293.707-.39.392-1.023.392-1.414 0L18 6.83v13.586h-2V6.828L14.707 8.12zm-10 7.173c-.39-.39-1.023-.39-1.414 0-.39.39-.39 1.023 0 1.414L7 20.414l3.707-3.707c.195-.194.293-.45.293-.707 0-.256-.098-.512-.293-.707-.39-.39-1.023-.39-1.414 0L8 16.586V3H6v13.586l-1.293-1.293z"},void 0!==e&&e.exports&&(e.exports=a.reorder)},2277:function(e,t){if(void 0===a)var a={};a.print={name:"print",height:24,width:24,path:"M18 13c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zm3 5h-2v-2c0-.552-.448-1-1-1H6c-.552 0-1 .448-1 1v2H3v-8h18v8zm-4 3H7v-4h10v4zM7 3h10v5H7V3zm15 5h-3V2c0-.552-.448-1-1-1H6c-.552 0-1 .448-1 1v6H2c-.552 0-1 .448-1 1v10c0 .552.448 1 1 1h3v2c0 .552.448 1 1 1h12c.552 0 1-.448 1-1v-2h3c.552 0 1-.448 1-1V9c0-.552-.448-1-1-1z"},void 0!==e&&e.exports&&(e.exports=a.print)},2278:function(e,t){if(void 0===a)var a={};a.upload={name:"upload",height:24,width:24,path:"M16.358 7.704L13 4.347V16.99h-2V4.346L7.643 7.704c-.375.375-.983.375-1.358 0-.375-.374-.375-.982 0-1.357L12 1l5.715 5.347c.375.375.375.983 0 1.357-.375.375-.982.375-1.357 0M21 22.99H3c-.552 0-1-.45-1-1.002v-6c0-.55.448-1 1-1s1 .45 1 1v5h16v-5c0-.55.448-1 1-1s1 .45 1 1v6c0 .553-.448 1-1 1"},void 0!==e&&e.exports&&(e.exports=a.upload)},2279:function(e,t){if(void 0===a)var a={};a["select-item"]={name:"select-item",height:24,width:24,path:"M10.232 15.792c.024.58.513 1.034 1.094 1.01.58-.024 1.032-.514 1.01-1.094l-.08-1.963 7.588 7.587.004-.005c.194.22.475.362.792.362.582 0 1.053-.47 1.053-1.05 0-.317-.144-.597-.368-.79l.007-.007-7.586-7.586 1.962.08c.58.02 1.07-.43 1.094-1.01.023-.58-.43-1.07-1.01-1.094L10 10l.232 5.792zm11.06-8.78c.39-.39.39-1.024 0-1.414-.392-.39-1.025-.39-1.415.002l-2.105 2.108c-.39.39-.39 1.024.002 1.414.39.39 1.024.39 1.414 0l2.104-2.11zM9.057 19.252c.397-.384.408-1.017.025-1.415-.384-.397-1.017-.408-1.414-.024l-2.09 2.02c-.4.382-.41 1.015-.026 1.413.383.397 1.017.408 1.414.024l2.09-2.02zM6.034 4.375c-.39-.392-1.022-.395-1.414-.006-.393.39-.395 1.022-.007 1.414L6.72 7.91c.39.393 1.023.395 1.415.007.392-.39.395-1.022.006-1.415L6.035 4.376zM3 12c-.552 0-1 .448-1 1s.448 1 1 1h2.8c.553 0 1-.448 1-1s-.447-1-1-1H3zm11-9c0-.552-.448-1-1-1s-1 .448-1 1v2.785c0 .552.448 1 1 1s1-.448 1-1V3z"},void 0!==e&&e.exports&&(e.exports=a["select-item"])},2280:function(e,t){if(void 0===a)var a={};a.edit={name:"edit",height:24,width:24,path:"M3.005 18.027v-3.023l7.65-7.656 5.882 5.888L9 21H6l-2.995-2.973zM14.577 3.422L20.46 9.31l-2.506 2.506-5.882-5.887 2.505-2.508zM22 21.002L11.67 21l10.918-10.98c.4-.4.37-1.048 0-1.42l-7.3-7.306c-.39-.392-1.026-.392-1.418 0L1.293 13.88c-.187.187-.293.442-.293.71v7.358C1 22.503 1.468 23 2.023 23H22c.553 0 1-.447 1-1 0-.552-.447-1-1-1z"},void 0!==e&&e.exports&&(e.exports=a.edit)},2281:function(e,t){if(void 0===a)var a={};a.code={name:"code",height:32,width:32,path:"M11.608 7.058c-.523-.523-1.368-.523-1.89 0l-7.994 7.996c-.52.523-.52 1.368 0 1.89l7.995 7.997c.26.262.602.393.943.393.343 0 .684-.13.945-.392.523-.52.523-1.367 0-1.89L4.56 16l7.048-7.052c.523-.523.523-1.368 0-1.89zm18.667 7.997L22.282 7.06c-.523-.524-1.368-.524-1.89 0-.522.522-.522 1.367 0 1.89L27.44 16l-7.05 7.052c-.52.523-.52 1.368 0 1.89.262.262.605.393.946.393.343 0 .684-.13.945-.392l7.994-7.996c.523-.523.523-1.368 0-1.89z"},void 0!==e&&e.exports&&(e.exports=a.code)}});